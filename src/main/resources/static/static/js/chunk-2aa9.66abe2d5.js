(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2aa9"],{"0wPz":function(e,t,r){"use strict";r.r(t);var o=r("Q2cO"),s=r.n(o),a=r("6ZY3"),i=r.n(a),l=r("t3Un");var n=r("Acpg"),m={name:"setCategoryKeyword",components:{messagebox:r("3Y2C").a},data:function(){return{labelPosition:"right",selection:[],matchTable:[{}],keywordsDialogVisible:!1,queryParams:{keyword:"",page:1,rows:15},item:[],pageSizesList:[10,15,20,30,40,50,100],totalCount:0,loading:!1,open:!0,current:0,keywordTable:[],matchForm:{},keywordForm:{bsCateId:"",bsCateName:"",bsName:"",bsOrderNumber:"",bsRemark:"",bsValue:1},dialog:{keywordVisible:!1,keyruleForm:{bsCateId:[{required:!0,message:"类别ID必填",trigger:"blur"}],bsCateName:[{required:!0,message:"类别名称",trigger:"blur"}],bsValue:[{required:!0,message:"匹配值",trigger:"blur"}],bsName:[{required:!0,message:"关键字名称",trigger:"blur"}]}},bsValueOption:[{label:"是",value:1},{label:"否",value:0}],statusFilter:function(e){return{1:"success",0:"danger"}[e]},formatStatus:function(e){return{1:"是",0:"否"}[e]},permit:{SEARCH:!1,ADD:!1,EDIT:!1,DELETE:!1}}},created:function(){this.getCategoryData(),this.getPermit()},methods:{handleSubmit:function(e){this.getKeywordList()},getPermit:function(){var e=this,t=this.$route.name;Object(n.e)(t).then(function(t){if(t.result)if("admin"==t.data)e.permit.SEARCH=!0,e.permit.ADD=!0,e.permit.EDIT=!0,e.permit.DELETE=!0;else for(var r=t.data,o=0;o<r.length;o++)"SEARCH"==r[o].permCode&&(e.permit.SEARCH=!0),"ADD"==r[o].permCode&&(e.permit.ADD=!0),"EDIT"==r[o].permCode&&(e.permit.EDIT=!0),"DELETE"==r[o].permCode&&(e.permit.DELETE=!0);else e.$message.error(res.msg)})},resetFrom:function(){this.queryParams.keyword=""},handleSelectionChange:function(e){this.keywordForm=i()({}),this.selection=null!=e?e:i()({}),this.keywordForm.bsCateId=this.selection.id,this.keywordForm.bsCateName=this.selection.bsName,this.getKeywordList()},showEditDialog:function(){if(null!=this.selection&&0!=this.selection.length){this.keywordsDialogVisible=!0;var e=this.selection;this.matchForm={bsName:e.bsName,id:e.id}}else this.$message.error("请选择要操作的新料!")},newCategory:function(){this.keywordsDialogVisible=!0,this.matchForm.bsName="",this.matchForm.id=""},getCategoryData:function(){var e=this;(function(e){return Object(l.a)({url:"/keywordsCategory2/getlist",method:"get",params:e})})().then(function(t){t.data||reject("error"),e.matchTable=t.data})},getKeywordList:function(){var e=this;(function(e){return Object(l.a)({url:"/keywords2/getlist",method:"get",params:e})})(i()({},{cateId:this.selection.id,keyword:this.queryParams.keyword,rows:this.queryParams.rows,page:this.queryParams.page})).then(function(t){t.data||reject("error"),e.keywordTable=t.data.rows,e.totalCount=t.data.total})},showEditKeyword:function(e){null!=this.selection&&0!=this.selection.length?(this.dialog.keywordVisible=!0,this.keywordForm=i()({},e)):this.$message.error("请选择要操作的分类!")},addShowDialog:function(){if(null!=this.selection&&0!=this.selection.length){this.dialog.keywordVisible=!0;var e={id:"",bsCateId:this.keywordForm.bsCateId,bsCateName:this.keywordForm.bsCateName,bsName:"",bsOrderNumber:"",bsRemark:"",bsValue:1};this.keywordForm=i()(e)}else this.$message.error("请选择要操作的分类!")},matchFormOk:function(){var e=this,t=i()({},this.matchForm);void 0!=s()(this.matchForm.id)&&"number"==typeof this.matchForm.id?this.$refs.ruleForm1.validate(function(r){r&&function(e){return Object(l.a)({url:"/keywordsCategory2/edit",method:"post",params:e})}(t).then(function(t){t.result?(e.keywordsDialogVisible=!1,e.$message.info(t.msg),e.getCategoryData()):e.$message.error(t.msg)})}):this.$refs.ruleForm1.validate(function(r){e.dialog.loading=!0,r&&function(e){return Object(l.a)({url:"/keywordsCategory2/add",method:"post",params:e})}(t).then(function(t){t.result?(e.keywordsDialogVisible=!1,e.getCategoryData()):e.$message.error(t.msg)})})},doDelete:function(){var e=this;null==this.selection&0==this.selection.length?this.$message.error("请选择要操作的行！"):function(e){return Object(l.a)({url:"/keywordsCategory2/delete",method:"post",params:{id:e}})}(this.selection.id).then(function(t){t.result?(e.$message({message:t.msg,type:"success"}),e.getCategoryData()):e.$message.error(t.msg)})},addKeywordsBtn:function(){var e=this,t=i()({},this.keywordForm);void 0!=s()(this.keywordForm.id)&&"number"==typeof this.keywordForm.id?this.$refs["dialog.keyruleForm"].validate(function(r){r&&function(e){return Object(l.a)({url:"/keywords2/edit",method:"post",params:e})}(t).then(function(t){t.result?(e.dialog.keywordVisible=!1,e.$message.info(t.msg),e.getKeywordList()):e.$message.error(t.msg)})}):this.$refs["dialog.keyruleForm"].validate(function(r){r&&function(e){return Object(l.a)({url:"/keywords2/add",method:"post",params:e})}(t).then(function(t){t.result?(e.dialog.keywordVisible=!1,e.getKeywordList()):e.$message.error(t.msg)})})},delKeywordlist:function(e){var t=this;(function(e){return Object(l.a)({url:"/keywords2/delete",method:"post",params:{id:e}})})(e.id).then(function(e){e.result?(t.$message({message:e.msg,type:"success"}),t.getKeywordList()):t.$message.error(e.msg)})},select:function(e,t){e.length>1&&e.shift()},clickRow:function(e,t){this.$refs.mateTable.toggleRowSelection(e)},changePage:function(e){this.queryParams.page=e,this.getKeywordList()},SizeChange:function(e){this.queryParams.rows=e,this.getKeywordList()}}},c=(r("iFyC"),r("ZrdR")),d=Object(c.a)(m,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"headerTop"},[r("el-row",[r("el-col",{staticStyle:{width:"286px"},attrs:{span:6}},[r("el-button-group",{staticStyle:{"margin-left":"18px","margin-bottom":"10px"}},[e.permit.ADD?r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.newCategory()}}},[e._v("新增分类")]):e._e(),e._v(" "),e.permit.EDIT?r("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.showEditDialog()}}},[e._v("编辑分类")]):e._e(),e._v(" "),e.permit.DELETE?r("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:function(t){e.doDelete()}}},[e._v("删除")]):e._e()],1)],1),e._v(" "),r("el-col",{staticStyle:{"margin-left":"10px"},attrs:{span:15}},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.queryParams}},[r("el-form-item",{attrs:{label:"关键字"}},[r("el-input",{staticClass:"search-input",attrs:{placeholder:"关键字"},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}})],1),e._v(" "),r("el-form-item",[e.permit.SEARCH?r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.handleSubmit("formQuery")}}},[e._v(e._s(e.$t("Button.Inquire")))]):e._e(),e._v(" "),e.permit.ADD?r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.addShowDialog()}}},[e._v("新增关键字")]):e._e()],1)],1)],1)],1)],1),e._v(" "),r("el-container",{staticStyle:{height:"500px"}},[r("el-aside",{staticClass:"tree"},[r("h3",[e._v("分类列表 ")]),e._v(" "),r("el-table",{ref:"mateTable",staticClass:"mateTable",attrs:{"highlight-current-row":"",data:e.matchTable},on:{"current-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"index",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{width:"230",prop:"bsName",label:"关键字名称"}})],1)],1),e._v(" "),r("el-main",[r("el-table",{attrs:{data:e.keywordTable}},[r("el-table-column",{attrs:{prop:"bsCateName",label:"类别名称","show-overflow-tooltip":"",width:"200"}}),e._v(" "),r("el-table-column",{attrs:{prop:"bsName",label:"关键字名称","show-overflow-tooltip":""}}),e._v(" "),r("el-table-column",{attrs:{prop:"bsValue",label:"是否100%匹配",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tag",{attrs:{type:e.statusFilter(t.row.bsValue)}},[e._v(e._s(e.formatStatus(t.row.bsValue)))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"bsRemark",label:"备注"}}),e._v(" "),r("el-table-column",{attrs:{prop:"address",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.permit.EDIT?r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini",circle:""},on:{click:function(r){e.showEditKeyword(t.row)}}}):e._e(),e._v(" "),e.permit.DELETE?r("messagebox",{attrs:{title:"提示",contents:"此操作将永久删除该行, 是否继续?",confirmTitle:"确认删除"},on:{callConfirm:function(r){e.delKeywordlist(t.row)}}}):e._e()]}}])})],1)],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"新增类别",visible:e.keywordsDialogVisible,width:"35%"},on:{"update:visible":function(t){e.keywordsDialogVisible=t}}},[r("el-form",{ref:"ruleForm1",attrs:{inline:!0,model:e.matchForm}},[r("el-form-item",{staticStyle:{display:"none"},attrs:{label:"id",prop:"id"}},[r("el-input",{model:{value:e.matchForm.id,callback:function(t){e.$set(e.matchForm,"id",t)},expression:"matchForm.id"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"物料类别",prop:"bsName"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.matchForm.bsName,callback:function(t){e.$set(e.matchForm,"bsName",t)},expression:"matchForm.bsName"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"el-icon-close",on:{click:function(t){e.keywordsDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{staticClass:"el-icon-check",attrs:{type:"primary"},on:{click:e.matchFormOk}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"关键字设置",visible:e.dialog.keywordVisible,width:"500px"},on:{"update:visible":function(t){e.$set(e.dialog,"keywordVisible",t)}}},[r("el-form",{ref:"dialog.keyruleForm",staticClass:"keywordForm",attrs:{model:e.keywordForm,rules:e.dialog.keyruleForm,inline:!0,"label-position":"right","label-width":"110px"}},[r("el-form-item",{attrs:{label:"类别ID",prop:"bsCateId","label-position":"left"}},[r("el-input",{staticStyle:{width:"218px"},attrs:{disabled:!0},model:{value:e.keywordForm.bsCateId,callback:function(t){e.$set(e.keywordForm,"bsCateId",t)},expression:"keywordForm.bsCateId"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"分类名称",prop:"bsCateName"}},[r("el-input",{staticStyle:{width:"218px"},attrs:{disabled:!0},model:{value:e.keywordForm.bsCateName,callback:function(t){e.$set(e.keywordForm,"bsCateName",t)},expression:"keywordForm.bsCateName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"关键字名称",prop:"bsName"}},[r("el-input",{staticStyle:{width:"218px"},model:{value:e.keywordForm.bsName,callback:function(t){e.$set(e.keywordForm,"bsName",t)},expression:"keywordForm.bsName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"填写备注",prop:"bsRemark"}},[r("el-input",{staticStyle:{width:"218px"},model:{value:e.keywordForm.bsRemark,callback:function(t){e.$set(e.keywordForm,"bsRemark",t)},expression:"keywordForm.bsRemark"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"是否100%匹配",prop:"bsValue"}},[r("el-switch",{staticClass:"demo",attrs:{"active-value":1,"inactive-value":0,"active-text":"是","inactive-text":"否","active-color":"#13ce66","inactive-color":"#ccc"},model:{value:e.keywordForm.bsValue,callback:function(t){e.$set(e.keywordForm,"bsValue",t)},expression:"keywordForm.bsValue"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"el-icon-close",on:{click:function(t){e.dialog.keywordVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{staticClass:"el-icon-check",attrs:{type:"primary"},on:{click:e.addKeywordsBtn}},[e._v("确 定")])],1)],1),e._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{staticClass:"pull-right clearfix",attrs:{current:1,"current-page":e.queryParams.page,"page-sizes":e.pageSizesList,"page-size":e.queryParams.rows,layout:"total, sizes, prev, pager, next, jumper","page-size-opts":e.pageSizesList,total:e.totalCount},on:{"current-change":e.changePage,"size-change":e.SizeChange,"update:currentPage":function(t){e.$set(e.queryParams,"page",t)}}})],1)],1)},[],!1,null,null,null);d.options.__file="setCategorykeyword.vue";t.default=d.exports},Acpg:function(e,t,r){"use strict";r.d(t,"a",function(){return s}),r.d(t,"c",function(){return a}),r.d(t,"b",function(){return i}),r.d(t,"f",function(){return l}),r.d(t,"d",function(){return n}),r.d(t,"g",function(){return m}),r.d(t,"e",function(){return c});var o=r("t3Un");function s(e){return Object(o.a)({url:"/sysPermission/add",method:"post",params:e})}function a(e){return Object(o.a)({url:"/sysPermission/edit",method:"post",params:e})}function i(e){return Object(o.a)({url:"/sysPermission/delete",method:"post",params:{id:e}})}function l(e,t,r){return Object(o.a)({url:"/sysPermission/getlist",method:"get",params:{keyword:e,page:r,rows:t}})}function n(e,t){return Object(o.a)({url:"/sysPermission/getPermByRouter",method:"post",params:{roleId:e,routerId:t}})}function m(e){return Object(o.a)({url:"/sysPermission/setPerm",method:"post",params:e})}function c(e){return Object(o.a)({url:"/sysPermission/getPermByRouterCode",method:"get",params:{routerCode:e}})}},iFyC:function(e,t,r){"use strict";var o=r("zCXg");r.n(o).a},zCXg:function(e,t,r){}}]);