(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ce5d"],{"534t":function(t,e,a){"use strict";var o=a("gDiZ");a.n(o).a},"A2h+":function(t,e,a){"use strict";a.d(e,"b",function(){return r}),a.d(e,"f",function(){return s}),a.d(e,"c",function(){return n}),a.d(e,"d",function(){return i}),a.d(e,"g",function(){return l}),a.d(e,"a",function(){return u}),a.d(e,"e",function(){return p});var o=a("t3Un");function r(t){return Object(o.a)({url:"/enquiryBom/delete",method:"post",params:{id:t}})}function s(t){return Object(o.a)({url:"/enquiryBom/getlist",method:"get",params:t})}function n(t){return Object(o.a)({url:"/enquiryBom/doCreateEnquiry",method:"get",params:t})}function i(t){return Object(o.a)({url:"/enquiryBom/getDetailInfo",method:"get",params:t})}function l(t,e,a){return Object(o.a)({url:"/enquiryBom/setSupplier",method:"post",params:{eqBomId:t,detailIds:e,suppIds:a}})}function u(t){return Object(o.a)({url:"/enquiryBom/deleteDetail",method:"post",params:{id:t}})}function p(t){return Object(o.a)({url:"/enquiryBom/getUserList",method:"get",params:t})}},cQBa:function(t,e,a){"use strict";a.r(e);var o=a("6ZY3"),r=a.n(o),s=a("A2h+"),n=a("prnK"),i={name:"enquiryBomDetail",components:{messagebox:a("3Y2C").a},data:function(){return{eqBomId:this.$route.query.eqBomId,loading:!0,current:0,open:!0,items:[{sort:"全部"},{sort:"未设置"},{sort:"已设置"}],detailList:[{}],queryParams:{page:1,rows:15,pkParent:-1,bsStatus:0,keyword:""},pageSizesList:[15,20,30,40,50,100],totalCount:0,statusFilter:function(t){return{1:"danger",2:"success"}[t]},formatStata:function(t){return{1:"未设置",2:"已设置"}[t]},dialog:{suppVisible:!1,keyword:""},suppList:[],suppSelectedList:[],suppParams:{page:1,rows:5},suppPSList:[5,10,20,30],suppTotal:0,multipleSelection:[]}},created:function(){this.getData()},methods:{addClass:function(t){this.current=t},changeStatus:function(t){this.queryParams.bsStatus=t,this.getData()},getData:function(){var t=this,e=r()({},this.queryParams,{bsEqBomId:this.eqBomId});this.loading=!0,Object(s.d)(e).then(function(e){t.loading=!1,e.result?(t.detailList=e.data.rows,t.totalCount=e.data.total):t.$message.error(e.msg)})},resetFrom:function(){this.queryParams.keyword=""},doDelete:function(t){var e=this,a=t.id;Object(s.a)(a).then(function(t){t.result?(e.$message({message:t.msg,type:"success"}),e.getData()):e.$message.error(t.msg)})},changePage:function(t){this.queryParams.page=t,this.getData()},sizeChange:function(t){this.queryParams.rows=t,this.getData()},getSuppData:function(){var t=this,e=r()({},this.suppParams,{keyword:this.dialog.keyword,suppGrade:2});Object(n.i)(e).then(function(e){e.result?(t.suppList=e.data.rows,t.suppTotal=e.data.total):t.$message.error(e.msg)})},showSupplier:function(){this.multipleSelection.length>0?(this.dialog.suppVisible=!0,this.getSuppData()):this.$message.error("请选择要操作的行")},setSupplier:function(){for(var t=this,e=this.eqBomId,a="",o=0;o<this.multipleSelection.length;o++)a+=this.multipleSelection[o].id+",";a=a.substring(0,a.lastIndexOf(","));var r="";for(o=0;o<this.suppSelectedList.length;o++)r+=this.suppSelectedList[o].id+",";r=r.substring(0,r.lastIndexOf(",")),Object(s.g)(e,a,r).then(function(e){e.result?(t.getData(),t.dialog.suppVisible=!1,t.$message.info(e.msg)):t.$message.error(e.msg)})},chooseSupp:function(t){this.suppSelectedList.push(t)},deleteSupp:function(t){this.suppSelectedList.splice(t,1)},suppChangePage:function(t){this.suppParams.page=t,this.getSuppData()},suppSizeChange:function(t){this.suppParams.rows=t,this.getSuppData()},handleSelectionChange:function(t){this.multipleSelection=t}}},l=(a("534t"),a("ZrdR")),u=Object(l.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"retrieval"},[a("div",{staticClass:"title"},[a("h3",[t._v("状态")]),t._v(" "),a("div",{staticClass:"filter"},[a("ul",t._l(t.items,function(e,o){return a("li",{key:o,class:{current:o==t.current},on:{click:function(e){t.addClass(o)}}},[a("a",{on:{click:function(e){t.changeStatus(o)}}},[a("span",[t._v(t._s(e.sort))])])])}))]),t._v(" "),a("span",{staticClass:"more",on:{click:function(e){t.open=!t.open}}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticClass:"searchDiv"},[a("el-form",{ref:"form",staticClass:"formStly",attrs:{model:t.queryParams,size:"small",inline:!0}},[a("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"关键字",prop:"keyword"}},[a("el-input",{model:{value:t.queryParams.keyword,callback:function(e){t.$set(t.queryParams,"keyword",e)},expression:"queryParams.keyword"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.getData}},[t._v("查找")]),t._v(" "),a("el-button",{attrs:{type:"info",size:"mini"},on:{click:t.resetFrom}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:t.showSupplier}},[t._v("设置供应商")])],1)],1)],1)],1)],1)]),t._v(" "),[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:t.detailList,"tooltip-effect":"dark","highlight-current-row":""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),t._v(" "),a("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bsStatus",label:"状态",align:"center",width:"80","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.statusFilter(e.row.bsStatus)}},[t._v(t._s(t.formatStata(e.row.bsStatus)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"bsModel",label:"规格","show-overflow-tooltip":"",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bsName",label:"名称","show-overflow-tooltip":"",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bsCategory",label:"类别","show-overflow-tooltip":"",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bsQty",label:"数量","show-overflow-tooltip":"",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bsPackage",label:"封装","show-overflow-tooltip":"",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bsCusName",label:"品牌名称","show-overflow-tooltip":"",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bsCusCode",label:"品牌料号","show-overflow-tooltip":"",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bsPlaceNum",label:"位号","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"bsBomNum",label:"套数","show-overflow-tooltip":"",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("messagebox",{attrs:{title:"提示",contents:"此操作将永久删除该行, 是否继续?",confirmTitle:"确认删除"},on:{callConfirm:function(a){t.doDelete(e.row)}}})]}}])})],1)],t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{staticClass:"pull-right clearfix",attrs:{current:1,"current-page":t.queryParams.page,"page-sizes":t.pageSizesList,"page-size":t.queryParams.rows,layout:"total, sizes, prev, pager, next, jumper","page-size-opts":t.pageSizesList,total:t.totalCount},on:{"current-change":t.changePage,"size-change":t.sizeChange,"update:currentPage":function(e){t.$set(t.queryParams,"page",e)}}})],1),t._v(" "),a("el-dialog",{attrs:{title:"设置供应商",visible:t.dialog.suppVisible,width:"1000px"},on:{"update:visible":function(e){t.$set(t.dialog,"suppVisible",e)}}},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.dialog}},[a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{attrs:{placeholder:"关键字"},model:{value:t.dialog.keyword,callback:function(e){t.$set(t.dialog,"keyword",e)},expression:"dialog.keyword"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.getSuppData}},[t._v("查找")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.suppList,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"suppCode",label:"供应商编号","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppChineseName",label:"中文名称","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppK3Code",label:"K3编码","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.chooseSupp(e.row)}}},[t._v("选择")])]}}])})],1),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{staticClass:"pull-right clearfix",attrs:{current:1,"current-page":t.suppParams.page,"page-sizes":t.suppPSList,"page-size":t.suppParams.rows,layout:"total, sizes, prev, pager, next, jumper","page-size-opts":t.suppPSList,total:t.suppTotal},on:{"current-change":t.suppChangePage,"size-change":t.suppSizeChange,"update:currentPage":function(e){t.$set(t.suppParams,"page",e)}}})],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.suppSelectedList,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"suppCode",label:"供应商编号","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppChineseName",label:"中文名称","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppK3Code",label:"K3编码","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger"},on:{click:function(a){t.deleteSupp(e.$index)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"suppFooter"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialog.suppVisible=!1}}},[t._v("关闭")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.setSupplier}},[t._v("确认")])],1)],1)],2)},[],!1,null,null,null);u.options.__file="enquiryBomDetail.vue";e.default=u.exports},gDiZ:function(t,e,a){},prnK:function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"e",function(){return s}),a.d(e,"b",function(){return n}),a.d(e,"i",function(){return i}),a.d(e,"k",function(){return l}),a.d(e,"j",function(){return u}),a.d(e,"m",function(){return p}),a.d(e,"c",function(){return c}),a.d(e,"l",function(){return d}),a.d(e,"f",function(){return m}),a.d(e,"d",function(){return f}),a.d(e,"h",function(){return h}),a.d(e,"g",function(){return g});var o=a("t3Un");function r(t){return Object(o.a)({url:"/supplierInfo/add",method:"post",data:t})}function s(t){return Object(o.a)({url:"/supplierInfo/edite",method:"post",data:t})}function n(t){return Object(o.a)({url:"/supplierInfo/delete",method:"post",params:{id:t}})}function i(t){return Object(o.a)({url:"/supplierInfo/getlist",method:"get",params:t})}function l(t){return Object(o.a)({url:"/supplierInfo/getlistWithTobe",method:"get",params:t})}function u(t){return Object(o.a)({url:"/supplierInfo/getlistAll",method:"get",params:t})}function p(t){return Object(o.a)({headers:{"Content-Type":"multipart/form-data"},url:"/file/upload",method:"post",data:t})}function c(t){return Object(o.a)({headers:{"Content-Type":"multipart/form-data"},url:"/file/delete",method:"post",params:{fsFileId:t}})}function d(t,e){return Object(o.a)({url:"/supplierInfo/updateStatus",method:"post",params:{idsArray:t,suppGrade:e}})}function m(t){return Object(o.a)({url:"/priceChart/getPriceChart",method:"get",params:t})}function f(){return Object(o.a)({url:"/supplierInfo/doMatchK3",method:"get"})}function h(t){return Object(o.a)({url:"/supplierInfo/getSupplierByLoginName",method:"get",params:{loginName:t}})}function g(t){return Object(o.a)({url:"/supplierInfo/getSupplierByCurrUser",method:"get",params:t})}}}]);