(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-292c"],{"1fh1":function(e,t,a){"use strict";var r=a("decx");a.n(r).a},Acpg:function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"c",function(){return l}),a.d(t,"b",function(){return i}),a.d(t,"f",function(){return s}),a.d(t,"d",function(){return n}),a.d(t,"g",function(){return m}),a.d(t,"e",function(){return c});var r=a("t3Un");function o(e){return Object(r.a)({url:"/sysPermission/add",method:"post",params:e})}function l(e){return Object(r.a)({url:"/sysPermission/edit",method:"post",params:e})}function i(e){return Object(r.a)({url:"/sysPermission/delete",method:"post",params:{id:e}})}function s(e,t,a){return Object(r.a)({url:"/sysPermission/getlist",method:"get",params:{keyword:e,page:a,rows:t}})}function n(e,t){return Object(r.a)({url:"/sysPermission/getPermByRouter",method:"post",params:{roleId:e,routerId:t}})}function m(e){return Object(r.a)({url:"/sysPermission/setPerm",method:"post",params:e})}function c(e){return Object(r.a)({url:"/sysPermission/getPermByRouterCode",method:"get",params:{routerCode:e}})}},K4to:function(e,t,a){"use strict";a.r(t);var r=a("6ZY3"),o=a.n(r),l=a("Q2cO"),i=a.n(l),s=a("VxlD"),n=a("Acpg"),m={name:"materielManage",components:{MessageBox:a("3Y2C").a},data:function(){return{menuTree:[],showMenuTree:!1,isReadOnly:!0,isdisabled:!0,dialog:{loading:!1,dialogVisible:!1,ruleForm:{mateName:[{required:!0,message:"请填物料名称",trigger:"blur"}],categoryName:[{required:!0,message:"请选择物料类别",trigger:"blur"}],mateModel:[{required:!0,message:"请填写规格",trigger:"blur"}]}},materielForm:{},K3CodeCheck:"请选择",editCheckId:"",rolesDate:[],multipleSelection:[],dialogTitle:"新增物料",categoryOptions:{},formLabelWidth:"100px",formQuery:{mateModel:"",mateName:""},suppliers:[],currentRow:[],materielTable:[{}],materielK3Table:[{}],tree:{data:[{expand:!0,label:"电阻类",children:[]}]},queryParams:{page:1,rows:10,pkParent:-1},queryK3Params:{page:1,rows:10,pkParent:-1},pageSizesList:[10,20,30,40,50,100],totalCount:0,totalK3Count:0,loading:!1,permit:{SEARCH:!1,ADD:!1,EDIT:!1,DELETE:!1}}},created:function(){this.getData(),this.getPermit()},mounted:function(){},methods:{handleSubmit:function(e){this.getData()},getPermit:function(){var e=this,t=this.$route.name;Object(n.e)(t).then(function(t){if(t.result)if("admin"==t.data)e.permit.SEARCH=!0,e.permit.ADD=!0,e.permit.EDIT=!0,e.permit.DELETE=!0;else for(var a=t.data,r=0;r<a.length;r++)"SEARCH"==a[r].permCode&&(e.permit.SEARCH=!0),"ADD"==a[r].permCode&&(e.permit.ADD=!0),"EDIT"==a[r].permCode&&(e.permit.EDIT=!0),"DELETE"==a[r].permCode&&(e.permit.DELETE=!0);else e.$message.error(res.msg)})},getData:function(){var e=this;this.loading=!0;Object(s.e)(this.formQuery.mateK3Code,this.formQuery.mateName,this.queryParams.rows,this.queryParams.page,this.queryK3Params.rows,this.queryK3Params.page).then(function(t){t.result?(e.materielTable=t.data.listSrm.rows,e.totalCount=t.data.listSrm.total,e.materielK3Table=t.data.listK3.rows,e.totalK3Count=t.data.listK3.total,e.loading=!1):e.$Message.error(t.msg)})},showAddDialog:function(){this.materielForm={id:""},this.isdisabled=!1,this.isReadOnly=!1,this.dialog.dialogVisible=!0},OK:function(){var e=this;void 0!=i()(this.materielForm.id)&&"number"==typeof this.materielForm.id?this.$refs["dialog.formItem"].validate(function(t){t&&Object(s.c)(e.materielForm).then(function(t){t.result?(e.dialog.dialogVisible=!1,e.getData()):e.$Message.error(res.msg)})}):this.$refs["dialog.formItem"].validate(function(t){t&&Object(s.a)(e.materielForm).then(function(t){t.result?(e.dialog.dialogVisible=!1,e.getData()):e.$message.error(res.msg)})})},doDelete:function(e){var t=this,a=e.id;Object(s.b)(a).then(function(e){e.result?(t.$message({message:e.msg,type:"success"}),t.getData()):t.$Message.error(res.msg)})},showStock:function(e){var t=this;this.loading=!0;var a=e.mateK3Code;Object(s.f)(a).then(function(e){e.result?alert(e.msg):t.$Message.error(e.msg),t.loading=!1})},showEditDialog:function(e){this.materielForm=o()({},e),this.dialogTitle="编辑物料",this.dialog.dialogVisible=!0,this.isReadOnly=!1,this.isdisabled=!1},viewMateriel:function(e){this.materielForm={categoryId:e.categoryId,mateName:e.mateName,categoryName:e.categoryName,mateModel:e.mateModel},this.isReadOnly=!0,this.isdisabled=!0,this.dialog.dialogVisible=!0},querySupplier:function(){},handleSelectionChange:function(e){this.multipleSelection=e},importExecl:function(){this.currentRow||this.$message.error("请选择要分配角色的用户")},cancel:function(){this.dialog.modal_dialog=!1},changePage:function(e){this.queryParams.page=e,this.getData()},changePageK3:function(e){this.queryK3Params.page=e,this.getData()},SizeChange:function(e){this.queryParams.rows=e,this.getData()},SizeChangeK3:function(e){this.queryK3Params.rows=e,this.getData()},checkChange:function(e,t,a){1==t?(this.editCheckId=e.id,this.$refs.tree.setCheckedKeys([e.id])):this.editCheckId==e.id&&this.$refs.tree.setCheckedKeys([e.id])},nodeClick:function(e,t,a){this.editCheckId=e.id,this.K3CodeCheck=e.label,this.$refs.tree.setCheckedKeys([e.id])}}},c=(a("1fh1"),a("ZrdR")),d=Object(c.a)(m,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"数据加载中，请稍等"}},[a("el-card",{staticStyle:{border:"none"}},[a("el-row",[a("el-col",{staticStyle:{width:"100%"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formQuery}},[a("el-form-item",{attrs:{label:"物料号"}},[a("el-input",{attrs:{placeholder:"K3物料号"},model:{value:e.formQuery.mateK3Code,callback:function(t){e.$set(e.formQuery,"mateK3Code",t)},expression:"formQuery.mateK3Code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"物料名称"},model:{value:e.formQuery.mateName,callback:function(t){e.$set(e.formQuery,"mateName",t)},expression:"formQuery.mateName"}})],1),e._v(" "),a("el-form-item",[e.permit.SEARCH?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.handleSubmit("formQuery")}}},[e._v("查找")]):e._e()],1),e._v(" "),a("el-form-item",[e.permit.ADD?a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.showAddDialog()}}},[e._v("新增物料")]):e._e()],1)],1)],1)],1),e._v(" "),e.showMenuTree?a("div",{staticClass:"elTree"},[a("el-tree",{ref:"tree",attrs:{border:"",data:e.treeList,props:e.defaultProps,"show-checkbox":"","node-key":"id","check-strictly":!0,"highlight-current":!0,"default-expand-all":"","expand-on-click-node":!1,"render-content":e.renderContent},on:{"check-change":e.checkChange,"node-click":e.nodeClick}})],1):e._e()],1),e._v(" "),a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"SRM物料信息"}},[[a("el-table",{ref:"materielTable",staticStyle:{width:"100%"},attrs:{data:e.materielTable,"tooltip-effect":"dark","highlight-current-row":"",border:""},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mateK3Code",label:"K3物料号",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"categoryName",label:"物料类别",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"mateName",label:"物料名称","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"mateModel",label:"物料规格","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"fStockQty",label:"库存数量","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"fAuxPriceDiscount",label:"最新采购单价","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"suppCode",label:"供应商编号","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"suppChineseName",label:"供应商名称","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{icon:"el-icon-search",size:"mini",circle:""},on:{click:function(a){e.viewMateriel(t.row)}}}),e._v(" "),e.permit.EDIT?a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit",circle:""},on:{click:function(a){e.showEditDialog(t.row)}}}):e._e(),e._v(" "),e.permit.DELETE?a("MessageBox",{attrs:{title:"提示",contents:"此操作将永久删除该行, 是否继续?",confirmTitle:"确认删除"},on:{callConfirm:function(a){e.doDelete(t.row)}}}):e._e(),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-share",circle:""},on:{click:function(a){e.showStock(t.row)}}})]}}])})],1)],e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{staticClass:"pull-right clearfix",attrs:{current:1,"current-page":e.queryParams.page,"page-sizes":e.pageSizesList,"page-size":e.queryParams.rows,layout:"total, sizes, prev, pager, next, jumper","page-size-opts":e.pageSizesList,total:e.totalCount},on:{"current-change":e.changePage,"size-change":e.SizeChange,"update:currentPage":function(t){e.$set(e.queryParams,"page",t)}}})],1)],2),e._v(" "),a("el-tab-pane",{attrs:{label:"K3同步物料信息"}},[[a("el-table",{ref:"materielK3Table",staticStyle:{width:"100%"},attrs:{data:e.materielK3Table,"tooltip-effect":"dark","highlight-current-row":"",border:""}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fItemId",label:"K3物料Id",width:"100","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"fCategoryName",label:"物料类别",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"fNumber",label:"物料编号","show-overflow-tooltip":"",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fName",label:"物料名称","show-overflow-tooltip":"",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"fModel",label:"物料规格","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"fFullName",label:"物料名称全称","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"fStockQty",label:"库存数量","show-overflow-tooltip":""}})],1)],e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{staticClass:"pull-right clearfix",attrs:{current:1,"current-page":e.queryK3Params.page,"page-sizes":e.pageSizesList,"page-size":e.queryK3Params.rows,layout:"total, sizes, prev, pager, next, jumper","page-size-opts":e.pageSizesList,total:e.totalK3Count},on:{"current-change":e.changePageK3,"size-change":e.SizeChangeK3,"update:currentPage":function(t){e.$set(e.queryK3Params,"page",t)}}})],1)],2)],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialog.dialogVisible,width:"35%"},on:{"update:visible":function(t){e.$set(e.dialog,"dialogVisible",t)}}},[a("el-form",{ref:"dialog.formItem",staticStyle:{width:"80%"},attrs:{model:e.materielForm,rules:e.dialog.ruleForm}},[a("el-form-item",{staticStyle:{display:"none"},attrs:{label:"物料ID","label-width":e.formLabelWidth,prop:"categoryId"}},[a("el-input",{attrs:{readonly:e.isReadOnly},model:{value:e.materielForm.categoryId,callback:function(t){e.$set(e.materielForm,"categoryId",t)},expression:"materielForm.categoryId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物料名称","label-width":e.formLabelWidth,prop:"mateName"}},[a("el-input",{attrs:{readonly:e.isReadOnly},model:{value:e.materielForm.mateName,callback:function(t){e.$set(e.materielForm,"mateName",t)},expression:"materielForm.mateName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物料全称","label-width":e.formLabelWidth,prop:"mateFullName"}},[a("el-input",{attrs:{readonly:e.isReadOnly},model:{value:e.materielForm.mateFullName,callback:function(t){e.$set(e.materielForm,"mateFullName",t)},expression:"materielForm.mateFullName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"K3物料号","label-width":e.formLabelWidth,prop:"mateK3Code"}},[a("el-input",{attrs:{readonly:e.isReadOnly},model:{value:e.materielForm.mateK3Code,callback:function(t){e.$set(e.materielForm,"mateK3Code",t)},expression:"materielForm.mateK3Code"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"规格","label-width":e.formLabelWidth,prop:"mateModel"}},[a("el-input",{attrs:{readonly:e.isReadOnly},model:{value:e.materielForm.mateModel,callback:function(t){e.$set(e.materielForm,"mateModel",t)},expression:"materielForm.mateModel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"物料类别","label-width":e.formLabelWidth,prop:"categoryName"}},[a("el-input",{attrs:{readonly:e.isReadOnly},model:{value:e.materielForm.categoryName,callback:function(t){e.$set(e.materielForm,"categoryName",t)},expression:"materielForm.categoryName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商名称","label-width":e.formLabelWidth,prop:"suppChineseName"}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{readonly:e.isReadOnly,"fetch-suggestions":e.querySupplier},model:{value:e.materielForm.suppChineseName,callback:function(t){e.$set(e.materielForm,"suppChineseName",t)},expression:"materielForm.suppChineseName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"供应商编号","label-width":e.formLabelWidth,prop:"SuppCode"}},[a("el-input",{attrs:{readonly:e.isReadOnly},model:{value:e.materielForm.SuppCode,callback:function(t){e.$set(e.materielForm,"SuppCode",t)},expression:"materielForm.SuppCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":e.formLabelWidth,prop:"remark"}},[a("el-input",{attrs:{readonly:e.isReadOnly},model:{value:e.materielForm.remark,callback:function(t){e.$set(e.materielForm,"remark",t)},expression:"materielForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.OK}},[e._v("确 定")])],1)],1)],1)])],1)},[],!1,null,null,null);d.options.__file="materielManage.vue";t.default=d.exports},VxlD:function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"b",function(){return l}),a.d(t,"e",function(){return i}),a.d(t,"c",function(){return s}),a.d(t,"g",function(){return n}),a.d(t,"f",function(){return m}),a.d(t,"d",function(){return c});var r=a("t3Un");function o(e){return Object(r.a)({url:"/materielInfo/add",method:"post",data:e})}function l(e){return Object(r.a)({url:"/materielInfo/delete",method:"post",params:{id:e}})}function i(e,t,a,o,l,i){return Object(r.a)({url:"/materielInfo/getlistAll",method:"get",params:{mateK3Code:e,mateName:t,page:o,rows:a,pageK3:i,rowsK3:l}})}function s(e){return Object(r.a)({url:"/materielInfo/edit",method:"post",data:e})}function n(e){return Object(r.a)({url:"/materielInfo/updateMateData",method:"post",data:e})}function m(e){return Object(r.a)({url:"/materielStockK3/getlist",method:"get",params:{mateK3Code:e}})}function c(e,t,a,o,l,i){return Object(r.a)({url:"/materielInfo/getlist",method:"get",params:{keyword:e,mateK3Code:t,mateName:a,isQuality:o,page:i,rows:l}})}},decx:function(e,t,a){}}]);