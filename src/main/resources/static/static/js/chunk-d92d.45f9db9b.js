(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-d92d"],{"+6tz":function(t,e,a){"use strict";var i=a("sTxz");a.n(i).a},Acpg:function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"c",function(){return o}),a.d(e,"b",function(){return s}),a.d(e,"f",function(){return l}),a.d(e,"d",function(){return n}),a.d(e,"g",function(){return u}),a.d(e,"e",function(){return c});var i=a("t3Un");function r(t){return Object(i.a)({url:"/sysPermission/add",method:"post",params:t})}function o(t){return Object(i.a)({url:"/sysPermission/edit",method:"post",params:t})}function s(t){return Object(i.a)({url:"/sysPermission/delete",method:"post",params:{id:t}})}function l(t,e,a){return Object(i.a)({url:"/sysPermission/getlist",method:"get",params:{keyword:t,page:a,rows:e}})}function n(t,e){return Object(i.a)({url:"/sysPermission/getPermByRouter",method:"post",params:{roleId:t,routerId:e}})}function u(t){return Object(i.a)({url:"/sysPermission/setPerm",method:"post",params:t})}function c(t){return Object(i.a)({url:"/sysPermission/getPermByRouterCode",method:"get",params:{routerCode:t}})}},NvBe:function(t,e,a){"use strict";a.r(e);var i=a("6ZY3"),r=a.n(i),o=a("VxlD"),s=a("Q9EI"),l=a("t3Un");var n=a("Acpg"),u={name:"qualityMateList",components:{MessageBox:a("3Y2C").a},data:function(){return{isReadOnly:!0,isdisabled:!0,dialog:{loading:!1,dialogVisible:!1},multipleSelection:[],cateMultipleSelection:[],formLabelWidth:"100px",formQuery:{keyword:"",mateK3Code:"",mateName:"",isQuality:""},currentRow:[],currentId:"",materielTable:[{}],queryParams:{page:1,rows:10,pkParent:-1},pageSizesList:[10,20,30,40,50,100],totalCount:0,loading:!1,permit:{SEARCH:!1,EDIT:!1,UPLOAD:!1},showCateVisible:!1,showCateList:[],dialogCate:{keyword:"",bsStatus:"",page:1,rows:10},cateTotal:0,catePSList:[5,10,20,30],addCateVisible:!1,addCateForm:{bsName:"",bsCode:"",bsStatus:0,cateCheck:{bsName:[{required:!0,message:"物料类别名称不能为空",trigger:["blur","change"]}],bsCode:[{required:!0,message:"物料类别筛选编码不能为空",trigger:["blur","change"]}],bsStatus:[{required:!0,message:"是否显示不能为空",trigger:["blur","change"]}]}},editCateVisible:!1,editCateForm:{id:"",bsName:"",bsCode:"",bsStatus:"",cateCheck:{bsName:[{required:!0,message:"物料类别名称不能为空",trigger:["blur","change"]}],bsCode:[{required:!0,message:"物料类别筛选编码不能为空",trigger:["blur","change"]}],bsStatus:[{required:!0,message:"是否显示不能为空",trigger:["blur","change"]}]}},statusFilter:function(t){return{0:"info",1:"success"}[t]},formatStatus:function(t){return{0:"否",1:"是"}[t]},optionsQuality:[{value:"",label:"请选择"},{value:"0",label:"否"},{value:"1",label:"是"}]}},created:function(){this.getData(),this.getPermit()},mounted:function(){},methods:{handleSubmit:function(t){this.getData()},getPermit:function(){var t=this,e=this.$route.name;Object(n.e)(e).then(function(e){if(e.result)if("admin"==e.data)t.permit.SEARCH=!0,t.permit.EDIT=!0,t.permit.UPLOAD=!0;else for(var a=e.data,i=0;i<a.length;i++)"SEARCH"==a[i].permCode&&(t.permit.SEARCH=!0),"EDIT"==a[i].permCode&&(t.permit.EDIT=!0),"UPLOAD"==a[i].permCode&&(t.permit.UPLOAD=!0);else t.$message.error(res.msg)})},getData:function(){var t=this;this.loading=!0,Object(o.d)(this.formQuery.keyword,this.formQuery.mateK3Code,this.formQuery.mateName,this.formQuery.isQuality,this.queryParams.rows,this.queryParams.page).then(function(e){e.result?(t.materielTable=e.data.rows,t.totalCount=e.data.total,t.loading=!1):t.$Message.error(e.msg)})},viewFile:function(t){this.$router.push({path:"qualityFileList",query:{mateId:t.id}})},handleSelectionChange:function(t){this.multipleSelection=t},cancel:function(){this.dialog.modal_dialog=!1},changePage:function(t){this.queryParams.page=t,this.getData()},SizeChange:function(t){this.queryParams.rows=t,this.getData()},addDoc:function(t){var e=this,a=t.target.files[0];if(null!=a&&void 0!=a){var i=new FormData;i.append("file",a),i.append("mateId",this.currentId),Object(s.a)(i).then(function(t){t.result?(e.$message.info(t.msg),e.currentId="",e.getData()):(e.$message.error(t.msg),e.currentId="")})}},addDocBefore:function(t){this.currentId=t,this.$refs["doc-upload-input"].click()},resetFrom:function(){this.formQuery.keyword="",this.formQuery.mateK3Code="",this.formQuery.mateName="",this.formQuery.isQuality=""},showCateView:function(){this.dialogCate.keyword="",this.dialogCate.bsStatus="",this.showCateVisible=!0,this.searchCate()},searchCate:function(){var t=this;(function(t){return Object(l.a)({url:"/categorySetting/getlist",method:"get",params:t})})(r()({},this.dialogCate)).then(function(e){e.result?(t.showCateList=e.data.rows,t.cateTotal=e.data.total):t.$message.error(e.msg)})},cateChangePage:function(t){this.dialogCate.page=t,this.searchCate()},cateSizeChange:function(t){this.dialogCate.rows=t,this.searchCate()},addCateView:function(){this.addCateForm.bsName="",this.addCateForm.bsCode="",this.addCateForm.bsStatus=0,this.addCateVisible=!0},addCategory:function(){var t=this;this.$refs["addCateForm.cateCheck"].validate(function(e){e?function(t,e,a){return Object(l.a)({url:"/categorySetting/add",method:"post",params:{bsName:t,bsCode:e,bsStatus:a}})}(t.addCateForm.bsName,t.addCateForm.bsCode,t.addCateForm.bsStatus).then(function(e){e.result?(t.addCateVisible=!1,t.$message.info(e.msg),t.searchCate()):t.$message.error(e.msg)}):t.$message.error("信息填写不完整")})},editCateView:function(t){this.editCateForm.id=t.id,this.editCateForm.bsName=t.bsName,this.editCateForm.bsCode=t.bsCode,this.editCateForm.bsStatus=t.bsStatus,this.editCateVisible=!0},editCategory:function(){var t=this;this.$refs["editCateForm.cateCheck"].validate(function(e){e?function(t,e,a,i){return Object(l.a)({url:"/categorySetting/edit",method:"post",params:{id:t,bsName:e,bsCode:a,bsStatus:i}})}(t.editCateForm.id,t.editCateForm.bsName,t.editCateForm.bsCode,t.editCateForm.bsStatus).then(function(e){e.result?(t.editCateVisible=!1,t.$message.info(e.msg),t.searchCate()):t.$message.error(e.msg)}):t.$message.error("信息填写不完整")})},delCateView:function(t){var e=this;(function(t){return Object(l.a)({url:"/categorySetting/delete",method:"post",params:{id:t}})})(t.id).then(function(t){t.result?(e.$message.info(t.msg),e.searchCate()):e.$message.error(t.msg)})},cateSelectionChange:function(t){this.cateMultipleSelection=t},doUpdateStatus:function(t){var e=this,a=[];this.cateMultipleSelection.map(function(t){a.push(t.id)}),function(t,e){return Object(l.a)({url:"/categorySetting/updateStatus",method:"post",params:{idsArray:t,bsStatus:e}})}(a.join(","),t).then(function(t){t.result?(e.$message({message:t.msg,type:"success"}),e.searchCate()):e.$message.error(t.msg)})},getExcel:function(){var t="?keyword="+(this.formQuery.keyword?this.formQuery.keyword:"")+"&&mateK3Code="+(this.formQuery.mateK3Code?this.formQuery.mateK3Code:"")+"&&mateName="+(this.formQuery.mateName?this.formQuery.mateName:"")+"&&isQuality="+this.formQuery.isQuality;window.location.href="http://113.106.72.75:9345/logistics//qualityFile/getQualityExcel"+t}}},c=(a("+6tz"),a("ZrdR")),d=Object(c.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"element-loading-text":"数据加载中，请稍等"}},[a("el-card",{staticStyle:{border:"none",height:"auto"}},[a("el-row",[a("el-col",{staticStyle:{width:"100%"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formQuery}},[a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{attrs:{placeholder:"关键字"},model:{value:t.formQuery.keyword,callback:function(e){t.$set(t.formQuery,"keyword",e)},expression:"formQuery.keyword"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"物料号"}},[a("el-input",{attrs:{placeholder:"K3物料号"},model:{value:t.formQuery.mateK3Code,callback:function(e){t.$set(t.formQuery,"mateK3Code",e)},expression:"formQuery.mateK3Code"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"名称"}},[a("el-input",{attrs:{placeholder:"物料名称"},model:{value:t.formQuery.mateName,callback:function(e){t.$set(t.formQuery,"mateName",e)},expression:"formQuery.mateName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否上传"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.formQuery.isQuality,callback:function(e){t.$set(t.formQuery,"isQuality",e)},expression:"formQuery.isQuality"}},t._l(t.optionsQuality,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",[a("el-button",{attrs:{type:"info"},on:{click:t.resetFrom}},[t._v("重置")]),t._v(" "),t.permit.SEARCH?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.handleSubmit("formQuery")}}},[t._v("查找")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(e){t.showCateView()}}},[t._v("物料类别设置")]),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:t.getExcel}},[t._v("导出Excel")])],1)],1)],1),t._v(" "),a("input",{ref:"doc-upload-input",staticClass:"doc-upload-input",attrs:{type:"file"},on:{change:t.addDoc}}),t._v(" "),[a("el-table",{ref:"materielTable",staticStyle:{width:"100%"},attrs:{data:t.materielTable,"tooltip-effect":"dark","highlight-current-row":"",border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"45",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"mateK3Code",label:"K3物料号",width:"150",fixed:"","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"isQuality",label:"是否上传",width:"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.statusFilter(e.row.isQuality)}},[t._v(t._s(t.formatStatus(e.row.isQuality)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"categoryName",label:"物料类别",width:"120","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"mateName",label:"物料名称",width:"120","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"mateModel",label:"物料规格","min-width":"200","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"mateCusName",label:"品牌",width:"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"mateCusCode",label:"品牌料号",width:"180","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"100",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{icon:"el-icon-search",size:"mini",title:"详情",circle:""},on:{click:function(a){t.viewFile(e.row)}}}),t._v(" "),t.permit.UPLOAD?a("el-button",{attrs:{type:"primary",icon:"el-icon-upload2",size:"mini",title:"上传",circle:""},on:{click:function(a){t.addDocBefore(e.row.id)}}}):t._e()]}}])})],1)],t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{staticClass:"pull-right clearfix",attrs:{current:1,"current-page":t.queryParams.page,"page-sizes":t.pageSizesList,"page-size":t.queryParams.rows,layout:"total, sizes, prev, pager, next, jumper","page-size-opts":t.pageSizesList,total:t.totalCount},on:{"current-change":t.changePage,"size-change":t.SizeChange,"update:currentPage":function(e){t.$set(t.queryParams,"page",e)}}})],1),t._v(" "),a("el-dialog",{attrs:{title:"物料类别筛选设置",visible:t.showCateVisible,width:"1000px"},on:{"update:visible":function(e){t.showCateVisible=e}}},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"搜索关键字"}},[a("el-input",{attrs:{placeholder:"关键字"},model:{value:t.dialogCate.keyword,callback:function(e){t.$set(t.dialogCate,"keyword",e)},expression:"dialogCate.keyword"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.searchCate}},[t._v("查找")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addCateView}},[t._v("新增")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.doUpdateStatus(1)}}},[t._v("显示")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.doUpdateStatus(0)}}},[t._v("不显示")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.showCateList,"tooltip-effect":"dark"},on:{"selection-change":t.cateSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"45",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"bsName",label:"物料类别名称","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"bsCode",label:"物料类别筛选编码","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"bsStatus",label:"是否显示","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.statusFilter(e.row.bsStatus)}},[t._v(t._s(t.formatStatus(e.row.bsStatus)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",title:"编辑",circle:""},on:{click:function(a){t.editCateView(e.row)}}}),t._v(" "),a("MessageBox",{attrs:{title:"提示",contents:"此操作将永久删除该行, 是否继续?",confirmTitle:"确认删除"},on:{callConfirm:function(a){t.delCateView(e.row)}}})]}}])})],1),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{staticClass:"pull-right clearfix",attrs:{current:1,"current-page":t.dialogCate.page,"page-sizes":t.catePSList,"page-size":t.dialogCate.rows,layout:"total, sizes, prev, pager, next, jumper","page-size-opts":t.catePSList,total:t.cateTotal},on:{"current-change":t.cateChangePage,"size-change":t.cateSizeChange,"update:currentPage":function(e){t.$set(t.dialogCate,"page",e)}}})],1),t._v(" "),a("div",{staticClass:"mateFooter"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showCateVisible=!1}}},[t._v("关闭")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"物料类别筛选设置",visible:t.addCateVisible,width:"500px"},on:{"update:visible":function(e){t.addCateVisible=e}}},[a("el-form",{ref:"addCateForm.cateCheck",attrs:{model:t.addCateForm,inline:!0,rules:t.addCateForm.cateCheck,"label-width":"150px","label-position":"right"}},[a("el-form-item",{attrs:{label:"物料类别名称",prop:"bsName","label-position":"right"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"例如：原材料"},model:{value:t.addCateForm.bsName,callback:function(e){t.$set(t.addCateForm,"bsName",e)},expression:"addCateForm.bsName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"物料类别筛选编码",prop:"bsCode","label-position":"right"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"例如：01.%.%"},model:{value:t.addCateForm.bsCode,callback:function(e){t.$set(t.addCateForm,"bsCode",e)},expression:"addCateForm.bsCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否显示",prop:"bsStatus","label-position":"right"}},[a("el-switch",{staticClass:"switch-btn",attrs:{"active-value":1,"inactive-value":0,"active-text":"是","inactive-text":"否","active-color":"#13ce66","inactive-color":"#ccc"},model:{value:t.addCateForm.bsStatus,callback:function(e){t.$set(t.addCateForm,"bsStatus",e)},expression:"addCateForm.bsStatus"}})],1)],1),t._v(" "),a("div",{staticClass:"addCateFooter",attrs:{align:"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addCateVisible=!1}}},[t._v("关闭")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addCategory}},[t._v("确定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"物料类别筛选设置",visible:t.editCateVisible,width:"500px"},on:{"update:visible":function(e){t.editCateVisible=e}}},[a("el-form",{ref:"editCateForm.cateCheck",attrs:{model:t.editCateForm,inline:!0,rules:t.editCateForm.cateCheck,"label-width":"150px","label-position":"right"}},[a("el-form-item",{attrs:{label:"物料类别名称",prop:"bsName","label-position":"right"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"例如：原材料"},model:{value:t.editCateForm.bsName,callback:function(e){t.$set(t.editCateForm,"bsName",e)},expression:"editCateForm.bsName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"物料类别筛选编码",prop:"bsCode","label-position":"right"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"例如：01.%.%"},model:{value:t.editCateForm.bsCode,callback:function(e){t.$set(t.editCateForm,"bsCode",e)},expression:"editCateForm.bsCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否显示",prop:"bsStatus","label-position":"right"}},[a("el-switch",{staticClass:"switch-btn",attrs:{"active-value":1,"inactive-value":0,"active-text":"是","inactive-text":"否","active-color":"#13ce66","inactive-color":"#ccc"},model:{value:t.editCateForm.bsStatus,callback:function(e){t.$set(t.editCateForm,"bsStatus",e)},expression:"editCateForm.bsStatus"}})],1)],1),t._v(" "),a("div",{staticClass:"addCateFooter",attrs:{align:"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editCateVisible=!1}}},[t._v("关闭")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.editCategory}},[t._v("确定")])],1)],1)],2)])],1)},[],!1,null,null,null);d.options.__file="qualityMateList.vue";e.default=d.exports},Q9EI:function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"e",function(){return o}),a.d(e,"b",function(){return s}),a.d(e,"f",function(){return l}),a.d(e,"c",function(){return n}),a.d(e,"d",function(){return u});var i=a("t3Un");function r(t){return Object(i.a)({headers:{"Content-Type":"multipart/form-data"},url:"/qualityFile/add",method:"post",data:t})}function o(t){return Object(i.a)({headers:{"Content-Type":"multipart/form-data"},url:"/qualityFile/edit",method:"post",data:t})}function s(t){return Object(i.a)({url:"/qualityFile/delete",method:"post",params:{id:t}})}function l(t,e,a,r,o){return Object(i.a)({url:"/qualityFile/getlist",method:"get",params:{keyword:t,bsStatus:e,mateId:a,page:o,rows:r}})}function n(t){return Object(i.a)({url:"/qualityFile/doApproval",method:"post",params:t})}function u(t){return Object(i.a)({url:"/qualityFile/doBack",method:"post",params:t})}},VxlD:function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"b",function(){return o}),a.d(e,"e",function(){return s}),a.d(e,"c",function(){return l}),a.d(e,"g",function(){return n}),a.d(e,"f",function(){return u}),a.d(e,"d",function(){return c});var i=a("t3Un");function r(t){return Object(i.a)({url:"/materielInfo/add",method:"post",data:t})}function o(t){return Object(i.a)({url:"/materielInfo/delete",method:"post",params:{id:t}})}function s(t,e,a,r,o,s){return Object(i.a)({url:"/materielInfo/getlistAll",method:"get",params:{mateK3Code:t,mateName:e,page:r,rows:a,pageK3:s,rowsK3:o}})}function l(t){return Object(i.a)({url:"/materielInfo/edit",method:"post",data:t})}function n(t){return Object(i.a)({url:"/materielInfo/updateMateData",method:"post",data:t})}function u(t){return Object(i.a)({url:"/materielStockK3/getlist",method:"get",params:{mateK3Code:t}})}function c(t,e,a,r,o,s){return Object(i.a)({url:"/materielInfo/getlist",method:"get",params:{keyword:t,mateK3Code:e,mateName:a,isQuality:r,page:s,rows:o}})}},sTxz:function(t,e,a){}}]);