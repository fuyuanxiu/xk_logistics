(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-796e"],{"5cVY":function(e,t,s){"use strict";s.d(t,"a",function(){return a}),s.d(t,"b",function(){return n}),s.d(t,"c",function(){return o});var r=s("t3Un");function a(){return Object(r.a)({url:"/smtPoints/getTreeList",method:"get"})}function n(e){return Object(r.a)({url:"/smtPoints/getlist",method:"get",params:e})}function o(e){return Object(r.a)({url:"/smtPoints/updatePoints",method:"post",params:e})}},Acpg:function(e,t,s){"use strict";s.d(t,"a",function(){return a}),s.d(t,"c",function(){return n}),s.d(t,"b",function(){return o}),s.d(t,"f",function(){return i}),s.d(t,"d",function(){return l}),s.d(t,"g",function(){return u}),s.d(t,"e",function(){return c});var r=s("t3Un");function a(e){return Object(r.a)({url:"/sysPermission/add",method:"post",params:e})}function n(e){return Object(r.a)({url:"/sysPermission/edit",method:"post",params:e})}function o(e){return Object(r.a)({url:"/sysPermission/delete",method:"post",params:{id:e}})}function i(e,t,s){return Object(r.a)({url:"/sysPermission/getlist",method:"get",params:{keyword:e,page:s,rows:t}})}function l(e,t){return Object(r.a)({url:"/sysPermission/getPermByRouter",method:"post",params:{roleId:e,routerId:t}})}function u(e){return Object(r.a)({url:"/sysPermission/setPerm",method:"post",params:e})}function c(e){return Object(r.a)({url:"/sysPermission/getPermByRouterCode",method:"get",params:{routerCode:e}})}},"EL+v":function(e,t,s){},PFLP:function(e,t,s){"use strict";s.r(t);var r=s("6ZY3"),a=s.n(r),n=s("5cVY"),o=s("Acpg"),i={name:"setSmtPoint",components:{},data:function(){return{queryParams:{keyword:"",setStatus:0,categoryNumber:"",sLevel:"",page:1,rows:15},pageSizesList:[15,20,30,40,50,100],totalCount:0,loading:!1,open:!0,current:0,options:{label:"title",children:"children",isLeaf:!0},list:[],expandedKeys:[],keywordTable:[],searchData:[],data:[],items:[{sort:"全部"},{sort:"未设置"},{sort:"已设置"}],permit:{SEARCH:!1,EDIT:!1}}},mounted:function(){},created:function(){this.getTree(),this.getPermit()},methods:{changeStatus:function(e){this.queryParams.setStatus=e,this.getData()},addClass:function(e){this.current=e},resetFrom:function(){this.queryParams.keyword="",this.queryParams.categoryNumber="",this.queryParams.sLevel=""},getPermit:function(){var e=this,t=this.$route.name;Object(o.e)(t).then(function(t){if(t.result)if("admin"==t.data)e.permit.SEARCH=!0,e.permit.EDIT=!0;else for(var s=t.data,r=0;r<s.length;r++)"SEARCH"==s[r].permCode&&(e.permit.SEARCH=!0),"EDIT"==s[r].permCode&&(e.permit.EDIT=!0);else e.$message.error(res.msg)})},getTree:function(){var e=this;Object(n.a)().then(function(t){if(t.result){var s={title:"目录",id:-1,children:[]};s.children=t.data.rows,e.list=[s],e.expandedKeys.push(-1)}})},handleNodeClick:function(e,t){var s=this;this.queryParams.categoryNumber=e.sCode,this.queryParams.sLevel=e.sLevel;var r=a()({},{keyword:this.queryParams.keyword,setStatus:this.queryParams.setStatus,categoryNumber:e.sCode,sLevel:e.sLevel,rows:this.queryParams.rows,page:this.queryParams.page});1!=e.sLevel&&2!=e.sLevel||Object(n.b)(r).then(function(e){e.result&&(s.keywordTable=e.data.rows,s.totalCount=e.data.total)})},updateHandler:function(e){var t=this,s=a()({},{id:e.id,sCode:e.sCode,sName:e.sName,sPoints:e.sPoints,isSpecial:e.isSpecial,sLevel:e.sLevel,sFeetQty:e.sFeetQty});Object(n.c)(s).then(function(e){e.result?t.$message({type:"success",message:e.msg}):t.$message.error(res.msg)})},search:function(){this.queryParams.keyword?his.getData():this.$message.error("请输入要查找的内容！")},getData:function(){var e=this,t=a()({},{keyword:this.queryParams.keyword,setStatus:this.queryParams.setStatus,categoryNumber:this.queryParams.categoryNumber,sLevel:this.queryParams.sLevel,rows:this.queryParams.rows,page:this.queryParams.page});Object(n.b)(t).then(function(t){t.result&&(e.keywordTable=t.data.rows,e.totalCount=t.data.total)})},changePage:function(e){this.queryParams.page=e,this.getData()},SizeChange:function(e){this.queryParams.rows=e,this.getData()}}},l=(s("Tits"),s("ZrdR")),u=Object(l.a)(i,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"retrieval"},[s("div",{staticClass:"title"},[s("h3",[e._v("设置状态")]),e._v(" "),s("div",{staticClass:"filter"},[s("ul",e._l(e.items,function(t,r){return s("li",{key:r,class:{current:r==e.current},on:{click:function(t){e.addClass(r)}}},[s("a",{on:{click:function(t){e.changeStatus(r)}}},[s("span",[e._v(e._s(t.sort))])])])}))]),e._v(" "),s("span",{staticClass:"more",on:{click:function(t){e.open=!e.open}}})]),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}],staticClass:"searchDiv"},[s("el-form",{ref:"form",staticClass:"formStly",attrs:{model:e.queryParams,"label-width":"70px",size:"small",inline:!0}},[s("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[s("el-col",{staticStyle:{"margin-left":"280px"},attrs:{span:18}},[s("el-form-item",{attrs:{label:"关键字:",prop:"eqTitle"}},[s("el-input",{staticClass:"search-input",on:{click:e.search},model:{value:e.queryParams.keyword,callback:function(t){e.$set(e.queryParams,"keyword",t)},expression:"queryParams.keyword"}})],1),e._v(" "),s("el-form-item",[e.permit.SEARCH?s("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.search}},[e._v("查找")]):e._e(),e._v(" "),s("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(t){e.resetFrom()}}},[e._v("重置")])],1)],1)],1)],1)],1)]),e._v(" "),s("el-container",{staticStyle:{height:"500px"}},[s("el-aside",{staticClass:"tree"},[s("h3",[e._v("分类列表 ")]),e._v(" "),s("el-tree",{ref:"tree",attrs:{"node-key":"id",data:e.list,props:e.options,"highlight-current":"",accordion:"","default-expanded-keys":e.expandedKeys},on:{"node-click":e.handleNodeClick}})],1),e._v(" "),s("el-main",{staticStyle:{padding:"0"}},[s("el-table",{ref:"main_table",attrs:{data:e.keywordTable,border:""}},[s("el-table-column",{attrs:{prop:"sName",label:"物料名称","show-overflow-tooltip":"",width:"80"}}),e._v(" "),s("el-table-column",{attrs:{prop:"sModel",label:"规格型号","show-overflow-tooltip":""}}),e._v(" "),s("el-table-column",{attrs:{prop:"sCode",label:"物料编码","show-overflow-tooltip":"",width:"100"}}),e._v(" "),s("el-table-column",{attrs:{prop:"sPackage",label:"封装","show-overflow-tooltip":"",width:"70"}}),e._v(" "),s("el-table-column",{attrs:{prop:"sFeetQty",label:"焊脚数量",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{type:"number"},on:{change:function(s){e.updateHandler(t.row)}},model:{value:t.row.sFeetQty,callback:function(s){e.$set(t.row,"sFeetQty",s)},expression:"scope.row.sFeetQty"}})]}}])}),e._v(" "),s("el-table-column",{attrs:{prop:"sPoints",label:"SMT点数",align:"center",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-input",{attrs:{type:"number",step:"0.5"},on:{change:function(s){e.updateHandler(t.row)}},model:{value:t.row.sPoints,callback:function(s){e.$set(t.row,"sPoints",s)},expression:"scope.row.sPoints"}})]}}])})],1)],1)],1),e._v(" "),s("div",{staticClass:"block"},[s("el-pagination",{staticClass:"pull-right clearfix",attrs:{current:1,"current-page":e.queryParams.page,"page-sizes":e.pageSizesList,"page-size":e.queryParams.rows,layout:"total, sizes, prev, pager, next, jumper","page-size-opts":e.pageSizesList,total:e.totalCount},on:{"current-change":e.changePage,"size-change":e.SizeChange,"update:currentPage":function(t){e.$set(e.queryParams,"page",t)}}})],1)],1)},[],!1,null,null,null);u.options.__file="setSmtPoint.vue";t.default=u.exports},Tits:function(e,t,s){"use strict";var r=s("EL+v");s.n(r).a}}]);