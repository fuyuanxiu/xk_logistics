(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6050"],{"0jK8":function(e,t,r){"use strict";r.r(t);var i=r("6ZY3"),s=r.n(i),a=r("t3Un");var o=r("Acpg"),l={name:"fee",components:{messagebox:r("3Y2C").a},data:function(){return{loading:!1,formQuery:{keyword:""},currentRow:[],dataTable:[{}],addForm:{bsName:"",bsMeasureType:"",bsMeasureUnit:"",bsRemark:""},editForm:{id:0,bsCode:"",bsName:"",bsMeasureType:"",bsMeasureUnit:"",remark:""},dialog:{addVisible:!1,keyruleForm:{bsName:[{required:!0,message:"请填写计费名称",trigger:"blur"}],bsMeasureType:[{required:!0,message:"请填写计量方式",trigger:"blur"}],bsMeasureUnit:[{required:!0,message:"请填写计量单位",trigger:"blur"}]}},dialogEdit:{editVisible:!1,keyruleForm:{bsCode:[{required:!0,message:"请填写计费编号",trigger:"blur"}],bsName:[{required:!0,message:"请填写计费名称",trigger:"blur"}],bsMeasureType:[{required:!0,message:"请填写计量方式",trigger:"blur"}],bsMeasureUnit:[{required:!0,message:"请填写计量单位",trigger:"blur"}]}},queryParams:{page:1,rows:10},pageSizesList:[10,20,30,40,50,100],totalCount:1,permit:{SEARCH:!1,EDIT:!1}}},created:function(){this.getData(),this.getPermit()},methods:{handleSubmit:function(){this.getData()},getPermit:function(){var e=this,t=this.$route.name;Object(o.e)(t).then(function(t){if(t.result)if("admin"==t.data)e.permit.SEARCH=!0,e.permit.ADD=!0,e.permit.EDIT=!0,e.permit.DELETE=!0;else for(var r=t.data,i=0;i<r.length;i++)"SEARCH"==r[i].permCode&&(e.permit.SEARCH=!0),"ADD"==r[i].permCode&&(e.permit.ADD=!0),"EDIT"==r[i].permCode&&(e.permit.EDIT=!0),"DELETE"==r[i].permCode&&(e.permit.DELETE=!0);else e.$message.error(res.msg)})},getData:function(){var e=this;this.loading=!0,function(e){return Object(a.a)({url:"/fee/getlist",method:"get",params:e})}(s()({},this.formQuery,this.queryParams)).then(function(t){t.result?(e.loading=!1,e.dataTable=t.data.rows,e.totalCount=t.data.total):(e.loading=!1,e.$message.error(t.msg))})},showAddDialog:function(){this.addForm.bsName="",this.addForm.bsMeasureType="",this.addForm.bsMeasureUnit="",this.addForm.bsRemark="",this.dialog.addVisible=!0},showEditDialog:function(e){this.editForm.id=e.id,this.editForm.bsCode=e.bsCode,this.editForm.bsName=e.bsName,this.editForm.bsMeasureType=e.bsMeasureType,this.editForm.bsMeasureUnit=e.bsMeasureUnit,this.editForm.bsRemark=e.bsRemark,this.dialogEdit.editVisible=!0},addBtn:function(){var e=this,t=s()({},this.addForm);this.$refs["dialog.keyruleForm"].validate(function(r){r&&function(e){return Object(a.a)({url:"/fee/add",method:"post",params:e})}(t).then(function(t){t.result?(e.$message.success(t.msg),e.dialog.addVisible=!1,e.getData()):e.$message.error(t.msg)})})},editBtn:function(){var e=this,t=s()({},this.editForm);this.$refs["dialogEdit.keyruleForm"].validate(function(r){r&&function(e){return Object(a.a)({url:"/fee/edit",method:"post",params:e})}(t).then(function(t){t.result?(e.$message.success(t.msg),e.dialogEdit.editVisible=!1,e.getData()):e.$message.error(t.msg)})})},delData:function(e){var t=this;(function(e){return Object(a.a)({url:"/fee/delete",method:"post",params:{id:e}})})(e.id).then(function(e){e.result?(t.$message({message:e.msg,type:"success"}),t.getData()):t.$message.error(e.msg)})},changePage:function(e){this.queryParams.page=e,this.getData()},sizeChange:function(e){this.queryParams.rows=e,this.getData()}}},n=(r("3q+J"),r("ZrdR")),d=Object(n.a)(l,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-card",{staticStyle:{"padding-bottom":"0",border:"none"}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formQuery}},[r("el-form-item",{attrs:{label:"关键字"}},[r("el-input",{attrs:{placeholder:"搜索关键字"},model:{value:e.formQuery.keyword,callback:function(t){e.$set(e.formQuery,"keyword",t)},expression:"formQuery.keyword"}})],1),e._v(" "),r("el-form-item",[e.permit.SEARCH?r("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("查找")]):e._e(),e._v(" "),e.permit.ADD?r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.showAddDialog()}}},[e._v("新增")]):e._e()],1)],1)],1)],1)],1),e._v(" "),[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"main_table",staticStyle:{width:"100%"},attrs:{border:"",data:e.dataTable,"tooltip-effect":"dark","highlight-current-row":"","element-loading-text":"数据加载中，请稍等"}},[r("el-table-column",{attrs:{prop:"bsCode",label:"编号","show-overflow-tooltip":""}}),e._v(" "),r("el-table-column",{attrs:{prop:"bsName",label:"名称","show-overflow-tooltip":""}}),e._v(" "),r("el-table-column",{attrs:{prop:"bsMeasureType",label:"计量方式",width:"150","show-overflow-tooltip":""}}),e._v(" "),r("el-table-column",{attrs:{prop:"bsMeasureUnit",label:"计量单位","show-overflow-tooltip":""}}),e._v(" "),r("el-table-column",{attrs:{prop:"bsRemark",label:"备注","show-overflow-tooltip":""}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.permit.EDIT?r("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit",circle:""},on:{click:function(r){e.showEditDialog(t.row)}}}):e._e(),e._v(" "),e.permit.DELETE?r("messagebox",{attrs:{title:"提示",contents:"此操作将永久删除该行, 是否继续?",confirmTitle:"确认删除"},on:{callConfirm:function(r){e.delData(t.row)}}}):e._e()]}}])})],1)],e._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{staticClass:"pull-right clearfix",attrs:{current:1,"current-page":e.queryParams.page,"page-sizes":e.pageSizesList,"page-size":e.queryParams.rows,layout:"total, sizes, prev, pager, next, jumper","page-size-opts":e.pageSizesList,total:e.totalCount},on:{"current-change":e.changePage,"size-change":e.sizeChange,"update:currentPage":function(t){e.$set(e.queryParams,"page",t)}}})],1),e._v(" "),r("el-dialog",{attrs:{title:"新增",visible:e.dialog.addVisible,width:"500px"},on:{"update:visible":function(t){e.$set(e.dialog,"addVisible",t)}}},[r("el-form",{ref:"dialog.keyruleForm",attrs:{inline:!0,model:e.addForm,rules:e.dialog.keyruleForm,"label-position":"right","label-width":"110px"}},[r("el-form-item",{attrs:{label:"费用名称",prop:"bsName"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.addForm.bsName,callback:function(t){e.$set(e.addForm,"bsName",t)},expression:"addForm.bsName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"计量方式",prop:"bsMeasureType"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.addForm.bsMeasureType,callback:function(t){e.$set(e.addForm,"bsMeasureType",t)},expression:"addForm.bsMeasureType"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"计量单位",prop:"bsMeasureUnit"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.addForm.bsMeasureUnit,callback:function(t){e.$set(e.addForm,"bsMeasureUnit",t)},expression:"addForm.bsMeasureUnit"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"bsRemark"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.addForm.bsRemark,callback:function(t){e.$set(e.addForm,"bsRemark",t)},expression:"addForm.bsRemark"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"el-icon-close",on:{click:function(t){e.dialog.addVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{staticClass:"el-icon-check",attrs:{type:"primary"},on:{click:function(t){e.addBtn()}}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"编辑",visible:e.dialogEdit.editVisible,width:"500px"},on:{"update:visible":function(t){e.$set(e.dialogEdit,"editVisible",t)}}},[r("el-form",{ref:"dialogEdit.keyruleForm",attrs:{inline:!0,model:e.editForm,rules:e.dialogEdit.keyruleForm,"label-position":"right","label-width":"110px"}},[r("el-form-item",{staticStyle:{display:"none"},attrs:{label:"id",prop:"id"}},[r("el-input",{model:{value:e.editForm.id,callback:function(t){e.$set(e.editForm,"id",t)},expression:"editForm.id"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"费用编号",prop:"bsCode"}},[r("el-input",{staticStyle:{width:"300px"},attrs:{disabled:!0},model:{value:e.editForm.bsCode,callback:function(t){e.$set(e.editForm,"bsCode",t)},expression:"editForm.bsCode"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"费用名称",prop:"bsName"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.editForm.bsName,callback:function(t){e.$set(e.editForm,"bsName",t)},expression:"editForm.bsName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"计量方式",prop:"bsMeasureType"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.editForm.bsMeasureType,callback:function(t){e.$set(e.editForm,"bsMeasureType",t)},expression:"editForm.bsMeasureType"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"计量单位",prop:"bsMeasureUnit"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.editForm.bsMeasureUnit,callback:function(t){e.$set(e.editForm,"bsMeasureUnit",t)},expression:"editForm.bsMeasureUnit"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"bsRemark"}},[r("el-input",{staticStyle:{width:"300px"},model:{value:e.editForm.bsRemark,callback:function(t){e.$set(e.editForm,"bsRemark",t)},expression:"editForm.bsRemark"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticClass:"el-icon-close",on:{click:function(t){e.dialogEdit.editVisible=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{staticClass:"el-icon-check",attrs:{type:"primary"},on:{click:function(t){e.editBtn()}}},[e._v("确 定")])],1)],1)],2)},[],!1,null,null,null);d.options.__file="fee.vue";t.default=d.exports},"3q+J":function(e,t,r){"use strict";var i=r("s3I1");r.n(i).a},Acpg:function(e,t,r){"use strict";r.d(t,"a",function(){return s}),r.d(t,"c",function(){return a}),r.d(t,"b",function(){return o}),r.d(t,"f",function(){return l}),r.d(t,"d",function(){return n}),r.d(t,"g",function(){return d}),r.d(t,"e",function(){return m});var i=r("t3Un");function s(e){return Object(i.a)({url:"/sysPermission/add",method:"post",params:e})}function a(e){return Object(i.a)({url:"/sysPermission/edit",method:"post",params:e})}function o(e){return Object(i.a)({url:"/sysPermission/delete",method:"post",params:{id:e}})}function l(e,t,r){return Object(i.a)({url:"/sysPermission/getlist",method:"get",params:{keyword:e,page:r,rows:t}})}function n(e,t){return Object(i.a)({url:"/sysPermission/getPermByRouter",method:"post",params:{roleId:e,routerId:t}})}function d(e){return Object(i.a)({url:"/sysPermission/setPerm",method:"post",params:e})}function m(e){return Object(i.a)({url:"/sysPermission/getPermByRouterCode",method:"get",params:{routerCode:e}})}},s3I1:function(e,t,r){}}]);