(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6339"],{Acpg:function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a.d(e,"c",function(){return r}),a.d(e,"b",function(){return o}),a.d(e,"f",function(){return l}),a.d(e,"d",function(){return n}),a.d(e,"g",function(){return c}),a.d(e,"e",function(){return d});var s=a("t3Un");function i(t){return Object(s.a)({url:"/sysPermission/add",method:"post",params:t})}function r(t){return Object(s.a)({url:"/sysPermission/edit",method:"post",params:t})}function o(t){return Object(s.a)({url:"/sysPermission/delete",method:"post",params:{id:t}})}function l(t,e,a){return Object(s.a)({url:"/sysPermission/getlist",method:"get",params:{keyword:t,page:a,rows:e}})}function n(t,e){return Object(s.a)({url:"/sysPermission/getPermByRouter",method:"post",params:{roleId:t,routerId:e}})}function c(t){return Object(s.a)({url:"/sysPermission/setPerm",method:"post",params:t})}function d(t){return Object(s.a)({url:"/sysPermission/getPermByRouterCode",method:"get",params:{routerCode:t}})}},EVdy:function(t,e,a){},T0bD:function(t,e,a){"use strict";a.r(e);var s=a("Q2cO"),i=a.n(s),r=a("6ZY3"),o=a.n(r),l=a("ZE8z"),n=a("Acpg"),c={name:"process",components:{messagebox:a("3Y2C").a},data:function(){return{labelPosition:"right",selection:[],cTable:[{}],categoryVisible:!1,categoryVisibleDel:!1,queryParams:{keyword:"",isBan:"",page:1,rows:15},item:[],pageSizesList:[10,15,20,30,40,50,100],totalCount:0,loading:!1,open:!0,current:0,iTable:[],categoryForm:{},categoryFormDel:{},dataForm:{bsCateId:"",bsCateName:"",bsCode:"",bsName:"",bsRemark:""},dialog:{dataVisible:!1,keyruleForm:{bsCateId:[{required:!0,message:"必填项",trigger:"blur"}],bsCateName:[{required:!0,message:"必填项",trigger:"blur"}],bsName:[{required:!0,message:"请填写工序名称",trigger:"blur"}]}},dataFormEdit:{bsCateId:"",bsCateName:"",bsCode:"",bsName:"",bsRemark:""},dialogEdit:{dataVisible:!1,keyruleForm:{bsCateId:[{required:!0,message:"必填项",trigger:"blur"}],bsCateName:[{required:!0,message:"必填项",trigger:"blur"}],bsCode:[{required:!0,message:"请填写工序编号",trigger:"blur"}],bsName:[{required:!0,message:"请填写工序名称",trigger:"blur"}]}},statusFilter:function(t){return{1:"danger",0:"success"}[t]},formatStatus:function(t){return{1:"是",0:"否"}[t]},permit:{SEARCH:!1,ADD:!1,EDIT:!1,DELETE:!1},optionsBan:[{value:"0",label:"否"},{value:"1",label:"是"}]}},created:function(){this.getCategoryData(),this.getPermit()},methods:{handleSubmit:function(){this.getData()},getPermit:function(){var t=this,e=this.$route.name;Object(n.e)(e).then(function(e){if(e.result)if("admin"==e.data)t.permit.SEARCH=!0,t.permit.ADD=!0,t.permit.EDIT=!0,t.permit.DELETE=!0;else for(var a=e.data,s=0;s<a.length;s++)"SEARCH"==a[s].permCode&&(t.permit.SEARCH=!0),"ADD"==a[s].permCode&&(t.permit.ADD=!0),"EDIT"==a[s].permCode&&(t.permit.EDIT=!0),"DELETE"==a[s].permCode&&(t.permit.DELETE=!0);else t.$message.error(res.msg)})},resetFrom:function(){this.queryParams.keyword=""},handleSelectionChange:function(t){this.dataForm=o()({}),this.selection=null!=t?t:o()({}),this.dataForm.bsCateId=this.selection.id,this.dataForm.bsCateName=this.selection.bsName,this.getData()},showEditCategory:function(){if(null!=this.selection&&0!=this.selection.length){this.categoryVisible=!0;var t=this.selection;this.categoryForm={bsName:t.bsName,id:t.id}}else this.$message.error("请选择要操作的行!")},showAddCategory:function(){this.categoryVisible=!0,this.categoryForm.bsName="",this.categoryForm.id=""},getCategoryData:function(){var t=this;Object(l.h)().then(function(e){e.result?t.cTable=e.data:t.$message.error(e.msg)})},categoryAddBtn:function(){var t=this,e=o()({},this.categoryForm);void 0!=i()(this.categoryForm.id)&&"number"==typeof this.categoryForm.id?Object(l.f)(e).then(function(e){e.result?(t.categoryVisible=!1,t.$message.success(e.msg),t.getCategoryData()):t.$message.error(e.msg)}):(this.dialog.loading=!0,Object(l.a)(e).then(function(e){e.result?(t.categoryVisible=!1,t.$message.success(e.msg),t.getCategoryData()):t.$message.error(e.msg)}))},showDeleteCategory:function(){null!=this.selection&&0!=this.selection.length?(this.categoryVisibleDel=!0,this.categoryFormDel.id=this.selection.id):this.$message.error("请选择要操作的行！")},doDelete:function(){var t=this;this.categoryVisibleDel=!1;var e=this.categoryFormDel.id;e?Object(l.d)(e).then(function(e){e.result?(t.$message({message:e.msg,type:"success"}),t.getCategoryData()):t.$message.error(e.msg)}):this.$message.error("请选择要操作的行！")},getData:function(){var t=this,e=o()({},{cateId:this.selection.id,keyword:this.queryParams.keyword,bsIsBan:this.queryParams.isBan,rows:this.queryParams.rows,page:this.queryParams.page});Object(l.i)(e).then(function(e){e.result&&(t.iTable=e.data.rows,t.totalCount=e.data.total)})},showEditData:function(t){if(null!=this.selection&&0!=this.selection.length){this.dialogEdit.dataVisible=!0;var e={id:t.id,bsCateId:t.bsCateId,bsCateName:t.processCategory?t.processCategory.bsName:"",bsCode:t.bsCode,bsName:t.bsName,bsRemark:t.bsRemark};this.dataFormEdit=o()({},e)}else this.$message.error("请选择要操作的类别!")},showAddData:function(){if(null!=this.selection&&0!=this.selection.length){this.dialog.dataVisible=!0;var t={id:"",bsCateId:this.dataForm.bsCateId,bsCateName:this.dataForm.bsCateName,bsCode:"",bsName:"",bsRemark:""};this.dataForm=o()(t)}else this.$message.error("请选择要操作的类别!")},addBtn:function(){var t=this,e=o()({},this.dataForm);this.$refs["dialog.keyruleForm"].validate(function(a){a&&Object(l.b)(e).then(function(e){e.result?(t.$message.success(e.msg),t.dialog.dataVisible=!1,t.getData()):t.$message.error(e.msg)})})},editBtn:function(){var t=this,e=o()({},this.dataFormEdit);this.$refs["dialogEdit.keyruleForm"].validate(function(a){a&&Object(l.g)(e).then(function(e){e.result?(t.dialogEdit.dataVisible=!1,t.$message.success(e.msg),t.getData()):t.$message.error(e.msg)})})},delData:function(t){var e=this,a=t.id;Object(l.e)(a).then(function(t){t.result?(e.$message({message:t.msg,type:"success"}),e.getData()):e.$message.error(t.msg)})},select:function(t,e){t.length>1&&t.shift()},clickRow:function(t,e){this.$refs.mateTable.toggleRowSelection(t)},doBan:function(t,e){var a=this,s="此操作将禁用该行，是否继续？";if(0==t)s="此操作将解禁该行，是否继续？";this.$confirm(s,"提示",{distinguishCancelAndClose:!0,confirmButtonText:"确认",cancelButtonText:"取消",showClose:!0,type:"warning"}).then(function(){Object(l.c)(e.id,t).then(function(t){t.result?(a.$message({message:t.msg,type:"success"}),a.getData()):a.$message.error(t.msg)})}).catch(function(){a.$message({type:"info",message:"已取消"})})},changePage:function(t){this.queryParams.page=t,this.getData()},sizeChange:function(t){this.queryParams.rows=t,this.getData()}}},d=(a("XhCF"),a("ZrdR")),m=Object(d.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"headerTop"},[a("el-row",[a("el-col",{staticStyle:{width:"286px"},attrs:{span:6}},[a("el-button-group",{staticStyle:{"margin-left":"18px","margin-bottom":"10px"}},[t.permit.ADD?a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.showAddCategory()}}},[t._v("新增工段")]):t._e(),t._v(" "),t.permit.EDIT?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.showEditCategory()}}},[t._v("编辑工段")]):t._e(),t._v(" "),t.permit.DELETE?a("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:function(e){t.showDeleteCategory()}}},[t._v("删除")]):t._e()],1)],1),t._v(" "),a("el-col",{staticStyle:{"margin-left":"10px"},attrs:{span:16}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.queryParams}},[a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"搜索关键字"},model:{value:t.queryParams.keyword,callback:function(e){t.$set(t.queryParams,"keyword",e)},expression:"queryParams.keyword"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否禁用"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择"},model:{value:t.queryParams.isBan,callback:function(e){t.$set(t.queryParams,"isBan",e)},expression:"queryParams.isBan"}},t._l(t.optionsBan,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[t.permit.SEARCH?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.handleSubmit()}}},[t._v(t._s(t.$t("Button.Inquire")))]):t._e(),t._v(" "),t.permit.ADD?a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.showAddData()}}},[t._v("新增工序")]):t._e()],1)],1)],1)],1)],1),t._v(" "),a("el-container",{staticStyle:{height:"500px"}},[a("el-aside",{staticClass:"tree"},[a("h3",[t._v("工段列表 ")]),t._v(" "),a("el-table",{ref:"mateTable",staticClass:"mateTable",attrs:{"highlight-current-row":"",data:t.cTable},on:{"current-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{width:"230",prop:"bsName",label:"工段名称"}})],1)],1),t._v(" "),a("el-main",[a("el-table",{attrs:{data:t.iTable}},[a("el-table-column",{attrs:{prop:"bsCateName",label:"工段名称","show-overflow-tooltip":"",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.processCategory?e.row.processCategory.bsName:""))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"bsCode",label:"工序编号","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"bsName",label:"工序名称","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"bsRemark",label:"备注"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bsIsBan",label:"是否禁用","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.statusFilter(e.row.bsIsBan)}},[t._v(t._s(t.formatStatus(e.row.bsIsBan)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.permit.EDIT?a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini",circle:"",title:"编辑"},on:{click:function(a){t.showEditData(e.row)}}}):t._e(),t._v(" "),t.permit.DELETE?a("messagebox",{attrs:{title:"提示",contents:"此操作将永久删除该行, 是否继续?",confirmTitle:"确认删除"},on:{callConfirm:function(a){t.delData(e.row)}}}):t._e(),t._v(" "),0==e.row.bsIsBan?a("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini",circle:"",title:"禁用"},on:{click:function(a){t.doBan(1,e.row)}}}):t._e(),t._v(" "),1==e.row.bsIsBan?a("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini",circle:"",title:"解禁"},on:{click:function(a){t.doBan(0,e.row)}}}):t._e()]}}])})],1)],1)],1),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{staticClass:"pull-right clearfix",attrs:{current:1,"current-page":t.queryParams.page,"page-sizes":t.pageSizesList,"page-size":t.queryParams.rows,layout:"total, sizes, prev, pager, next, jumper","page-size-opts":t.pageSizesList,total:t.totalCount},on:{"current-change":t.changePage,"size-change":t.sizeChange,"update:currentPage":function(e){t.$set(t.queryParams,"page",e)}}})],1),t._v(" "),a("el-dialog",{attrs:{title:"新增或编辑类别",visible:t.categoryVisible,width:"35%"},on:{"update:visible":function(e){t.categoryVisible=e}}},[a("el-form",{ref:"ruleForm1",attrs:{inline:!0,model:t.categoryForm}},[a("el-form-item",{staticStyle:{display:"none"},attrs:{label:"id",prop:"id"}},[a("el-input",{model:{value:t.categoryForm.id,callback:function(e){t.$set(t.categoryForm,"id",e)},expression:"categoryForm.id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"工段名称",prop:"bsName"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.categoryForm.bsName,callback:function(e){t.$set(t.categoryForm,"bsName",e)},expression:"categoryForm.bsName"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"el-icon-close",on:{click:function(e){t.categoryVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"el-icon-check",attrs:{type:"primary"},on:{click:t.categoryAddBtn}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"删除类别",visible:t.categoryVisibleDel,width:"35%"},on:{"update:visible":function(e){t.categoryVisibleDel=e}}},[a("el-form",{ref:"ruleForm1",attrs:{inline:!0,model:t.categoryFormDel}},[a("el-form-item",{staticStyle:{display:"none"},attrs:{label:"id",prop:"id"}},[a("el-input",{model:{value:t.categoryFormDel.id,callback:function(e){t.$set(t.categoryFormDel,"id",e)},expression:"categoryFormDel.id"}})],1),t._v(" "),a("span",[t._v("确定删除该类别？")])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"el-icon-close",on:{click:function(e){t.categoryVisibleDel=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"el-icon-check",attrs:{type:"primary"},on:{click:function(e){t.doDelete()}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"新增工序",visible:t.dialog.dataVisible,width:"500px"},on:{"update:visible":function(e){t.$set(t.dialog,"dataVisible",e)}}},[a("el-form",{ref:"dialog.keyruleForm",attrs:{model:t.dataForm,rules:t.dialog.keyruleForm,inline:!0,"label-position":"right","label-width":"110px"}},[a("el-form-item",{attrs:{label:"工段ID",prop:"bsCateId","label-position":"left"}},[a("el-input",{staticStyle:{width:"218px"},attrs:{disabled:!0},model:{value:t.dataForm.bsCateId,callback:function(e){t.$set(t.dataForm,"bsCateId",e)},expression:"dataForm.bsCateId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"工段名称",prop:"bsCateName"}},[a("el-input",{staticStyle:{width:"218px"},attrs:{disabled:!0},model:{value:t.dataForm.bsCateName,callback:function(e){t.$set(t.dataForm,"bsCateName",e)},expression:"dataForm.bsCateName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"工序名称",prop:"bsName"}},[a("el-input",{staticStyle:{width:"218px"},model:{value:t.dataForm.bsName,callback:function(e){t.$set(t.dataForm,"bsName",e)},expression:"dataForm.bsName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"bsRemark"}},[a("el-input",{staticStyle:{width:"218px"},model:{value:t.dataForm.bsRemark,callback:function(e){t.$set(t.dataForm,"bsRemark",e)},expression:"dataForm.bsRemark"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"el-icon-close",on:{click:function(e){t.dialog.dataVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"el-icon-check",attrs:{type:"primary"},on:{click:function(e){t.addBtn()}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑工序",visible:t.dialogEdit.dataVisible,width:"500px"},on:{"update:visible":function(e){t.$set(t.dialogEdit,"dataVisible",e)}}},[a("el-form",{ref:"dialogEdit.keyruleForm",attrs:{model:t.dataFormEdit,rules:t.dialogEdit.keyruleForm,inline:!0,"label-position":"right","label-width":"110px"}},[a("el-form-item",{attrs:{label:"工段ID",prop:"bsCateId","label-position":"left"}},[a("el-input",{staticStyle:{width:"218px"},attrs:{disabled:!0},model:{value:t.dataFormEdit.bsCateId,callback:function(e){t.$set(t.dataFormEdit,"bsCateId",e)},expression:"dataFormEdit.bsCateId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"工段名称",prop:"bsCateName"}},[a("el-input",{staticStyle:{width:"218px"},attrs:{disabled:!0},model:{value:t.dataFormEdit.bsCateName,callback:function(e){t.$set(t.dataFormEdit,"bsCateName",e)},expression:"dataFormEdit.bsCateName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"工序编号",prop:"bsCode"}},[a("el-input",{staticStyle:{width:"218px"},attrs:{disabled:!0},model:{value:t.dataFormEdit.bsCode,callback:function(e){t.$set(t.dataFormEdit,"bsCode",e)},expression:"dataFormEdit.bsCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"工序名称",prop:"bsName"}},[a("el-input",{staticStyle:{width:"218px"},model:{value:t.dataFormEdit.bsName,callback:function(e){t.$set(t.dataFormEdit,"bsName",e)},expression:"dataFormEdit.bsName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"bsRemark"}},[a("el-input",{staticStyle:{width:"218px"},model:{value:t.dataFormEdit.bsRemark,callback:function(e){t.$set(t.dataFormEdit,"bsRemark",e)},expression:"dataFormEdit.bsRemark"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"el-icon-close",on:{click:function(e){t.dialogEdit.dataVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{staticClass:"el-icon-check",attrs:{type:"primary"},on:{click:function(e){t.editBtn()}}},[t._v("确 定")])],1)],1)],1)},[],!1,null,null,null);m.options.__file="process.vue";e.default=m.exports},XhCF:function(t,e,a){"use strict";var s=a("EVdy");a.n(s).a},ZE8z:function(t,e,a){"use strict";a.d(e,"h",function(){return i}),a.d(e,"a",function(){return r}),a.d(e,"f",function(){return o}),a.d(e,"d",function(){return l}),a.d(e,"i",function(){return n}),a.d(e,"b",function(){return c}),a.d(e,"g",function(){return d}),a.d(e,"e",function(){return m}),a.d(e,"c",function(){return u}),a.d(e,"j",function(){return b});var s=a("t3Un");function i(t){return Object(s.a)({url:"/processCategory/getlist",method:"get",params:t})}function r(t){return Object(s.a)({url:"/processCategory/add",method:"post",params:t})}function o(t){return Object(s.a)({url:"/processCategory/edit",method:"post",params:t})}function l(t){return Object(s.a)({url:"/processCategory/delete",method:"post",params:{id:t}})}function n(t){return Object(s.a)({url:"/processInfo/getlist",method:"get",params:t})}function c(t){return Object(s.a)({url:"/processInfo/add",method:"post",params:t})}function d(t){return Object(s.a)({url:"/processInfo/edit",method:"post",params:t})}function m(t){return Object(s.a)({url:"/processInfo/delete",method:"post",params:{id:t}})}function u(t,e){return Object(s.a)({url:"/processInfo/doBan",method:"post",params:{id:t,bsIsBan:e}})}function b(t){return Object(s.a)({url:"/processInfo/getListAll",method:"get",params:t})}}}]);