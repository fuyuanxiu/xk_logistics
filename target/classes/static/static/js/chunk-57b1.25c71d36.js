(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-57b1"],{"UV/M":function(e,t,o){"use strict";o.r(t);var r=o("Q2cO"),a=o.n(r),l=o("wk8/"),s=o("zF5t"),i={name:"userManagement",data:function(){return{dialogVisible:!1,rolesData:[],checkedRolesData:[],value4:[],renderFunc:function(e,t){return"<span>{ option.label }</span>"},options:[{value:"0",label:"启用"},{value:"1",label:"禁用"}],optionsUser:[{value:"-1",label:"请选择"},{value:"0",label:"系统用户"},{value:"1",label:"供应商用户"}],resetForm:{},formLabelWidth:"100px",formQuery:{userCode:"",userName:"",userType:""},currentRow:[],userTable:[{}],dialogFormVisible:!1,dialog:{loading:!1,modal_dialog:!1,formItem:{},ruleForm:{userCode:[{required:!0,message:"请填写帐号",trigger:"blur"}],userName:[{required:!0,message:"请填写姓名",trigger:"blur"}],userMobile:[{required:!0,trigger:"blur",validator:function(e,t,o){if(!t)return o(new Error("手机号不能为空"));var r=/^1[3|4|5|6|7|8|9][0-9]\d{8}$/;if(console.log(r.test(t)),!r.test(t))return o(new Error("请输入正确的手机号"));o()}}],userEmail:[{required:!0,trigger:"blur",validator:function(e,t,o){var r=/^([a-zA-Z0-9_.-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;if(!t)return o(new Error("邮箱不能为空"));setTimeout(function(){r.test(t)?o():o(new Error("请输入正确的邮箱格式"))},100)}}]}},queryParams:{page:1,rows:15,pkParent:-1},pageSizesList:[10,15,20,30,40,50,100],totalCount:0}},created:function(){this.getData()},methods:{handleSubmit:function(e){this.getData()},getData:function(){var e=this;Object(l.f)(this.formQuery.userCode,this.formQuery.userName,this.formQuery.userType,this.queryParams.rows,this.queryParams.page).then(function(t){t.data||reject("error"),e.userTable=t.data.rows,e.totalCount=t.data.total})},showAddDialog:function(){this.dialog.modal_dialog=!0,this.dialog.formItem={id:""}},showEditDialog:function(){if(this.currentRow.id){this.dialog.modal_dialog=!0;var e=this.currentRow;this.dialog.formItem={userCode:e.userCode,userName:e.userName,id:e.id,userEmail:e.userEmail,userMobile:e.userMobile,userComment:e.userComment},this.dialog.formItem.userStatus=e.userStatus.toString()}else this.$message.error("请选择要操作的行")},handleSelectionChange:function(e){e.length>0?this.currentRow=e[e.length-1]:this.currentRow=[]},select:function(e,t){e.length>1&&e.shift()},doDelete:function(){var e=this;if(this.currentRow.id){var t=this.currentRow.id;Object(l.c)(t).then(function(t){t.result?(e.$message({message:t.msg,type:"success"}),e.getData()):e.$message.error(t.msg)})}else this.$message.error("请选择要操作的行")},showRestDialog:function(){this.currentRow.id?(this.dialogFormVisible=!0,this.resetForm.id=this.currentRow.id):this.$message.error("请选择要操作的行")},resetPassword:function(){var e=this,t=this.currentRow;this.resetForm.id=t.id,this.resetForm.password==this.resetForm.rePassword?Object(l.g)(this.resetForm.id,this.resetForm.password,this.resetForm.rePassword).then(function(t){t.result?e.$message.info(t.msg):e.$message.error(t.msg)}):this.$message.info("两次密码不一致，请重新输入!")},ok:function(){var e=this;void 0!=a()(this.dialog.formItem.id)&&"number"==typeof this.dialog.formItem.id?this.$refs["dialog.ruleForm"].validate(function(t){t&&Object(l.d)(e.dialog.formItem).then(function(t){e.dialog.loading=!1,t.result?(e.dialog.loading=!1,e.dialog.modal_dialog=!1,e.getData()):e.$message.error(t.msg)})}):this.$refs["dialog.ruleForm"].validate(function(t){t&&Object(l.a)(e.dialog.formItem).then(function(t){t.result?(e.dialog.loading=!1,e.dialog.modal_dialog=!1,e.getData()):e.$message.error(t.msg)})})},doAssigRoles:function(){var e=this;this.currentRow.id?Object(s.e)(this.currentRow.id).then(function(t){e.rolesData=[],e.value4=[],e.checkedRolesData=[];var o=t.data;o.List.forEach(function(t,o){e.rolesData.push({key:t.roleCode,label:t.roleName})}),e.value4=o.CheckedList,e.checkedRolesData=o.CheckedList,e.dialogVisible=!0}):this.$message.error("请选择要分配角色的用户")},saveRoles:function(){var e=this,t=this.currentRow.id;Object(s.i)(t,this.value4.toString()).then(function(t){e.$message.info(t.msg),e.dialogVisible=!1})},handleChange:function(e,t,o){console.log(e,t,o)},cancel:function(){this.dialog.modal_dialog=!1},changePage:function(e){this.queryParams.page=e,this.getData()},SizeChange:function(e){this.queryParams.rows=e,this.getData()},handleClose:function(){}}},n=(o("xp/q"),o("ZrdR")),u=Object(n.a)(i,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-card",{staticStyle:{"padding-bottom":"0",border:"none",height:"auto"}},[o("el-row",[o("el-col",{attrs:{span:24}},[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formQuery}},[o("el-form-item",{attrs:{label:e.$t("user.userCode")}},[o("el-input",{attrs:{placeholder:"账号"},model:{value:e.formQuery.userCode,callback:function(t){e.$set(e.formQuery,"userCode",t)},expression:"formQuery.userCode"}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.$t("user.userName")}},[o("el-input",{attrs:{placeholder:"姓名"},model:{value:e.formQuery.userName,callback:function(t){e.$set(e.formQuery,"userName",t)},expression:"formQuery.userName"}})],1),e._v(" "),o("el-form-item",[o("el-select",{staticStyle:{width:"280px"},attrs:{placeholder:"请选择"},model:{value:e.formQuery.userType,callback:function(t){e.$set(e.formQuery,"userType",t)},expression:"formQuery.userType"}},e._l(e.optionsUser,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.handleSubmit("formQuery")}}},[e._v(e._s(e.$t("Button.Inquire")))])],1)],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:6}},[o("el-button-group",{attrs:{size:"samll"}},[o("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.showAddDialog()}}},[e._v("新增")]),e._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-delete"},on:{click:function(t){e.doDelete()}}},[e._v("删除")]),e._v(" "),o("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.showEditDialog()}}},[e._v("编辑")])],1)],1),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-button-group",{attrs:{size:"samll"}},[o("el-button",{attrs:{type:"primary"},on:{click:e.doAssigRoles}},[e._v("分配角色")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.showRestDialog}},[e._v("重置密码")])],1)],1)],1)],1),e._v(" "),[o("el-table",{ref:"main_table",staticStyle:{width:"100%"},attrs:{border:"",data:e.userTable,"tooltip-effect":"dark","highlight-current-row":""},on:{select:e.select,"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"45"}}),e._v(" "),o("el-table-column",{attrs:{prop:"userCode",label:"账号",width:"120","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"userName",label:"姓名",width:"250","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"suppContactName",align:"center",label:"供应商联系人",width:"120","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"userMobile",align:"center",label:"手机号",width:"120","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"userEmail",align:"center",label:"邮箱","show-overflow-tooltip":""}}),e._v(" "),o("el-table-column",{attrs:{prop:"userStatus",label:"状态",width:"80",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",{class:{blue:0==t.row.userStatus,red:1==t.row.userStatus}},[e._v(e._s(e.$t("user.userStatus["+t.row.userStatus+"]")))])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"createdTime",label:"创建时间",align:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(void 0!=t.row.createdTime&&null!==t.row.createdTime?t.row.createdTime.substring(0,10):""))])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"modifiedTime",label:"更新时间",lign:"center","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[o("span",[e._v(e._s(void 0!=t.row.modifiedTime&&null!==t.row.modifiedTime?t.row.modifiedTime.substring(0,10):"")+"\n                 ")])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"userComment",label:"备注","show-overflow-tooltip":""}})],1)],e._v(" "),o("div",{staticClass:"block"},[o("el-pagination",{staticClass:"pull-right clearfix",attrs:{current:1,"current-page":e.queryParams.page,"page-sizes":e.pageSizesList,"page-size":e.queryParams.rows,layout:"total, sizes, prev, pager, next, jumper","page-size-opts":e.pageSizesList,total:e.totalCount},on:{"current-change":e.changePage,"size-change":e.SizeChange,"update:currentPage":function(t){e.$set(e.queryParams,"page",t)}}})],1),e._v(" "),o("el-dialog",{ref:"dialog.ruleForm",attrs:{visible:e.dialog.modal_dialog,title:"用户管理",width:"500px",modal:!0,"close-on-click-modal":!1,"close-on-press-escape":!0,"append-to-body":""},on:{"update:visible":function(t){e.$set(e.dialog,"modal_dialog",t)}}},[o("p",[o("el-form",{ref:"dialog.ruleForm",attrs:{model:e.dialog.formItem,rules:e.dialog.ruleForm,"label-width":"100px"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{staticStyle:{display:"none"},attrs:{label:"id",prop:"roleCode"}},[o("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.dialog.formItem.id,callback:function(t){e.$set(e.dialog.formItem,"id",t)},expression:"dialog.formItem.id"}})],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:"账号",prop:"userCode"}},[o("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.dialog.formItem.userCode,callback:function(t){e.$set(e.dialog.formItem,"userCode",t)},expression:"dialog.formItem.userCode"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:"名称",prop:"userName"}},[o("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.dialog.formItem.userName,callback:function(t){e.$set(e.dialog.formItem,"userName",t)},expression:"dialog.formItem.userName"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:"状态",prop:"userStatus"}},[o("el-select",{staticStyle:{width:"280px"},attrs:{placeholder:"请选择活动区域"},model:{value:e.dialog.formItem.userStatus,callback:function(t){e.$set(e.dialog.formItem,"userStatus",t)},expression:"dialog.formItem.userStatus"}},e._l(e.options,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:"手机号",prop:"userMobile"}},[o("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.dialog.formItem.userMobile,callback:function(t){e.$set(e.dialog.formItem,"userMobile",t)},expression:"dialog.formItem.userMobile"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:"邮箱地址",prop:"userEmail"}},[o("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.dialog.formItem.userEmail,callback:function(t){e.$set(e.dialog.formItem,"userEmail",t)},expression:"dialog.formItem.userEmail"}})],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:"备注",prop:"userComment"}},[o("el-input",{attrs:{size:"small",type:"textarea",placeholder:"请输入..."},model:{value:e.dialog.formItem.userComment,callback:function(t){e.$set(e.dialog.formItem,"userComment",t)},expression:"dialog.formItem.userComment"}})],1)],1)],1)],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary",size:"small",loading:!1},on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"small",loading:e.dialog.loading},on:{click:e.ok}},[e._v("确 定")])],1),e._v(" "),o("p")]),e._v(" "),o("el-dialog",{attrs:{title:"重置密码",visible:e.dialogFormVisible,width:"400px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{attrs:{model:e.resetForm}},[o("el-form-item",{attrs:{label:"重置密码","label-width":e.formLabelWidth}},[o("el-input",{model:{value:e.resetForm.password,callback:function(t){e.$set(e.resetForm,"password",t)},expression:"resetForm.password"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"再次确认","label-width":e.formLabelWidth}},[o("el-input",{model:{value:e.resetForm.rePassword,callback:function(t){e.$set(e.resetForm,"rePassword",t)},expression:"resetForm.rePassword"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.resetPassword}},[e._v("确 定")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"分配角色",visible:e.dialogVisible,width:"50%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("div",{staticStyle:{"text-align":"center"}},[o("el-transfer",{staticStyle:{"text-align":"left",display:"inline-block"},attrs:{"right-default-checked":e.checkedRolesData,titles:["所有","选中"],"button-texts":["移除","添加"],format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},data:e.rolesData},on:{change:e.handleChange},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.option;return o("span",{},[e._v(" "+e._s(r.label))])}}]),model:{value:e.value4,callback:function(t){e.value4=t},expression:"value4"}})],1),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary",size:"small",loading:!1},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"small",loading:e.dialog.loading},on:{click:e.saveRoles}},[e._v("确 定")])],1)])],2)},[],!1,null,null,null);u.options.__file="userManagement.vue";t.default=u.exports},UicY:function(e,t,o){},"wk8/":function(e,t,o){"use strict";o.d(t,"a",function(){return a}),o.d(t,"f",function(){return l}),o.d(t,"d",function(){return s}),o.d(t,"c",function(){return i}),o.d(t,"b",function(){return n}),o.d(t,"g",function(){return u}),o.d(t,"e",function(){return d});var r=o("t3Un");function a(e){return Object(r.a)({url:"/sysUser/add",method:"post",data:e})}function l(e,t,o,a,l){return Object(r.a)({url:"/sysUser/getlist",method:"get",params:{username:t,usercode:e,userType:o,page:l,rows:a}})}function s(e){return Object(r.a)({url:"/sysUser/edite",method:"post",data:e})}function i(e){return Object(r.a)({url:"/sysUser/delete",method:"post",params:{id:e}})}function n(e,t,o,a){return Object(r.a)({url:"/sysUser/changePassword",method:"post",params:{loginName:e,oldPassword:t,password:o,rePassword:a}})}function u(e,t,o){return Object(r.a)({url:"/sysUser/resetPassword",method:"post",params:{id:e,password:t,rePassword:o}})}function d(e,t){return Object(r.a)({url:"/sysUser/forgotPassword",method:"post",params:{loginName:e,email:t}})}},"xp/q":function(e,t,o){"use strict";var r=o("UicY");o.n(r).a},zF5t:function(e,t,o){"use strict";o.d(t,"a",function(){return a}),o.d(t,"g",function(){return l}),o.d(t,"e",function(){return s}),o.d(t,"i",function(){return i}),o.d(t,"d",function(){return n}),o.d(t,"c",function(){return u}),o.d(t,"b",function(){return d}),o.d(t,"h",function(){return c}),o.d(t,"f",function(){return m});var r=o("t3Un");function a(e){return Object(r.a)({url:"/sysRole/add",method:"post",data:e})}function l(e,t,o,a){return Object(r.a)({url:"/sysRole/getlist",method:"get",params:{roleCode:e,roleName:t,page:o,rows:a}})}function s(e){return Object(r.a)({url:"/sysRole/getCheckedRoles",method:"get",params:{userId:e}})}function i(e,t){return Object(r.a)({url:"/sysRole/saveUserRoles",method:"get",params:{userId:e,roles:t}})}function n(e){return Object(r.a)({url:"/sysRole/edite",method:"post",data:e})}function u(e){return Object(r.a)({url:"/sysRole/delete",method:"post",params:{id:e}})}function d(e){return Object(r.a)({url:"/sysRole/addRouter",method:"get",params:e})}function c(e){return Object(r.a)({url:"/sysRole/getRouter",method:"get",params:{roleCode:e}})}function m(e){return Object(r.a)({url:"/sysRole/getPermission",method:"get",params:e})}}}]);