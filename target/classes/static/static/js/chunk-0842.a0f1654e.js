(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0842"],{"0KSV":function(t,e,o){"use strict";var a=o("KUSc");o.n(a).a},19:function(t,e){},20:function(t,e){},21:function(t,e){},"6EU2":function(t,e,o){"use strict";var a=o("Asgo"),r=o.n(a),l=o("6ZY3"),i=o.n(l),s=o("AJLq"),n=o.n(s),c=o("QF9X"),u={props:{beforeUpload:Function,onSuccess:Function},data:function(){return{loading:!1,excelData:{header:null,results:null},startRow:1,file:{}}},methods:{generateData:function(t){var e=t.header,o=t.results;this.excelData.header=e,this.excelData.results=o,this.onSuccess&&this.onSuccess(this.excelData)},handleDrop:function(t){if(t.stopPropagation(),t.preventDefault(),!this.loading){var e=t.dataTransfer.files;if(1===e.length){var o=e[0];if(!this.isExcel(o))return this.$message.error("Only supports upload .xlsx, .xls, .csv suffix files"),!1;this.upload(o),t.stopPropagation(),t.preventDefault()}else this.$message.error("Only support uploading one file!")}},handleDragover:function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},handleUpload:function(){this.$refs["excel-upload-input"].click()},handleClick:function(t){var e=this;this.$prompt("请输入开始读取的行数","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\+?[1-9]\d*$/,inputErrorMessage:"请输入正整数"}).then(function(o){var a=o.value;e.loading=!0,e.startRow=a;var r=t.target.files[0];e.file=r;var l=new FormData;l.append("file",e.file),l.append("startRow",e.startRow),Object(c.k)(l).then(function(t){if(e.loading=!1,t.result){i()(t.data,{name:e.file.name});e.$message.info(t.msg),e.$emit("afterUpload",t.data.id),e.$emit("handleSuccess")}else e.$message.error(t.msg)})}).catch(function(){})},upload:function(t){(this.$refs["excel-upload-input"].value=null,this.beforeUpload)?this.beforeUpload(t)&&this.readerData(t):this.readerData(t)},readerData:function(t){var e=this;return this.loading=!0,new r.a(function(o,a){var r=new FileReader;r.onload=function(t){var a=t.target.result,r=e.fixData(a),l=n.a.read(btoa(r),{type:"base64"}),i=l.SheetNames[0],s=l.Sheets[i],c=e.getHeaderRow(s),u=n.a.utils.sheet_to_json(s);e.generateData({header:c,results:u}),e.loading=!1,o()},r.readAsArrayBuffer(t)})},fixData:function(t){for(var e="",o=0,a=10240;o<t.byteLength/a;++o)e+=String.fromCharCode.apply(null,new Uint8Array(t.slice(o*a,o*a+a)));return e+=String.fromCharCode.apply(null,new Uint8Array(t.slice(o*a)))},getHeaderRow:function(t){var e=t["!ref"].split(":");t["!ref"]="A"+this.startRow+":"+e[1];var o=[],a=n.a.utils.decode_range(t["!ref"]),r=void 0,l=a.s.r;for(r=a.s.c;r<=a.e.c;++r){var i=t[n.a.utils.encode_cell({c:r,r:l})];i&&i.t&&o.push(n.a.utils.format_cell(i))}return o},isExcel:function(t){return/\.(xlsx|xls|csv)$/.test(t.name)}}},m=(o("0KSV"),o("ZrdR")),d=Object(m.a)(u,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("input",{ref:"excel-upload-input",staticClass:"excel-upload-input",attrs:{type:"file",accept:".xlsx, .xls"},on:{change:this.handleClick}}),this._v(" "),e("el-button",{staticStyle:{"margin-left":"16px"},attrs:{loading:this.loading,size:"mini",type:"primary"},on:{click:this.handleUpload}},[this._v("点击上传Bom文件")])],1)},[],!1,null,"79ccee76",null);d.options.__file="UploadExcel.vue";e.a=d.exports},"A2h+":function(t,e,o){"use strict";o.d(e,"b",function(){return r}),o.d(e,"f",function(){return l}),o.d(e,"c",function(){return i}),o.d(e,"d",function(){return s}),o.d(e,"g",function(){return n}),o.d(e,"a",function(){return c}),o.d(e,"e",function(){return u});var a=o("t3Un");function r(t){return Object(a.a)({url:"/enquiryBom/delete",method:"post",params:{id:t}})}function l(t){return Object(a.a)({url:"/enquiryBom/getlist",method:"get",params:t})}function i(t){return Object(a.a)({url:"/enquiryBom/doCreateEnquiry",method:"get",params:t})}function s(t){return Object(a.a)({url:"/enquiryBom/getDetailInfo",method:"get",params:t})}function n(t,e,o){return Object(a.a)({url:"/enquiryBom/setSupplier",method:"post",params:{eqBomId:t,detailIds:e,suppIds:o}})}function c(t){return Object(a.a)({url:"/enquiryBom/deleteDetail",method:"post",params:{id:t}})}function u(t){return Object(a.a)({url:"/enquiryBom/getUserList",method:"get",params:t})}},CXMO:function(t,e,o){"use strict";var a=o("Io5o");o.n(a).a},Ep7J:function(t,e,o){"use strict";o.r(e);var a=o("6ZY3"),r=o.n(a),l=o("6EU2"),i=o("QF9X"),s=(o("wk8/"),o("iEdf")),n=o("Q2cO"),c=o.n(n),u=o("A2h+"),m={props:["multipleSelection"],data:function(){return{dialog:{loading:!1,modal_dialog:!1,formItem:{id:"",userName:"",remark:""},ruleForm:{roleCode:[{required:!0,message:"请填选人员",trigger:"blur"}]}}}},methods:{showDialog:function(){this.dialog.modal_dialog=!0},getUser:function(t,e){var o=this;Object(u.e)().then(function(t){t.result?(o.param=t.data.map(function(t){return t.value=t.userName,t}),e(o.param)):o.$message.error(t.msg)})},handleSelectUser:function(t){this.dialog.formItem.id=t.id},cancel:function(){this.dialog.modal_dialog=!1},doSend:function(){var t=this;this.bomIds=[],this.multipleSelection.forEach(function(e){t.bomIds.push(e.CusBomId)});var e=this.bomIds.toString(),o=r()({bomIds:e},{fileId:this.$route.query.fileId},{todoerBy:this.dialog.formItem.id},{bsRemark:this.dialog.formItem.bsRemark});void 0!=c()(this.dialog.formItem.id)&&"number"==typeof this.dialog.formItem.id&&Object(u.c)(o).then(function(e){t.dialog.loading=!1,e.result?(t.dialog.loading=!1,t.dialog.modal_dialog=!1,t.$message({message:e.msg,type:"success"})):t.$message.error(res.msg)})}}},d=o("ZrdR"),f=Object(d.a)(m,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-dialog",{attrs:{visible:t.dialog.modal_dialog,title:"新料询价",width:"450px",modal:!0,"close-on-click-modal":!1,"close-on-press-escape":!0,"append-to-body":""},on:{"update:visible":function(e){t.$set(t.dialog,"modal_dialog",e)}}},[o("p",[o("el-form",{ref:"addmateForm",attrs:{model:t.dialog.formItem,rules:t.dialog.ruleForm,"label-width":"100px"}},[o("el-row",[o("el-col",{attrs:{span:20}},[o("el-form-item",{staticStyle:{display:"none"},attrs:{label:"id",prop:"todoerBy"}},[o("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:t.dialog.formItem.id,callback:function(e){t.$set(t.dialog.formItem,"id",e)},expression:"dialog.formItem.id"}})],1)],1),t._v(" "),o("el-col",{attrs:{span:24}},[o("el-form-item",{staticStyle:{"font-size":"14px!important"},attrs:{label:"选择人员",prop:"userName"}},[o("el-autocomplete",{staticStyle:{width:"250px"},attrs:{"fetch-suggestions":t.getUser},on:{select:t.handleSelectUser},model:{value:t.dialog.formItem.userName,callback:function(e){t.$set(t.dialog.formItem,"userName",e)},expression:"dialog.formItem.userName"}})],1)],1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:20}},[o("el-form-item",{staticStyle:{"font-size":"14px!important"},attrs:{label:"备注",prop:"bsRemark"}},[o("el-input",{staticStyle:{width:"250px"},attrs:{size:"small",type:"textarea",placeholder:"请输入..."},model:{value:t.dialog.formItem.bsRemark,callback:function(e){t.$set(t.dialog.formItem,"bsRemark",e)},expression:"dialog.formItem.bsRemark"}})],1)],1)],1)],1)],1),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary",size:"small",loading:!1},on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary",size:"small",loading:t.dialog.loading},on:{click:function(e){t.doSend()}}},[t._v("确 定")])],1),t._v(" "),o("p")])],1)},[],!1,null,null,null);f.options.__file="materModel.vue";var p=f.exports,h=o("HQxi"),b=o("zF5t"),v=o("i2sM"),g=o("Asgo"),w=o.n(g),y=o("AJLq"),x=o.n(y),_={props:{beforeUpload:Function,onSuccess:Function,bomParamId:"",fileId:"",bomK3CodeCol:""},data:function(){return{loading:!1,excelData:{header:null,results:null},startRow:1,file:{}}},methods:{generateData:function(t){var e=t.header,o=t.results;this.excelData.header=e,this.excelData.results=o,this.onSuccess&&this.onSuccess(this.excelData)},handleDrop:function(t){if(t.stopPropagation(),t.preventDefault(),!this.loading){var e=t.dataTransfer.files;if(1===e.length){var o=e[0];if(!this.isExcel(o))return this.$message.error("Only supports upload .xlsx, .xls, .csv suffix files"),!1;this.upload(o),t.stopPropagation(),t.preventDefault()}else this.$message.error("Only support uploading one file!")}},handleDragover:function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},handleUpload:function(){this.$refs["excel-upload-input"].click()},handleClick:function(t){var e=this;this.$prompt("请输入开始读取的行数","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\+?[1-9]\d*$/,inputErrorMessage:"请输入正整数"}).then(function(o){var a=o.value;e.loading=!0,e.startRow=a;var l=t.target.files[0];e.file=l;var i=new FormData;i.append("file",e.file),i.append("startRow",e.startRow),i.append("bomParamId",e.bomParamId),i.append("fileId",e.fileId),i.append("bomK3CodeCol",e.bomK3CodeCol),Object(v.c)(i).then(function(t){if(e.loading=!1,t.result){r()(t.data,{name:e.file.name});e.$message.info(t.msg),e.$emit("afterUpload",t.data.id),e.$emit("handleSuccess")}else e.$message.error(t.msg)})})},upload:function(t){(this.$refs["excel-upload-input"].value=null,this.beforeUpload)?this.beforeUpload(t)&&this.readerData(t):this.readerData(t)},readerData:function(t){var e=this;return this.loading=!0,new w.a(function(o,a){var r=new FileReader;r.onload=function(t){var a=t.target.result,r=e.fixData(a),l=x.a.read(btoa(r),{type:"base64"}),i=l.SheetNames[0],s=l.Sheets[i],n=e.getHeaderRow(s),c=x.a.utils.sheet_to_json(s);e.generateData({header:n,results:c}),e.loading=!1,o()},r.readAsArrayBuffer(t)})},fixData:function(t){for(var e="",o=0,a=10240;o<t.byteLength/a;++o)e+=String.fromCharCode.apply(null,new Uint8Array(t.slice(o*a,o*a+a)));return e+=String.fromCharCode.apply(null,new Uint8Array(t.slice(o*a)))},getHeaderRow:function(t){var e=t["!ref"].split(":");t["!ref"]="A"+this.startRow+":"+e[1];var o=[],a=x.a.utils.decode_range(t["!ref"]),r=void 0,l=a.s.r;for(r=a.s.c;r<=a.e.c;++r){var i=t[x.a.utils.encode_cell({c:r,r:l})];i&&i.t&&o.push(x.a.utils.format_cell(i))}return o},isExcel:function(t){return/\.(xlsx|xls|csv)$/.test(t.name)}}},C=(o("CXMO"),Object(d.a)(_,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{float:"right","margin-left":"15px"}},[e("input",{ref:"excel-upload-input",staticClass:"excel-upload-input",attrs:{type:"file",accept:".xlsx, .xls"},on:{change:this.handleClick}}),this._v(" "),e("el-button",{attrs:{loading:this.loading,type:"primary"},on:{click:this.handleUpload}},[this._v("K3代码导入")])],1)},[],!1,null,"5aa00446",null));C.options.__file="UploadCode.vue";var k=C.exports,S={name:"clientBomRate",components:{UploadExcelComponent:l.a,MessageBoxDelete:s.a,matermodel:p,UploadCodeComponent:k},data:function(){return{tableData:[],tableHeader:[],dropCol:[],labelPosition:"right",isUpload:!0,isShow:!1,isShowTable:!1,activeNames:["1"],optionHearder:[],optionUser:[],optionSort:[],bomIds:[],formQuery:{standardCol:"",categoryCol:"",nameCol:"",quantityCol:"",packageCol:"",makerCol:"",brandNumberCol:"",placeNumberCol:"",isCustomer:0,isMatchAll:0,bomNumber:1,bomCheck:.6,bomLimit:0,bomLimitNum:5,bsSortPlan:0,bomK3CodeCol:"",personName:""},checkList:["1","2"],fileId:"",expands:[],expandTableData:[],rules:{standardCol:[{required:!0,message:"请选择规格列",trigger:"change"}],quantityCol:[{required:!0,message:"请选择数量列",trigger:"change"}],categoryCol:[{required:!0,message:"请选择类别列",trigger:"change"}]},load:!1,formMath:{mathNum:"",mathRatio:""},arrID:[],filters:{},currentRow:[],fillPercent:0,fAuxPriceTotal:0,fAuxPrice3MonthMaxTotal:0,fAuxPrice3MonthMinTotal:0,fillNum:0,totalNum:0,color:"#f56c6c",bomParamsId:"",loading:!1,dialog:{formItem:{id:"",userName:"",remark:""},ruleForm:{roleCode:[{required:!0,message:"请填选人员",trigger:"blur"}]},docVisible:!1,bsFileId:0},multipleSelection:[],docList:[],statusFilter:function(t){return{0:"info",1:"info"}[t]},formatStatus:function(t){return{0:"否",1:"是"}[t]},isBomPrice:!1,showMateVisible:!1,mateCode:"",showMateList:[],showCusBomId:0}},created:function(){var t=this;this.$route.query.fileId&&this.getBomDateByFileId(this.$route.query.fileId),Object(b.f)().then(function(e){e.result?1==e.data.isSuper?t.isBomPrice=!0:""!=e.data.perm&&e.data.perm.indexOf("BOM_PRICE")>=0&&(t.isBomPrice=!0):t.$message.error(e.msg)})},computed:{},methods:{returnFloat:function(t){if(null==t||void 0==t)return"0.000000";var e=(t=Math.round(1e6*parseFloat(t))/1e6).toString().split(".");if(1==e.length)return t=t.toString()+".000000";if(e.length>1){for(var o="",a=0;a<6-e[1].length;a++)o=o.toString()+"0";return t=t.toString()+o}},tableRowClassName:function(t){var e=t.row;t.rowIndex;return 1==e.checkStatus?"success-row":"warning-row"},beforeUpload:function(t){return t.size/1024/1024<1||(this.$message({message:"Please do not upload files larger than 1m in size.",type:"warning"}),!1)},handleSuccess:function(t){var e=this,o=t.results,a=t.header;this.optionHearder=[],this.optionHearder.push({value:"",label:"无"}),this.isUpload=!0,this.tableData=o,this.tableHeader=a,this.tableHeader.forEach(function(t){var o={value:t,label:t};e.optionHearder.push(o)}),this.isShow=!0},afterUpload:function(t){this.fileId=t,this.getBomDateByFileId(t)},doSimilarity:function(t){var e=this;this.load=!0,this.$refs[t].validate(function(t){if(!t)return e.load=!1,e.$message.error("请设置好规格、数量和类别对应的列！"),!1;var o=r()({},e.formQuery,{splitList:e.checkList.toString()},{fileId:e.fileId});Object(i.g)(o).then(function(t){t.result?(e.$message.info("匹配成功，请点击行展开查看!"),e.tableHeader=t.data.header,e.tableData=t.data.results,e.isShowTable=!0,e.load=!1,location.reload()):e.$message.error(t.msg)})})},getBomDateByFileId:function(t){var e=this;Object(i.d)(t).then(function(o){if(o.result){e.tableHeader=o.data.header,e.tableData=o.data.results,e.optionHearder=[],e.optionHearder.push({value:"",label:"无"}),e.tableHeader.forEach(function(t){var o={value:t,label:t};e.optionHearder.push(o)}),e.meriOption=o.data.listCategory,e.optionSort=[],e.optionSort.push({value:0,label:"1.匹配率优先排序(按匹配率、库存数量倒序排序)"});var a="2.库存优先排序(在方案1的基础上，当匹配率都小于"+o.data.sortPlanNum+"时，按库存数量、匹配率倒序排序)";e.optionSort.push({value:1,label:a}),e.formQuery.standardCol=o.data.bomParams.standardCol,e.formQuery.quantityCol=o.data.bomParams.quantityCol,o.data.bomParams.categoryCol&&(e.formQuery.categoryCol=o.data.bomParams.categoryCol),o.data.bomParams.nameCol&&(e.formQuery.nameCol=o.data.bomParams.nameCol),o.data.bomParams.packageCol&&(e.formQuery.packageCol=o.data.bomParams.packageCol),o.data.bomParams.makerCol&&(e.formQuery.makerCol=o.data.bomParams.makerCol),o.data.bomParams.brandNumberCol&&(e.formQuery.brandNumberCol=o.data.bomParams.brandNumberCol),o.data.bomParams.placeNumberCol&&(e.formQuery.placeNumberCol=o.data.bomParams.placeNumberCol),o.data.bomParams.checkList&&(e.checkList=o.data.bomParams.checkList.split(",")),o.data.bomParams.isCustomer&&(e.formQuery.isCustomer=o.data.bomParams.isCustomer),o.data.bomParams.bomNumber&&(e.formQuery.bomNumber=o.data.bomParams.bomNumber),o.data.bomParams.bomCheck&&(e.formQuery.bomCheck=o.data.bomParams.bomCheck),o.data.bomParams.bomLimit&&(e.formQuery.bomLimit=o.data.bomParams.bomLimit),o.data.bomParams.bomLimitNum&&(e.formQuery.bomLimitNum=o.data.bomParams.bomLimitNum),o.data.bomParams.bsSortPlan&&(e.formQuery.bsSortPlan=o.data.bomParams.bsSortPlan),o.data.bomParams.bomK3CodeCol&&(e.formQuery.bomK3CodeCol=o.data.bomParams.bomK3CodeCol),o.data.bomParams.personName&&(e.formQuery.personName=o.data.bomParams.personName),e.bomParamsId=o.data.bomParams.id,e.fillPercent=o.data.totalCost.chosenNum/o.data.totalCost.totalNum*100,100==e.fillPercent&&(e.color="green"),e.totalNum=o.data.totalCost.totalNum,e.fAuxPriceTotal=o.data.totalCost.fAuxPriceDiscount,e.fAuxPrice3MonthMaxTotal=o.data.totalCost.fAuxPrice3MonthMax,e.fAuxPrice3MonthMinTotal=o.data.totalCost.fAuxPrice3MonthMin,e.fileId=t,e.isShowTable=!0,e.isShow=!0}else e.$message.error(o.msg)})},doCheck:function(t,e){var o=this;Object(i.c)(e.id,t).then(function(e){e.result?(o.$message.info("操作成功!"),o.currentRow.childrenData=e.data.bomMatchList,o.currentRow.checkStatus=t,o.currentRow.checkCode=e.data.bomList.checkCode,o.currentRow.fStockQty=e.data.bomList.fStockQty,o.currentRow.fStockPrice=o.returnFloat(e.data.bomList.fStockPrice),o.currentRow.fStockPriceTotal=o.returnFloat(e.data.bomList.fStockPriceTotal),o.currentRow.fAuxPriceDiscount=o.returnFloat(e.data.bomList.fAuxPriceDiscount),o.currentRow.fAuxPriceDiscountTotal=o.returnFloat(e.data.bomList.fAuxPriceDiscountTotal),o.fillPercent=e.data.totalCost.chosenNum/e.data.totalCost.totalNum*100,o.fAuxPriceTotal=e.data.totalCost.fAuxPriceDiscount,o.fAuxPrice3MonthMaxTotal=e.data.totalCost.fAuxPrice3MonthMax,o.fAuxPrice3MonthMinTotal=e.data.totalCost.fAuxPrice3MonthMin):o.$message.error(e.msg)})},toInstructions:function(){this.$router.push({path:"instructionsCost",query:this.$route.query})},toList:function(){this.$router.push({path:"clientBomList",query:this.$route.query})},onSelectedCategory:function(t,e){console.log(t),this.rowClick(e,"","")},rowClick:function(t,e,o){var a=this;if(this.currentRow=t,!t.childrenData||""==e){this.loading=!0;var r=this.formQuery.bomLimitNum,l=this.formQuery.bomLimit,s=this.formQuery.bomCheck;Object(i.f)(t.CusBomId,t.mateCategory,r,l,s).then(function(e){e.result?(t.childrenData=e.data.bomMatchList,a.currentRow.checkStatus=e.data.bomList.checkStatus,a.currentRow.checkCode=e.data.bomList.checkCode,a.currentRow.fStockQty=e.data.bomList.fStockQty,a.currentRow.fStockPrice=a.returnFloat(e.data.bomList.fStockPrice),a.currentRow.fStockPriceTotal=a.returnFloat(e.data.bomList.fStockPriceTotal),a.currentRow.fAuxPriceDiscount=a.returnFloat(e.data.bomList.fAuxPriceDiscount),a.currentRow.fAuxPriceDiscountTotal=a.returnFloat(e.data.bomList.fAuxPriceDiscountTotal),a.fillPercent=e.data.totalCost.chosenNum/e.data.totalCost.totalNum*100,100==a.fillPercent&&(a.color="green"),a.totalNum=e.data.totalCost.totalNum,a.fAuxPriceTotal=e.data.totalCost.fAuxPriceDiscount,a.fAuxPrice3MonthMaxTotal=e.data.totalCost.fAuxPrice3MonthMax,a.fAuxPrice3MonthMinTotal=e.data.totalCost.fAuxPrice3MonthMin,a.loading=!1):a.$message.error(e.msg)})}Array.prototype.remove=function(t){var e=this.indexOf(t);e>-1&&this.splice(e,1)},this.expands.indexOf(t.CusBomId)<0?(this.expands=[],this.bomParamsId&&this.expands.push(t.CusBomId)):""!=e&&this.expands.remove(t.CusBomId)},rowExpand:function(t,e){var o=this,a=this.formQuery.bomLimitNum,r=this.formQuery.bomLimit,l=this.formQuery.bomCheck;Object(i.f)(t.CusBomId,t.mateCategory,a,r,l).then(function(e){e.result?(t.childrenData=e.data.bomMatchList,o.currentRow.checkStatus=e.data.bomList.checkStatus,o.currentRow.checkCode=e.data.bomList.checkCode,o.currentRow.fStockQty=e.data.bomList.fStockQty,o.currentRow.fStockPrice=o.returnFloat(e.data.bomList.fStockPrice),o.currentRow.fStockPriceTotal=o.returnFloat(e.data.bomList.fStockPriceTotal),o.currentRow.fAuxPriceDiscount=o.returnFloat(e.data.bomList.fAuxPriceDiscount),o.currentRow.fAuxPriceDiscountTotal=o.returnFloat(e.data.bomList.fAuxPriceDiscountTotal),o.fillPercent=e.data.totalCost.chosenNum/e.data.totalCost.totalNum*100,100==o.fillPercent&&(o.color="green"),o.totalNum=e.data.totalCost.totalNum,o.fAuxPriceTotal=e.data.totalCost.fAuxPriceDiscount,o.fAuxPrice3MonthMaxTotal=e.data.totalCost.fAuxPrice3MonthMax,o.fAuxPrice3MonthMinTotal=e.data.totalCost.fAuxPrice3MonthMin,o.loading=!1):o.$message.error(e.msg)}),e.length>1&&e.shift()},doDelete:function(t){var e=this,o=t;Object(i.b)(o).then(function(t){t.result?(e.$message({message:t.msg,type:"success"}),e.$router.push({path:"clientBomList",query:{}})):e.$message.error(t.msg)})},handleSelectionChange:function(t){this.multipleSelection=t},clickParent:function(){this.$refs.modelChild.showDialog()},exportBom:function(){window.location.href="http://113.106.72.75:9345/logistics//customerBom/getBomExcel?fileId="+this.fileId},exportBomPrice:function(){window.location.href="http://113.106.72.75:9345/logistics//customerBom/getBomExcelPrice?fileId="+this.fileId},copy:function(){var t=this,e=this.$route.query.fileId;Object(i.a)(e).then(function(e){e.result?(t.$message({message:e.msg,type:"success"}),t.$router.push({path:"clientBomList",query:{}})):t.$message.error(e.msg)})},showDoc:function(){var t=this;this.dialog.docVisible=!0,this.dialog.bsFileId=this.fileId,Object(h.c)(this.fileId,"").then(function(e){e.result?t.docList=e.data:t.$message.error(e.msg)})},addDoc:function(t){var e=this,o=t.target.files[0],a=new FormData;a.append("file",o),a.append("bsFileId",this.dialog.bsFileId),Object(h.a)(a).then(function(t){t.result?(Object(h.c)(e.dialog.bsFileId,"").then(function(t){t.result&&(e.docList=t.data)}),e.$message.info(t.msg)):e.$message.error(t.msg)})},addDocBefore:function(){this.$refs["doc-upload-input"].click()},deleteDoc:function(t){var e=this,o=t.id;Object(h.b)(o).then(function(t){t.result?(Object(h.c)(e.dialog.bsFileId,"").then(function(t){t.result&&(e.docList=t.data)}),e.$message.info(t.msg)):e.$message.error(t.msg)})},downloadDoc:function(t){window.location.href="http://113.106.72.75:9345/logistics//file/get?fsFileId="+t},toggleSelection:function(){for(var t=this,e=this.tableData,o=[],a=0;a<e.length;a++){var r=e[a];1!=r.checkStatus&&o.push(r)}o.length>0&&o.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e,!0)})},showMateView:function(t){this.showCusBomId=t,this.showMateVisible=!0},searchMate:function(){var t=this,e=r()({},{mateCode:this.mateCode});Object(v.b)(e).then(function(e){e.result?t.showMateList=e.data:t.$message.error(e.msg)})},chooseMate:function(t){var e=this;this.showMateVisible=!1;var o=r()({},{id:t.id,cusBomId:this.showCusBomId});Object(v.a)(o).then(function(t){if(t.result){var o=t.data.id;Object(i.c)(o,1).then(function(o){o.result?(e.currentRow.childrenData=o.data.bomMatchList,e.currentRow.checkStatus=1,e.currentRow.checkCode=o.data.bomList.checkCode,e.currentRow.fStockQty=o.data.bomList.fStockQty,e.currentRow.fStockPrice=e.returnFloat(o.data.bomList.fStockPrice),e.currentRow.fStockPriceTotal=e.returnFloat(o.data.bomList.fStockPriceTotal),e.currentRow.fAuxPriceDiscount=e.returnFloat(o.data.bomList.fAuxPriceDiscount),e.currentRow.fAuxPriceDiscountTotal=e.returnFloat(o.data.bomList.fAuxPriceDiscountTotal),e.fillPercent=o.data.totalCost.chosenNum/o.data.totalCost.totalNum*100,e.fAuxPriceTotal=o.data.totalCost.fAuxPriceDiscount,e.fAuxPrice3MonthMaxTotal=o.data.totalCost.fAuxPrice3MonthMax,e.fAuxPrice3MonthMinTotal=o.data.totalCost.fAuxPrice3MonthMin):e.$message.error(t.msg)})}else e.$message.error(t.msg)})}}},P=(o("QCpz"),Object(d.a)(S,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{directives:[{name:"loading",rawName:"v-loading",value:t.load,expression:"load"}],attrs:{"element-loading-text":"数据加载中，请稍等"}},[o("el-row",{staticStyle:{"margin-bottom":"5px","margin-top":"5px"}},[o("el-col",{attrs:{span:4}},[t.isUpload?o("upload-excel-component",{attrs:{"on-success":t.handleSuccess,"before-upload":t.beforeUpload},on:{afterUpload:t.afterUpload}}):t._e()],1),t._v(" "),o("el-col",{attrs:{span:16}},[o("el-button",{attrs:{type:"button"},on:{click:t.toList}},[t._v("查看历史记录")]),t._v(" "),o("MessageBoxDelete",{attrs:{title:"提示",contents:"此操作将永久删除该行, 是否继续?",confirmTitle:"确认删除"},on:{callConfirm:function(e){t.doDelete(t.fileId)}}})],1),t._v(" "),o("el-col",{attrs:{span:5}})],1),t._v(" "),o("el-collapse",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[o("el-collapse-item",{staticClass:"collapse",attrs:{title:"设置参数",name:"1"}},[o("el-row",[o("el-col",{staticStyle:{"margin-bottom":"-10px"},attrs:{span:24}},[o("el-form",{ref:"formQuery",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formQuery,rules:t.rules,"label-width":"60px","label-position":t.labelPosition}},[o("el-col",{staticStyle:{"margin-bottom":"-10px","margin-top":"5px"},attrs:{span:24}},[o("el-form-item",{attrs:{label:"规格",prop:"standardCol"}},[o("el-select",{staticStyle:{width:"175px"},attrs:{placeholder:"规格列"},model:{value:t.formQuery.standardCol,callback:function(e){t.$set(t.formQuery,"standardCol",e)},expression:"formQuery.standardCol"}},t._l(t.optionHearder,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"数量",prop:"quantityCol"}},[o("el-select",{staticStyle:{width:"170px"},attrs:{placeholder:"数量列"},model:{value:t.formQuery.quantityCol,callback:function(e){t.$set(t.formQuery,"quantityCol",e)},expression:"formQuery.quantityCol"}},t._l(t.optionHearder,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"类别",prop:"categoryCol"}},[o("el-select",{staticStyle:{width:"178px"},attrs:{placeholder:"类别列"},model:{value:t.formQuery.categoryCol,callback:function(e){t.$set(t.formQuery,"categoryCol",e)},expression:"formQuery.categoryCol"}},t._l(t.optionHearder,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"名称"}},[o("el-select",{staticStyle:{width:"170px"},attrs:{placeholder:"名称列"},model:{value:t.formQuery.nameCol,callback:function(e){t.$set(t.formQuery,"nameCol",e)},expression:"formQuery.nameCol"}},t._l(t.optionHearder,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),o("el-col",{staticStyle:{"margin-bottom":"-10px","margin-top":"5px"},attrs:{span:24}},[o("el-form-item",{attrs:{label:"封装"}},[o("el-select",{staticStyle:{width:"170px"},attrs:{placeholder:"封装列"},model:{value:t.formQuery.packageCol,callback:function(e){t.$set(t.formQuery,"packageCol",e)},expression:"formQuery.packageCol"}},t._l(t.optionHearder,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"制造商"}},[o("el-select",{staticStyle:{width:"170px"},attrs:{placeholder:"制造商列"},model:{value:t.formQuery.makerCol,callback:function(e){t.$set(t.formQuery,"makerCol",e)},expression:"formQuery.makerCol"}},t._l(t.optionHearder,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"品牌料号"}},[o("el-select",{staticStyle:{width:"185px"},attrs:{placeholder:"品牌料号"},model:{value:t.formQuery.brandNumberCol,callback:function(e){t.$set(t.formQuery,"brandNumberCol",e)},expression:"formQuery.brandNumberCol"}},t._l(t.optionHearder,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"位号"}},[o("el-select",{staticStyle:{width:"170px"},attrs:{placeholder:"位号"},model:{value:t.formQuery.placeNumberCol,callback:function(e){t.$set(t.formQuery,"placeNumberCol",e)},expression:"formQuery.placeNumberCol"}},t._l(t.optionHearder,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),o("el-col",{staticStyle:{"margin-bottom":"-10px","margin-top":"5px"},attrs:{span:24}},[o("el-form-item",{attrs:{label:"选中比例"}},[o("el-input",{staticStyle:{width:"170px"},model:{value:t.formQuery.bomCheck,callback:function(e){t.$set(t.formQuery,"bomCheck",e)},expression:"formQuery.bomCheck"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"限制比例"}},[o("el-input",{staticStyle:{width:"170px"},model:{value:t.formQuery.bomLimit,callback:function(e){t.$set(t.formQuery,"bomLimit",e)},expression:"formQuery.bomLimit"}})],1),t._v(" "),o("el-form-item",{staticStyle:{width:"232px"},attrs:{label:"是否筛选客供料",prop:"","label-width":"140px"}},[o("el-switch",{staticClass:"demo",attrs:{"active-value":1,"inactive-value":0,"active-text":"是","inactive-text":"否","active-color":"#13ce66","inactive-color":"#ccc"},model:{value:t.formQuery.isCustomer,callback:function(e){t.$set(t.formQuery,"isCustomer",e)},expression:"formQuery.isCustomer"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"是否筛选已匹配的物料",prop:"","label-width":"140px"}},[o("el-switch",{staticClass:"demo",attrs:{"active-value":1,"inactive-value":0,"active-text":"是","inactive-text":"否","active-color":"#13ce66","inactive-color":"#ccc"},model:{value:t.formQuery.isMatchAll,callback:function(e){t.$set(t.formQuery,"isMatchAll",e)},expression:"formQuery.isMatchAll"}})],1)],1),t._v(" "),o("el-col",{staticStyle:{"margin-bottom":"-10px","margin-top":"5px"},attrs:{span:24}},[o("el-form-item",{attrs:{label:"匹配数量"}},[o("el-input",{staticStyle:{width:"170px"},model:{value:t.formQuery.bomLimitNum,callback:function(e){t.$set(t.formQuery,"bomLimitNum",e)},expression:"formQuery.bomLimitNum"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"规格的分隔符","label-width":"140px"}},[o("el-checkbox-group",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},[o("el-checkbox",{attrs:{label:"1"}},[t._v("/")]),t._v(" "),o("el-checkbox",{attrs:{label:"2"}},[t._v(",")]),t._v(" "),o("el-checkbox",{attrs:{label:"3"}},[t._v(";")]),t._v(" "),o("el-checkbox",{attrs:{label:"4"}},[t._v("-")]),t._v(" "),o("el-checkbox",{attrs:{label:"5"}},[t._v("、")]),t._v(" "),o("el-checkbox",{attrs:{label:"6"}},[t._v("*")]),t._v(" "),o("el-checkbox",{attrs:{label:"7"}},[t._v("空格")]),t._v(" "),o("el-checkbox",{attrs:{label:"8"}},[t._v("中文逗号")])],1)],1)],1),t._v(" "),o("el-col",{staticStyle:{"margin-bottom":"-10px","margin-top":"5px"},attrs:{span:24}},[o("el-form-item",{attrs:{label:"套数"}},[o("el-input",{staticStyle:{width:"170px"},model:{value:t.formQuery.bomNumber,callback:function(e){t.$set(t.formQuery,"bomNumber",e)},expression:"formQuery.bomNumber"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"排序方案"}},[o("el-select",{staticStyle:{width:"170px"},attrs:{placeholder:"排序方案"},model:{value:t.formQuery.bsSortPlan,callback:function(e){t.$set(t.formQuery,"bsSortPlan",e)},expression:"formQuery.bsSortPlan"}},t._l(t.optionSort,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"K3代码"}},[o("el-input",{staticStyle:{width:"170px"},model:{value:t.formQuery.bomK3CodeCol,callback:function(e){t.$set(t.formQuery,"bomK3CodeCol",e)},expression:"formQuery.bomK3CodeCol"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"K3代码导入人"}},[o("el-input",{staticStyle:{width:"170px"},attrs:{disabled:!0},model:{value:t.formQuery.personName,callback:function(e){t.$set(t.formQuery,"personName",e)},expression:"formQuery.personName"}})],1)],1),t._v(" "),o("el-col",[o("el-form-item",{staticStyle:{"margin-left":"40px"}},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.doSimilarity("formQuery")}}},[t._v("开始匹配K3数据")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.clickParent}},[t._v("新料询价")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.exportBom()}}},[t._v("导出Excel")]),t._v(" "),t.isBomPrice?o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.exportBomPrice()}}},[t._v("导出Excel(含价格)")]):t._e(),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.copy()}}},[t._v("复制")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showDoc()}}},[t._v("附件管理")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.toggleSelection()}}},[t._v("勾选未匹配行")]),t._v(" "),t.isUpload?o("upload-code-component",{attrs:{"on-success":t.handleSuccess,"before-upload":t.beforeUpload,bomParamId:t.bomParamsId,fileId:t.fileId,bomK3CodeCol:t.formQuery.bomK3CodeCol},on:{afterUpload:t.afterUpload}}):t._e()],1)],1)],1)],1)],1)],1),t._v(" "),t.isShowTable?o("el-collapse-item",{staticClass:"collapse",attrs:{title:"汇总信息",name:"2"}},[o("el-row",{staticStyle:{"margin-bottom":"10px"}},[o("el-col",{staticStyle:{"margin-left":"10px"},attrs:{span:1}},[o("el-tag",[t._v("进度:")])],1),t._v(" "),o("el-col",{staticClass:"progressbox",attrs:{span:20}},[o("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,color:t.color,percentage:t.fillPercent,status:"exception"}}),t._v(" "),o("span",{staticClass:"total"},[t._v("总数:"+t._s(this.totalNum))])],1)],1),t._v(" "),t.isBomPrice?o("ul",{staticClass:"priceTotal"},[o("li",[o("p",{staticClass:"num1 num"},[t._v(t._s(this.fAuxPriceTotal))]),t._v(" "),o("p",{staticClass:"label"},[t._v("最近采购价汇总")]),t._v(" "),o("div",{staticClass:"downBtn"},[o("el-button",{attrs:{round:""}},[o("svg-icon",{staticStyle:{width:"45px",height:"45px"},attrs:{"icon-class":"excel"}})],1)],1)]),t._v(" "),o("li",[o("p",{staticClass:"num2 num"},[t._v(t._s(this.fAuxPrice3MonthMaxTotal))]),t._v(" "),o("p",{staticClass:"label"},[t._v("三个月之内最高价汇总")]),t._v(" "),o("div",{staticClass:"downBtn"},[o("el-button",{attrs:{round:""}},[o("svg-icon",{staticStyle:{width:"45px",height:"45px"},attrs:{"icon-class":"excel"}})],1)],1)]),t._v(" "),o("li",[o("p",{staticClass:"num3 num"},[t._v(t._s(this.fAuxPrice3MonthMinTotal))]),t._v(" "),o("p",{staticClass:"label"},[t._v("三个月之内最低价汇总")]),t._v(" "),o("div",{staticClass:"downBtn"},[o("el-button",{attrs:{round:""}},[o("svg-icon",{staticStyle:{width:"45px",height:"45px"},attrs:{"icon-class":"excel"}})],1)],1)])]):t._e()],1):t._e()],1),t._v(" "),o("el-table",{directives:[{name:"show",rawName:"v-show",value:!t.isShowTable,expression:"!isShowTable"}],staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.tableData,border:""}},t._l(t.tableHeader,function(t){return o("el-table-column",{key:t,attrs:{prop:t,label:t,"show-overflow-tooltip":""}})})),t._v(" "),o("el-table",{directives:[{name:"show",rawName:"v-show",value:t.isShowTable,expression:"isShowTable"}],ref:"multipleTable",staticClass:"sometable",staticStyle:{"overflow-x":"auto"},attrs:{"max-height":"600",data:t.tableData,border:"","row-class-name":t.tableRowClassName,"row-key":"CusBomId","expand-row-keys":t.expands},on:{"expand-change":t.rowExpand,"row-click":t.rowClick,"selection-change":t.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"45"}}),t._v(" "),o("el-table-column",{attrs:{type:"expand",prop:"children"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[o("el-button",{staticStyle:{"margin-top":"10px","margin-left":"47px"},attrs:{type:"primary"},on:{click:function(o){t.showMateView(e.row.CusBomId)}}},[t._v("查询物料")]),t._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"1154px","margin-top":"10px","margin-left":"47px","font-size":"12px"},attrs:{data:e.row.childrenData,border:"","element-loading-text":"数据加载中，请稍等","highlight-current-row":!0}},[o("el-table-column",{attrs:{label:"序号",type:"index",width:"50","show-overflow-tooltip":"",fixed:""}}),t._v(" "),o("el-table-column",{attrs:{prop:"fNumber",label:"物料编号",width:"110","show-overflow-tooltip":"",fixed:""}}),t._v(" "),o("el-table-column",{attrs:{prop:"fName",label:"物料名称",width:"90","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"fModel",label:"物料规格",width:"283","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"mateCusName",label:"品牌",width:"100","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"mateCusCode",label:"品牌料号",width:"100","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"ratio",label:"匹配率",width:"100","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"fStockQty",label:"库存数量",width:"100","show-overflow-tooltip":""}}),t._v(" "),t.isBomPrice?o("el-table-column",{attrs:{prop:"fStockPrice",label:"库存单价",width:"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t.returnFloat(e.row.fStockPrice)))])]}}])}):t._e(),t._v(" "),t.isBomPrice?o("el-table-column",{attrs:{prop:"fAuxPriceDiscount",label:"最近采购价",width:"80","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t.returnFloat(e.row.fAuxPriceDiscount)))])]}}])}):t._e(),t._v(" "),o("el-table-column",{attrs:{prop:"suppChineseName",label:"供应商",width:"100","show-overflow-tooltip":""}}),t._v(" "),t.isBomPrice?o("el-table-column",{attrs:{prop:"fStockPriceTotal",label:"库存金额",width:"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t.returnFloat(e.row.fStockPriceTotal)))])]}}])}):t._e(),t._v(" "),t.isBomPrice?o("el-table-column",{attrs:{prop:"fAuxPriceDiscountTotal",label:"最近采购金额",width:"80","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t.returnFloat(e.row.fAuxPriceDiscountTotal)))])]}}])}):t._e(),t._v(" "),t.isBomPrice?o("el-table-column",{attrs:{prop:"price1",label:"价格1",width:"80","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t.returnFloat(e.row.price1)))])]}}])}):t._e(),t._v(" "),t.isBomPrice?o("el-table-column",{attrs:{prop:"price2",label:"价格2",width:"80","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t.returnFloat(e.row.price2)))])]}}])}):t._e(),t._v(" "),t.isBomPrice?o("el-table-column",{attrs:{prop:"price3",label:"价格3",width:"80","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t.returnFloat(e.row.price3)))])]}}])}):t._e(),t._v(" "),t.isBomPrice?o("el-table-column",{attrs:{prop:"price4",label:"价格4",width:"80","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t.returnFloat(e.row.price4)))])]}}])}):t._e(),t._v(" "),t.isBomPrice?o("el-table-column",{attrs:{prop:"fAuxPrice3MonthMax",label:"三个月内的最高价",width:"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t.returnFloat(e.row.fAuxPrice3MonthMax)))])]}}])}):t._e(),t._v(" "),t.isBomPrice?o("el-table-column",{attrs:{prop:"fAuxPrice3MonthMin",label:"三个月内的最低价",width:"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t.returnFloat(e.row.fAuxPrice3MonthMin)))])]}}])}):t._e(),t._v(" "),o("el-table-column",{attrs:{prop:"smtPoints",label:"SMT点数",width:"100","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"smtFeetQty",label:"SMT焊盘数量",width:"100","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"smtPointsTotal",label:"SMT点数总和",width:"100","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"modifiedName",label:"修改人",width:"100","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{label:"状态",width:"100",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.checkStatus?o("span",{staticStyle:{color:"green","font-weight":"bold"}},[t._v("未选中")]):t._e(),t._v(" "),1===e.row.checkStatus?o("span",{staticStyle:{color:"red","font-weight":"bold"}},[t._v("已选中")]):t._e()]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"取消/选中",width:"100",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.checkStatus?o("el-button",{attrs:{type:"success",icon:"el-icon-check"},on:{click:function(o){t.doCheck("1",e.row)}}},[t._v("选中")]):t._e(),t._v(" "),1===e.row.checkStatus?o("el-button",{attrs:{type:"danger",icon:"el-icon-close"},on:{click:function(o){t.doCheck("0",e.row)}}},[t._v("取消")]):t._e()]}}])})],1)],1)]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"筛选大类",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-select",{attrs:{clearable:"",placeholder:"请选择物料大类"},on:{change:function(o){t.onSelectedCategory(o,e.row)}},model:{value:e.row.mateCategory,callback:function(o){t.$set(e.row,"mateCategory",o)},expression:"scope.row.mateCategory"}},t._l(t.meriOption,function(e){return o("el-option",{key:e.fNumber,attrs:{label:e.fName,value:e.fNumber}},[o("span",{staticStyle:{float:"left"}},[t._v(t._s(e.fNumber))]),t._v(" "),o("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.fName))])])}))]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"是否匹配",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",[t._v(t._s(t.formatStatus(e.row.checkStatus)))])]}}])}),t._v(" "),t._l(t.tableHeader,function(e){return"mateCategory"!=e?o("el-table-column",{key:e,attrs:{prop:e,label:e,width:"100","show-overflow-tooltip":""}}):t._e()}),t._v(" "),o("el-table-column",{attrs:{prop:"checkCode",label:"选中的物料号",width:"120","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"fStockQty",label:"库存数量",width:"110","show-overflow-tooltip":""}}),t._v(" "),t.isBomPrice?o("el-table-column",{attrs:{prop:"fStockPrice",label:"库存单价",width:"100","show-overflow-tooltip":""}}):t._e(),t._v(" "),t.isBomPrice?o("el-table-column",{attrs:{prop:"fStockPriceTotal",label:"库存金额",width:"100","show-overflow-tooltip":""}}):t._e(),t._v(" "),t.isBomPrice?o("el-table-column",{attrs:{prop:"fAuxPriceDiscount",label:"最新采购价",width:"100","show-overflow-tooltip":""}}):t._e(),t._v(" "),t.isBomPrice?o("el-table-column",{attrs:{prop:"fAuxPriceDiscountTotal",label:"最新采购金额",width:"100","show-overflow-tooltip":""}}):t._e()],2),t._v(" "),o("matermodel",{ref:"modelChild",attrs:{visible:t.dialog.modal_dialog,multipleSelection:t.multipleSelection}}),t._v(" "),o("el-dialog",{attrs:{title:"附件管理",visible:t.dialog.docVisible,width:"500px"},on:{"update:visible":function(e){t.$set(t.dialog,"docVisible",e)}}},[o("div",[o("input",{ref:"doc-upload-input",staticClass:"doc-upload-input",attrs:{type:"file"},on:{change:t.addDoc}}),t._v(" "),o("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{size:"mini",type:"primary"},on:{click:t.addDocBefore}},[t._v("添加附件")])],1),t._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.docList,"tooltip-effect":"dark"}},[o("el-table-column",{attrs:{prop:"no",label:"序号","show-overflow-tooltip":"",width:"60"}}),t._v(" "),o("el-table-column",{attrs:{prop:"bsDocName",label:"附件名称","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary",icon:"el-icon-download",size:"mini",circle:""},on:{click:function(o){t.downloadDoc(e.row.bsDocId)}}}),t._v(" "),o("MessageBoxDelete",{attrs:{title:"提示",contents:"此操作将永久删除该行, 是否继续?",confirmTitle:"确认删除"},on:{callConfirm:function(o){t.deleteDoc(e.row)}}})]}}])})],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{staticClass:"el-icon-check",attrs:{type:"primary"},on:{click:function(e){t.dialog.docVisible=!1}}},[t._v("关闭")])],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"K3物料列表",visible:t.showMateVisible,width:"1000px"},on:{"update:visible":function(e){t.showMateVisible=e}}},[o("div",[o("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[o("el-form-item",{attrs:{label:"物料编号"}},[o("el-input",{attrs:{placeholder:"请准确输入物料编号"},model:{value:t.mateCode,callback:function(e){t.mateCode=e},expression:"mateCode"}})],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.searchMate}},[t._v("查找")])],1)],1)],1),t._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.showMateList,"tooltip-effect":"dark"}},[o("el-table-column",{attrs:{prop:"mateK3Code",label:"编号","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"mateName",label:"名称","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"mateModel",label:"规格","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{prop:"suppChineseName",label:"供应商名称","show-overflow-tooltip":""}}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"primary"},on:{click:function(o){t.chooseMate(e.row)}}},[t._v("选择")])]}}])})],1),t._v(" "),o("div",{staticClass:"mateFooter"},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showMateVisible=!1}}},[t._v("关闭")])],1)],1)],1)},[],!1,null,null,null));P.options.__file="clientBomRate.vue";e.default=P.exports},HQxi:function(t,e,o){"use strict";o.d(e,"a",function(){return r}),o.d(e,"b",function(){return l}),o.d(e,"c",function(){return i}),o.d(e,"d",function(){return s});var a=o("t3Un");function r(t){return Object(a.a)({headers:{"Content-Type":"multipart/form-data"},url:"/customerBomFile/add",method:"post",data:t})}function l(t){return Object(a.a)({url:"/customerBomFile/delete",method:"post",params:{id:t}})}function i(t,e){return Object(a.a)({url:"/customerBomFile/getDocList",method:"get",params:{bsFileId:t,bsCusBomId:e}})}function s(t){return Object(a.a)({url:"/customerBomFile/getDocListOnTodo",method:"get",params:{bsReferId:t}})}},Idwt:function(t,e,o){},Io5o:function(t,e,o){},KUSc:function(t,e,o){},QCpz:function(t,e,o){"use strict";var a=o("Idwt");o.n(a).a},QF9X:function(t,e,o){"use strict";o.d(e,"k",function(){return r}),o.d(e,"g",function(){return l}),o.d(e,"f",function(){return i}),o.d(e,"e",function(){return s}),o.d(e,"b",function(){return n}),o.d(e,"d",function(){return c}),o.d(e,"i",function(){return u}),o.d(e,"j",function(){return m}),o.d(e,"c",function(){return d}),o.d(e,"a",function(){return f}),o.d(e,"h",function(){return p});var a=o("t3Un");function r(t){return Object(a.a)({headers:{"Content-Type":"multipart/form-data"},url:"/customerBom/importBom",method:"post",data:t})}function l(t){return Object(a.a)({url:"/customerBom/getK3Bom",method:"get",params:t})}function i(t,e,o,r,l){return Object(a.a)({url:"/customerBom/getBomMatch",method:"get",params:{cusBomId:t,mateCategory:e,topNum:o,matchNum:r,settingValue:l}})}function s(t,e,o){return Object(a.a)({url:"/customerBom/getBomList",method:"get",params:{keyWord:t,page:o,rows:e}})}function n(t){return Object(a.a)({url:"/customerBom/delete",method:"post",params:{fileId:t}})}function c(t){return Object(a.a)({url:"/customerBom/getBomData",method:"get",params:{fileId:t}})}function u(t,e,o,r){return Object(a.a)({url:"/costChart/getPriceChart",method:"get",params:{mateK3Code:t,startDate:e,endDate:o,flag:r}})}function m(t,e){return Object(a.a)({url:"/customerBom/addRemark",method:"post",params:{id:t,remark:e}})}function d(t,e){return Object(a.a)({url:"/customerBom/doCheckMateriel",method:"post",params:{id:t,checkStatus:e}})}function f(t){return Object(a.a)({url:"/customerBom/copyBom",method:"post",params:{fileId:t}})}function p(t){return Object(a.a)({url:"/prdChart/getPrice",method:"get",params:t})}},i2sM:function(t,e,o){"use strict";o.d(e,"b",function(){return r}),o.d(e,"a",function(){return l}),o.d(e,"c",function(){return i});var a=o("t3Un");function r(t){return Object(a.a)({url:"/costMate/getMateList",method:"get",params:t})}function l(t){return Object(a.a)({url:"/costMate/addMate",method:"post",params:t})}function i(t){return Object(a.a)({headers:{"Content-Type":"multipart/form-data"},url:"/costMate/getK3Mate",method:"post",data:t})}},iEdf:function(t,e,o){"use strict";var a={props:{contents:{type:String,default:"这是一段内容"},title:{type:String,default:"标题名称"},confirmTitle:{type:String,default:"确认"}},methods:{open:function(){var t=this,e=this;this.$confirm(this.contents,this.title,{distinguishCancelAndClose:!0,confirmButtonText:this.confirmTitle,cancelButtonText:"取消",showClose:!0,type:"warning"}).then(function(){e.$emit("callConfirm")}).catch(function(){t.$message({type:"info",message:"已取消删除"})})}}},r=o("ZrdR"),l=Object(r.a)(a,function(){var t=this.$createElement;return(this._self._c||t)("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:this.open}},[this._v("删除")])},[],!1,null,null,null);l.options.__file="MessageBox.vue";e.a=l.exports},"wk8/":function(t,e,o){"use strict";o.d(e,"a",function(){return r}),o.d(e,"f",function(){return l}),o.d(e,"d",function(){return i}),o.d(e,"c",function(){return s}),o.d(e,"b",function(){return n}),o.d(e,"g",function(){return c}),o.d(e,"e",function(){return u});var a=o("t3Un");function r(t){return Object(a.a)({url:"/sysUser/add",method:"post",data:t})}function l(t,e,o,r,l){return Object(a.a)({url:"/sysUser/getlist",method:"get",params:{username:e,usercode:t,userType:o,page:l,rows:r}})}function i(t){return Object(a.a)({url:"/sysUser/edite",method:"post",data:t})}function s(t){return Object(a.a)({url:"/sysUser/delete",method:"post",params:{id:t}})}function n(t,e,o,r){return Object(a.a)({url:"/sysUser/changePassword",method:"post",params:{loginName:t,oldPassword:e,password:o,rePassword:r}})}function c(t,e,o){return Object(a.a)({url:"/sysUser/resetPassword",method:"post",params:{id:t,password:e,rePassword:o}})}function u(t,e){return Object(a.a)({url:"/sysUser/forgotPassword",method:"post",params:{loginName:t,email:e}})}},zF5t:function(t,e,o){"use strict";o.d(e,"a",function(){return r}),o.d(e,"g",function(){return l}),o.d(e,"e",function(){return i}),o.d(e,"i",function(){return s}),o.d(e,"d",function(){return n}),o.d(e,"c",function(){return c}),o.d(e,"b",function(){return u}),o.d(e,"h",function(){return m}),o.d(e,"f",function(){return d});var a=o("t3Un");function r(t){return Object(a.a)({url:"/sysRole/add",method:"post",data:t})}function l(t,e,o,r){return Object(a.a)({url:"/sysRole/getlist",method:"get",params:{roleCode:t,roleName:e,page:o,rows:r}})}function i(t){return Object(a.a)({url:"/sysRole/getCheckedRoles",method:"get",params:{userId:t}})}function s(t,e){return Object(a.a)({url:"/sysRole/saveUserRoles",method:"get",params:{userId:t,roles:e}})}function n(t){return Object(a.a)({url:"/sysRole/edite",method:"post",data:t})}function c(t){return Object(a.a)({url:"/sysRole/delete",method:"post",params:{id:t}})}function u(t){return Object(a.a)({url:"/sysRole/addRouter",method:"get",params:t})}function m(t){return Object(a.a)({url:"/sysRole/getRouter",method:"get",params:{roleCode:t}})}function d(t){return Object(a.a)({url:"/sysRole/getPermission",method:"get",params:t})}}}]);