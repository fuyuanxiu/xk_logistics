(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1980"],{"9f1b":function(t,e,a){},"H8/Y":function(t,e,a){"use strict";a.d(e,"b",function(){return l}),a.d(e,"h",function(){return s}),a.d(e,"g",function(){return i}),a.d(e,"f",function(){return r}),a.d(e,"d",function(){return n}),a.d(e,"a",function(){return c}),a.d(e,"e",function(){return u}),a.d(e,"c",function(){return d});var o=a("t3Un");function l(t){return Object(o.a)({url:"/quote/doQuote",method:"post",data:t})}function s(t,e,a,l,s,i){return Object(o.a)({url:"/quote/getlist",method:"get",params:{qtStatus:t,keyword:e,startDate:a,endDate:l,page:i,rows:s}})}function i(t){return Object(o.a)({url:"/quote/getQuoteInfo",method:"get",params:{id:t}})}function r(t){return Object(o.a)({url:"/quote/getAllQuoteList",method:"get",params:t})}function n(t){return Object(o.a)({url:"/quote/doAccept",method:"post",params:t})}function c(t){return Object(o.a)({url:"/quoteMateriel/addByNum",method:"post",params:t})}function u(t){return Object(o.a)({url:"/quoteMateriel/edit",method:"post",params:t})}function d(t){return Object(o.a)({headers:{"Content-Type":"multipart/form-data"},url:"/quoteMateriel/addQuoteExcel",method:"post",data:t})}},NFXR:function(t,e,a){"use strict";a.r(e);var o=a("6ZY3"),l=a.n(o),s=a("H8/Y"),i={name:"quoAdd",components:{},data:function(){return{loading:!1,activeName:"first",mateList:[],suppList:[],enquiryData:[],quoteData:{qtMateList:[]},formatStata:function(t){return{0:"否",1:"是"}[t]},ruleForm:{qtStartDate:[{required:!0,message:"填写报价日期",trigger:"blur"}],qtDeadLine:[{required:!0,message:"填写有效期",trigger:"blur"}]},statusFilter:function(t){return{1:"info",2:"primary",3:"primary",4:"success",5:"danger"}[t]},formatQt:function(t){return{1:"未报价",2:"已报价",3:"审核中",4:"已采纳",5:"未采纳"}[t]},addForm:{},dialog:{docVisible:!1}}},created:function(){this.getData()},methods:{calculateTotal:function(t){return t.bsTaxTotalPrice=t.bsTaxUnitPrice*t.bsRealNum,t.bsTaxTotalPrice},handleSubmit:function(t){this.getData()},getData:function(){var t=this,e=this.$route.query.id;Object(s.g)(e).then(function(e){t.loading=!1,e.result?(t.enquiryData=e.data.enquiryData,t.quoteData=e.data.quoteData,t.mateList=e.data.mateList,t.suppList=e.data.suppList):t.$message.error(res.msg)})},hanleAddQuote:function(){var t=this;this.quoteData.qtMateList=this.mateList,this.loading=!0,void 0!=this.$route.query.id?Object(s.b)(this.quoteData).then(function(e){t.loading=!1,e.result?t.$message.info(e.msg):t.$message.error(e.msg)}):(this.loading=!1,this.$message.error("报价不存在"))},backList:function(){this.$router.push({path:"quoList",query:{}})},showAddDialog:function(t){this.addForm.id=t.id,this.addForm.mateName=t.mateName,this.addForm.mateModel=t.mateModel,this.addForm.qtMateNum=t.qtMateNum,this.addForm.bsRealNum=t.bsRealNum,this.dialog.docVisible=!0},doAdd:function(){var t=this,e=l()({},{id:this.addForm.id,bsRealNum:this.addForm.bsRealNum});Object(s.a)(e).then(function(e){e.result?(t.dialog.docVisible=!1,t.$message.info(e.msg),t.getData()):t.$message.error(e.msg)})},saveQuote:function(t){var e=this;Object(s.e)(t).then(function(t){t.result?(e.$message.info(t.msg),e.getData()):e.$message.error(t.msg)})},getExcel:function(){window.location.href="http://113.106.72.75:9345/logistics//quoteMateriel/getQuoteExcel?qtId="+this.$route.query.id},addDoc:function(t){var e=this,a=t.target.files[0];if(null!=a&&void 0!=a){var o=new FormData;o.append("file",a),Object(s.c)(o).then(function(t){t.result?(null!=t.data&&t.data.length>0&&(e.mateList=t.data),e.$message.info(t.msg)):e.$message.error(t.msg)})}},addDocBefore:function(){this.$refs["doc-upload-input"].click()}}},r=(a("WkVw"),a("ZrdR")),n=Object(r.a)(i,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"15px 15px"}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[a("el-col",{staticStyle:{"padding-top":"5px"},attrs:{span:20}},[a("span",[t._v("供应商报价")])]),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"mini"},on:{click:t.backList}},[t._v("返回列表")])],1)],1)],1),t._v(" "),a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"填写报价单",name:"first"}},[a("div",{staticClass:"detail-table"},[a("h3",{staticClass:"conttitle"},[t._v("报价标题")]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:14}},[a("el-input",{staticStyle:{width:"350px"},attrs:{placeholder:"报价标题"},model:{value:t.quoteData.qtTitle,callback:function(e){t.$set(t.quoteData,"qtTitle",e)},expression:"quoteData.qtTitle"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"detail-table"},[a("h3",{staticClass:"conttitle"},[t._v("产品报价")]),t._v(" "),a("div",{staticStyle:{"margin-top":"5px","margin-bottom":"5px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.getExcel}},[t._v("导出")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addDocBefore}},[t._v("导入")]),t._v(" "),a("input",{ref:"doc-upload-input",staticClass:"doc-upload-input",attrs:{type:"file"},on:{change:t.addDoc}})],1),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:t.mateList,"tooltip-effect":"dark","highlight-current-row":""}},[a("el-table-column",{attrs:{fixed:"left",prop:"mateModel",label:"规格型号","show-overflow-tooltip":"",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mateName",label:"物料名称","show-overflow-tooltip":"",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"qtUnit",label:"单位","show-overflow-tooltip":"",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticStyle:{background:"none",border:"none",width:"100%"},model:{value:e.row.qtUnit,callback:function(a){t.$set(e.row,"qtUnit",a)},expression:"scope.row.qtUnit"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"qtMateNum",label:"预计数量","show-overflow-tooltip":"",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bsRealNum",label:"报价数量","show-overflow-tooltip":"",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticStyle:{background:"none",border:"none",width:"100%"},model:{value:e.row.bsRealNum,callback:function(a){t.$set(e.row,"bsRealNum",a)},expression:"scope.row.bsRealNum"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"bsTaxUnitPrice",label:"含税单价","show-overflow-tooltip":"",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticStyle:{background:"none",border:"none",width:"100%"},model:{value:e.row.bsTaxUnitPrice,callback:function(a){t.$set(e.row,"bsTaxUnitPrice",a)},expression:"scope.row.bsTaxUnitPrice"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"bsTaxTotalPrice",label:"含税金额","show-overflow-tooltip":"",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticStyle:{background:"none",border:"none",width:"100%"},model:{value:e.row.bsTaxTotalPrice,callback:function(a){t.$set(e.row,"bsTaxTotalPrice",a)},expression:"scope.row.bsTaxTotalPrice"}},[t._v(t._s(t.calculateTotal(e.row)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"bsDelDeadlineReal",label:"交期(天)","show-overflow-tooltip":"",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticStyle:{background:"none",border:"none",width:"100%"},model:{value:e.row.bsDelDeadlineReal,callback:function(a){t.$set(e.row,"bsDelDeadlineReal",a)},expression:"scope.row.bsDelDeadlineReal"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"bsStatus",label:"报价状态",align:"center","show-overflow-tooltip":"",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tag",{attrs:{type:t.statusFilter(e.row.bsStatus)}},[t._v(t._s(t.formatQt(e.row.bsStatus)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"bsPackageMin",label:"最小包装","show-overflow-tooltip":"",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticStyle:{background:"none",border:"none",width:"100%"},model:{value:e.row.bsPackageMin,callback:function(a){t.$set(e.row,"bsPackageMin",a)},expression:"scope.row.bsPackageMin"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"bsCusName",label:"品牌","show-overflow-tooltip":"",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticStyle:{background:"none",border:"none",width:"100%"},model:{value:e.row.bsCusName,callback:function(a){t.$set(e.row,"bsCusName",a)},expression:"scope.row.bsCusName"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"bsCusCode",label:"品牌料号","show-overflow-tooltip":"",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticStyle:{background:"none",border:"none",width:"100%"},model:{value:e.row.bsCusCode,callback:function(a){t.$set(e.row,"bsCusCode",a)},expression:"scope.row.bsCusCode"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"qtMateDesc",label:"报价备注","show-overflow-tooltip":"",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticStyle:{background:"none",border:"none",width:"100%"},model:{value:e.row.qtMateDesc,callback:function(a){t.$set(e.row,"qtMateDesc",a)},expression:"scope.row.qtMateDesc"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作","show-overflow-tooltip":"",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.saveQuote(e.row)}}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.showAddDialog(e.row)}}},[t._v("添加")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"detail-table"},[a("h3",{staticClass:"conttitle"},[t._v("报价说明")]),t._v(" "),a("el-form",{ref:"form",staticClass:"formStly",attrs:{inline:!0,model:t.quoteData,rules:t.ruleForm,"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"报价日期",prop:"qtStartDate"}},[a("el-date-picker",{staticStyle:{width:"250px"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.quoteData.qtStartDate,callback:function(e){t.$set(t.quoteData,"qtStartDate",e)},expression:"quoteData.qtStartDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"有效期至",prop:"qtDeadLine"}},[a("el-date-picker",{staticStyle:{width:"250px"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.quoteData.qtDeadLine,callback:function(e){t.$set(t.quoteData,"qtDeadLine",e)},expression:"quoteData.qtDeadLine"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"交货期",prop:"qtDelDeadline"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"到款后10个工作日"},model:{value:t.quoteData.qtDelDeadline,callback:function(e){t.$set(t.quoteData,"qtDelDeadline",e)},expression:"quoteData.qtDelDeadline"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"交货地点",prop:"qtDelLocation"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"到款后10个工作日"},model:{value:t.quoteData.qtDelLocation,callback:function(e){t.$set(t.quoteData,"qtDelLocation",e)},expression:"quoteData.qtDelLocation"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"验货方式",prop:"qtAcceptType"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"验货方式"},model:{value:t.quoteData.qtAcceptType,callback:function(e){t.$set(t.quoteData,"qtAcceptType",e)},expression:"quoteData.qtAcceptType"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"付款方式",prop:"qtPayMethod"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"付款方式"},model:{value:t.quoteData.qtPayMethod,callback:function(e){t.$set(t.quoteData,"qtPayMethod",e)},expression:"quoteData.qtPayMethod"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"补充说明",prop:"qtDesc"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"付款方式"},model:{value:t.quoteData.qtDesc,callback:function(e){t.$set(t.quoteData,"qtDesc",e)},expression:"quoteData.qtDesc"}})],1)],1),t._v(" "),a("center",[a("el-button",{staticStyle:{width:"200px","margin-top":"25px"},attrs:{type:"primary"},on:{click:t.hanleAddQuote}},[t._v("确认报价")])],1)],1)]),t._v(" "),a("el-tab-pane",{attrs:{label:"询价单信息",name:"second"}},[a("div",{staticClass:"detail-table"},[a("h3",{staticClass:"conttitle"},[t._v("询价单信息")]),t._v(" "),a("ul",{staticClass:"s-ul"},[a("li",[a("span",{staticClass:"li-name01"},[t._v("询价标题:")]),t._v(" "),a("span",{staticClass:"li-cont"},[t._v(t._s(t.enquiryData.eqTitle))])]),t._v(" "),a("li",[a("span",{staticClass:"li-name01"},[t._v("询价代码:")]),t._v(" "),a("span",{staticClass:"li-cont"},[t._v(t._s(t.enquiryData.eqCode))])]),t._v(" "),a("li",[a("span",{staticClass:"li-name01"},[t._v("询价日期:")]),t._v(" "),a("span",{staticClass:"li-cont"},[t._v(t._s(t.enquiryData.eqStartDate))])]),t._v(" "),a("li",[a("span",{staticClass:"li-name01"},[t._v("截止日期:")]),t._v(" "),a("span",{staticClass:"li-cont"},[t._v(t._s(t.enquiryData.eqDeadLine))])])]),t._v(" "),a("h3",{staticClass:"conttitle"},[t._v("采购要求")]),t._v(" "),a("ul",{staticClass:"s-ul"},[a("li",[a("span",{staticClass:"li-name01"},[t._v("工程地点:")]),t._v(" "),a("span",{staticClass:"li-cont"},[t._v(t._s(t.enquiryData.eqLocation))])]),t._v(" "),a("li",[a("span",{staticClass:"li-name01"},[t._v("付款方式:")]),t._v(" "),a("span",{staticClass:"li-cont",staticStyle:{color:"blue"}},[t._v(t._s(t.enquiryData.eqPayMethod))])]),t._v(" "),a("li",[a("span",{staticClass:"li-name01"},[t._v("是否含税:")]),t._v(" "),1==t.enquiryData.eqIsTax?a("span",{staticClass:"li-cont"},[t._v("是")]):a("span",{staticClass:"li-cont"},[t._v("否")])]),t._v(" "),a("li",[a("span",{staticClass:"li-name01"},[t._v("交货期限:")]),t._v(" "),a("span",{staticClass:"li-cont"},[t._v(t._s(t.enquiryData.eqDelDeadline))])]),t._v(" "),a("li",[a("span",{staticClass:"li-name01"},[t._v("税点:")]),t._v(" "),a("span",{staticClass:"li-cont"},[t._v(t._s(t.enquiryData.eqTaxPoint))])]),t._v(" "),a("li",[a("span",{staticClass:"li-name01"},[t._v("补充信息:")]),t._v(" "),a("span",{staticClass:"li-cont"},[t._v(t._s(t.enquiryData.eqDesc))])])])])]),t._v(" "),a("el-tab-pane",{attrs:{label:"询价供应商",name:"tride"}},[a("div",{staticClass:"detail-table"},[a("h3",{staticClass:"conttitle"},[t._v("询价供应商")]),t._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:t.suppList,"tooltip-effect":"dark","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"suppChineseName",label:"供应商名称","show-overflow-tooltip":"",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppK3Code",label:"供应商编号","show-overflow-tooltip":"",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppContactName",label:"联系人","show-overflow-tooltip":"",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppMobile",label:"电话","show-overflow-tooltip":"",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppFax",label:"传真","show-overflow-tooltip":"",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppEmail",label:"邮箱","show-overflow-tooltip":"",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"eqTotalPrice",label:"报价总金额","show-overflow-tooltip":"",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[null==e.row.eqTotalPrice?a("el-tag",{attrs:{type:"danger"}},[t._v("未报价")]):a("el-tag",[t._v(t._s(e.row.eqTotalPrice))])]}}])})],1)],1)])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"新增报价",visible:t.dialog.docVisible,width:"500px"},on:{"update:visible":function(e){t.$set(t.dialog,"docVisible",e)}}},[a("el-form",{attrs:{inline:!0,model:t.addForm}},[a("el-form-item",{staticStyle:{display:"none"},attrs:{label:"id",prop:"id",hidden:""}},[a("el-input",{model:{value:t.addForm.id,callback:function(e){t.$set(t.addForm,"id",e)},expression:"addForm.id"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"规格型号",prop:"mateModel"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.addForm.mateModel,callback:function(e){t.$set(t.addForm,"mateModel",e)},expression:"addForm.mateModel"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"物料名称",prop:"mateName"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{disabled:!0},model:{value:t.addForm.mateName,callback:function(e){t.$set(t.addForm,"mateName",e)},expression:"addForm.mateName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"预计数量",prop:"qtMateNum"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{disabled:!0},model:{value:t.addForm.qtMateNum,callback:function(e){t.$set(t.addForm,"qtMateNum",e)},expression:"addForm.qtMateNum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"报价数量",prop:"bsRealNum"}},[a("el-input",{staticStyle:{width:"300px"},model:{value:t.addForm.bsRealNum,callback:function(e){t.$set(t.addForm,"bsRealNum",e)},expression:"addForm.bsRealNum"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialog.docVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.doAdd}},[t._v("确 定")])],1)],1)],1)},[],!1,null,null,null);n.options.__file="quoAdd.vue";e.default=n.exports},WkVw:function(t,e,a){"use strict";var o=a("9f1b");a.n(o).a}}]);