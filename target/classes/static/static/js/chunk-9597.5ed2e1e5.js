(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-9597"],{Acpg:function(t,e,a){"use strict";a.d(e,"a",function(){return o}),a.d(e,"c",function(){return s}),a.d(e,"b",function(){return i}),a.d(e,"f",function(){return r}),a.d(e,"d",function(){return p}),a.d(e,"g",function(){return n}),a.d(e,"e",function(){return u});var l=a("t3Un");function o(t){return Object(l.a)({url:"/sysPermission/add",method:"post",params:t})}function s(t){return Object(l.a)({url:"/sysPermission/edit",method:"post",params:t})}function i(t){return Object(l.a)({url:"/sysPermission/delete",method:"post",params:{id:t}})}function r(t,e,a){return Object(l.a)({url:"/sysPermission/getlist",method:"get",params:{keyword:t,page:a,rows:e}})}function p(t,e){return Object(l.a)({url:"/sysPermission/getPermByRouter",method:"post",params:{roleId:t,routerId:e}})}function n(t){return Object(l.a)({url:"/sysPermission/setPerm",method:"post",params:t})}function u(t){return Object(l.a)({url:"/sysPermission/getPermByRouterCode",method:"get",params:{routerCode:t}})}},CFWH:function(t,e,a){"use strict";a.r(e);var l=a("6ZY3"),o=a.n(l),s=a("kaq9"),i=a("prnK"),r=a("Acpg"),p={name:"enqAdd",components:{},data:function(){return{loading:!1,supplierInfo:{suppK3Code:"",suppAliaName:"",suppContactName:"",suppChineseName:"",eqIsOnline:!0,eqIsEmail:!0,suppMobile:"",suppFax:"",suppEmail:"",eqMateDesc:"",suppId:"",suppNum:""},options:{},enquiryData:{eqMateList:[],eqSuppList:[]},ruleForm:{mateModel:[{required:!0,message:"请输入规格型号",trigger:"blur"}]},mateNum:1,suppNum:1,materiel:{mateNum:"",mateName:"",mateModel:"",eqUnit:"",eqMateNum:"",eqMateDesc:""},materielList:[],supplierList:[],dialog:{suppVisible:!1,keyword:""},suppAllList:[],suppSelectedList:[],suppParams:{page:1,rows:5},suppPSList:[5,10,20,30],suppTotal:0,permit:{ADD:!1}}},created:function(){this.getData(),this.getPermit()},methods:{getPermit:function(){var t=this,e=this.$route.name;Object(r.e)(e).then(function(e){if(e.result)if("admin"==e.data)t.permit.ADD=!0;else for(var a=e.data,l=0;l<a.length;l++)"ADD"==a[l].permCode&&(t.permit.ADD=!0);else t.$message.error(e.msg)})},getData:function(){var t=this;if(void 0!=this.$route.query.id){this.loading=!0;var e=this.$route.query.id;Object(s.d)(e).then(function(e){t.loading=!1,e.result?(t.materielList=e.data.mateList,t.supplierList=e.data.suppList,t.enquiryData=e.data.enquiryData):t.$message.error(e.msg)})}},addMateriel:function(){var t=o()({},this.materiel);this.materielList.push(t),this.mateNum++},romoveMateriel:function(t){this.materielList.splice(t,1)},handleSelectSupplier:function(t){this.supplierInfo.suppId=t.id,this.supplierInfo.suppK3Code=t.suppK3Code,this.supplierInfo.suppChineseName=t.suppChineseName,this.supplierInfo.suppAliaName=t.suppAliaName,this.supplierInfo.suppContactName=t.suppContactName,this.supplierInfo.suppMobile=t.suppMobile,this.supplierInfo.suppEmail=t.suppEmail},romoveSupplier:function(t){this.supplierList.splice(t,1)},hanleAddEnquiry:function(){var t=this;0!=this.materielList.length?0!=this.supplierList.length?(this.loading=!0,this.enquiryData.eqMateList=this.materielList,this.enquiryData.eqSuppList=this.supplierList,void 0!=this.$route.query.id?Object(s.c)(this.enquiryData).then(function(e){t.loading=!1,t.$message.info("询价发布成功！")}):Object(s.a)(this.enquiryData).then(function(e){t.loading=!1,t.$message.info(e.msg)})):this.$message.info("供应商信息不允行为空"):this.$message.info("物料信息不允行为空")},getSuppData:function(){var t=this;this.dialog.suppVisible=!0,this.suppSelectedList=[];var e=o()({},this.suppParams,{keyword:this.dialog.keyword});Object(i.i)(e).then(function(e){e.result?(t.suppAllList=e.data.rows,t.suppTotal=e.data.total):t.$message.error(e.msg)})},chooseSupp:function(t){this.suppSelectedList.push(t)},deleteSupp:function(t){this.suppSelectedList.splice(t,1)},addSupplier:function(){for(var t=0;t<this.suppSelectedList.length;t++){var e=this.suppSelectedList[t],a={};a.suppNum=this.suppNum,a.suppId=e.id,a.suppCode=e.suppCode,a.suppK3Code=e.suppK3Code,a.suppChineseName=e.suppChineseName,a.suppAliaName=e.suppAliaName,a.suppContactName=e.suppContactName,a.suppMobile=e.suppMobile,a.suppFax=e.suppFax,a.suppEmail=e.suppEmail,this.supplierList.push(a),this.suppNum++}this.dialog.suppVisible=!1},suppChangePage:function(t){this.suppParams.page=t,this.getSuppData()},suppSizeChange:function(t){this.suppParams.rows=t,this.getSuppData()},getTempByType:function(){window.location.href="http://113.106.72.75:9345/logistics//templates/getTempByType?bsType=1"},addDoc:function(t){var e=this,a=t.target.files[0];if(null!=a&&void 0!=a){var l=new FormData;l.append("file",a),Object(s.f)(l).then(function(t){if(t.result){for(var a=t.data,l=0;l<a.length;l++){var o=a[l],s={};s.mateModel=o.mateModel,s.mateName=o.mateName,s.eqUnit=o.eqUnit,s.eqMateNum=o.eqMateNum,s.eqMateDesc=o.eqMateDesc,e.materielList.push(s),e.mateNum++}e.$message.info(t.msg)}else e.$message.error(t.msg)})}},addDocBefore:function(){this.$refs["doc-upload-input"].click()}}},n=(a("brfl"),a("ZrdR")),u=Object(n.a)(p,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("新增询价单")])]),t._v(" "),a("el-form",{ref:"form",staticClass:"formStly",attrs:{model:t.enquiryData,rules:t.ruleForm,"label-width":"80px",size:"small"}},[a("div",{staticClass:"newcont01 item"},[a("div",{},[a("h3",{staticClass:"conttitle"},[t._v("询价标题")]),t._v(" "),a("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"询价标题",prop:"eqTitle"}},[a("el-input",{model:{value:t.enquiryData.eqTitle,callback:function(e){t.$set(t.enquiryData,"eqTitle",e)},expression:"enquiryData.eqTitle"}})],1)],1)],1)],1)])]),t._v(" "),a("div",{staticClass:"newcont02 item"},[a("div",{staticClass:"enqtitle"},[a("h3",{staticClass:"conttitle"},[t._v("询价物料")]),t._v(" "),a("el-form",{ref:"form",staticClass:"formStly",attrs:{model:t.materiel,rules:t.ruleForm,"label-width":"80px",size:"small"}},[a("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"规格型号",prop:"mateModel"}},[a("el-input",{model:{value:t.materiel.mateModel,callback:function(e){t.$set(t.materiel,"mateModel",e)},expression:"materiel.mateModel"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"物料名称",prop:"mateName"}},[a("el-input",{model:{value:t.materiel.mateName,callback:function(e){t.$set(t.materiel,"mateName",e)},expression:"materiel.mateName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"物料单位",prop:"eqUnit"}},[a("el-input",{model:{value:t.materiel.eqUnit,callback:function(e){t.$set(t.materiel,"eqUnit",e)},expression:"materiel.eqUnit"}})],1)],1)],1),t._v(" "),a("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品牌名称",prop:"bsCusName"}},[a("el-input",{model:{value:t.materiel.bsCusName,callback:function(e){t.$set(t.materiel,"bsCusName",e)},expression:"materiel.bsCusName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"品牌料号",prop:"bsCusCode"}},[a("el-input",{model:{value:t.materiel.bsCusCode,callback:function(e){t.$set(t.materiel,"bsCusCode",e)},expression:"materiel.bsCusCode"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"预计数量",prop:"eqMateNum"}},[a("el-input",{attrs:{type:"number"},model:{value:t.materiel.eqMateNum,callback:function(e){t.$set(t.materiel,"eqMateNum",e)},expression:"materiel.eqMateNum"}})],1)],1)],1),t._v(" "),a("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"补充信息",prop:"eqMateDesc"}},[a("el-input",{model:{value:t.materiel.eqMateDesc,callback:function(e){t.$set(t.materiel,"eqMateDesc",e)},expression:"materiel.eqMateDesc"}})],1)],1),t._v(" "),a("el-col",{staticStyle:{"margin-left":"15px"},attrs:{span:12}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addMateriel}},[t._v("添加物料")]),t._v(" "),a("el-button",{attrs:{type:"warning",icon:"el-icon-download"},on:{click:t.getTempByType}},[t._v("下载物料模板")]),t._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-upload2"},on:{click:t.addDocBefore}},[t._v("导入物料数据")]),t._v(" "),a("input",{ref:"doc-upload-input",staticClass:"doc-upload-input",attrs:{type:"file"},on:{change:t.addDoc}})],1)],1)],1)],1),t._v(" "),[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:t.materielList,"tooltip-effect":"dark","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"mateModel",label:"规格型号","show-overflow-tooltip":"",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mateName",label:"物料名称","show-overflow-tooltip":"",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bsCusName",label:"品牌名称","show-overflow-tooltip":"",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bsCusCode",label:"品牌料号","show-overflow-tooltip":"",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"eqUnit",label:"单位","show-overflow-tooltip":"",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"eqMateNum",label:"预计数量","show-overflow-tooltip":"",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"eqMateDesc",label:"补充信息","show-overflow-tooltip":"",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppGrade",label:"点击取消",fixed:"right","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[a("a",{staticClass:"operatIcon colorblue",on:{click:function(a){t.romoveMateriel(e.row)}}},[a("i",{staticClass:"el-icon-delete"})])])]}}])})],1)]],2),t._v(" "),a("div",{staticClass:"newcont02 item"},[a("div",{staticClass:"enqtitle"},[a("h3",{staticClass:"conttitle"},[t._v("询价供应商")]),t._v(" "),a("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{"margin-left":"15px","margin-bottom":"14px"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.getSuppData}},[t._v("添加供应商")])],1)],1)],1)]),t._v(" "),[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:t.supplierList,"tooltip-effect":"dark","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"50",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppCode",label:"供应商编号","show-overflow-tooltip":"",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppChineseName",label:"供应商全称","show-overflow-tooltip":"",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppK3Code",label:"K3编码","show-overflow-tooltip":"",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppContactName",label:"联系人","show-overflow-tooltip":"",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppMobile",label:"电话","show-overflow-tooltip":"",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppFax",label:"传真","show-overflow-tooltip":"",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppEmail",label:"邮箱","show-overflow-tooltip":"",width:"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppGrade",label:"点击取消",fixed:"right","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[a("a",{staticClass:"operatIcon colorblue",on:{click:function(a){t.romoveSupplier(e.row)}}},[a("i",{staticClass:"el-icon-delete"})])])]}}])})],1)],t._v(" "),a("div",{staticClass:"newcont04"}),t._v(" "),a("center",[t.permit.ADD?a("el-button",{staticStyle:{width:"200px"},attrs:{type:"primary"},on:{click:t.hanleAddEnquiry}},[t._v("确认发布")]):t._e()],1)],2),t._v(" "),a("el-dialog",{attrs:{title:"添加供应商",visible:t.dialog.suppVisible,width:"1000px"},on:{"update:visible":function(e){t.$set(t.dialog,"suppVisible",e)}}},[a("div",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.dialog}},[a("el-form-item",{attrs:{label:"关键字"}},[a("el-input",{attrs:{placeholder:"关键字"},model:{value:t.dialog.keyword,callback:function(e){t.$set(t.dialog,"keyword",e)},expression:"dialog.keyword"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.getSuppData}},[t._v("查找")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.suppAllList,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"id",label:"ID","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppCode",label:"供应商编号","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppChineseName",label:"中文名称","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppK3Code",label:"K3编码","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppContactName",label:"联系人","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppMobile",label:"联系人","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppFax",label:"传真","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppEmail",label:"邮箱","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){t.chooseSupp(e.row)}}},[t._v("选择")])]}}])})],1),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{staticClass:"pull-right clearfix",attrs:{current:1,"current-page":t.suppParams.page,"page-sizes":t.suppPSList,"page-size":t.suppParams.rows,layout:"total, sizes, prev, pager, next, jumper","page-size-opts":t.suppPSList,total:t.suppTotal},on:{"current-change":t.suppChangePage,"size-change":t.suppSizeChange,"update:currentPage":function(e){t.$set(t.suppParams,"page",e)}}})],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.suppSelectedList,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"id",label:"ID","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppCode",label:"供应商编号","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppChineseName",label:"中文名称","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppK3Code",label:"K3编码","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppContactName",label:"联系人","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppMobile",label:"联系人","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppFax",label:"传真","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"suppEmail",label:"邮箱","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger"},on:{click:function(a){t.deleteSupp(e.$index)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"suppFooter"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialog.suppVisible=!1}}},[t._v("关闭")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addSupplier}},[t._v("确认")])],1)],1)],1)},[],!1,null,null,null);u.options.__file="enqAdd.vue";e.default=u.exports},brfl:function(t,e,a){"use strict";var l=a("c8Ms");a.n(l).a},c8Ms:function(t,e,a){},kaq9:function(t,e,a){"use strict";a.d(e,"a",function(){return o}),a.d(e,"b",function(){return s}),a.d(e,"c",function(){return i}),a.d(e,"e",function(){return r}),a.d(e,"d",function(){return p}),a.d(e,"f",function(){return n});var l=a("t3Un");function o(t){return Object(l.a)({url:"/enquiry/add",method:"post",data:t})}function s(t){return Object(l.a)({url:"/enquiry/delete",method:"post",params:{id:t}})}function i(t){return Object(l.a)({url:"/enquiry/edit",method:"post",data:t})}function r(t,e,a,o,s,i){return Object(l.a)({url:"/enquiry/getlist",method:"get",params:{eqStatus:t,keyword:e,startDate:a,endDate:o,page:i,rows:s}})}function p(t){return Object(l.a)({url:"/enquiry/getEnquiryInfo",method:"get",params:{id:t}})}function n(t){return Object(l.a)({headers:{"Content-Type":"multipart/form-data"},url:"/enquiryMateriel/importMateExcel",method:"post",data:t})}},prnK:function(t,e,a){"use strict";a.d(e,"a",function(){return o}),a.d(e,"e",function(){return s}),a.d(e,"b",function(){return i}),a.d(e,"i",function(){return r}),a.d(e,"k",function(){return p}),a.d(e,"j",function(){return n}),a.d(e,"m",function(){return u}),a.d(e,"c",function(){return c}),a.d(e,"l",function(){return m}),a.d(e,"f",function(){return d}),a.d(e,"d",function(){return f}),a.d(e,"h",function(){return h}),a.d(e,"g",function(){return b});var l=a("t3Un");function o(t){return Object(l.a)({url:"/supplierInfo/add",method:"post",data:t})}function s(t){return Object(l.a)({url:"/supplierInfo/edite",method:"post",data:t})}function i(t){return Object(l.a)({url:"/supplierInfo/delete",method:"post",params:{id:t}})}function r(t){return Object(l.a)({url:"/supplierInfo/getlist",method:"get",params:t})}function p(t){return Object(l.a)({url:"/supplierInfo/getlistWithTobe",method:"get",params:t})}function n(t){return Object(l.a)({url:"/supplierInfo/getlistAll",method:"get",params:t})}function u(t){return Object(l.a)({headers:{"Content-Type":"multipart/form-data"},url:"/file/upload",method:"post",data:t})}function c(t){return Object(l.a)({headers:{"Content-Type":"multipart/form-data"},url:"/file/delete",method:"post",params:{fsFileId:t}})}function m(t,e){return Object(l.a)({url:"/supplierInfo/updateStatus",method:"post",params:{idsArray:t,suppGrade:e}})}function d(t){return Object(l.a)({url:"/priceChart/getPriceChart",method:"get",params:t})}function f(){return Object(l.a)({url:"/supplierInfo/doMatchK3",method:"get"})}function h(t){return Object(l.a)({url:"/supplierInfo/getSupplierByLoginName",method:"get",params:{loginName:t}})}function b(t){return Object(l.a)({url:"/supplierInfo/getSupplierByCurrUser",method:"get",params:t})}}}]);