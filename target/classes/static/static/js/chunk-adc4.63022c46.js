(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-adc4"],{Acpg:function(t,e,r){"use strict";r.d(e,"a",function(){return i}),r.d(e,"c",function(){return s}),r.d(e,"b",function(){return o}),r.d(e,"f",function(){return a}),r.d(e,"d",function(){return l}),r.d(e,"g",function(){return u}),r.d(e,"e",function(){return c});var n=r("t3Un");function i(t){return Object(n.a)({url:"/sysPermission/add",method:"post",params:t})}function s(t){return Object(n.a)({url:"/sysPermission/edit",method:"post",params:t})}function o(t){return Object(n.a)({url:"/sysPermission/delete",method:"post",params:{id:t}})}function a(t,e,r){return Object(n.a)({url:"/sysPermission/getlist",method:"get",params:{keyword:t,page:r,rows:e}})}function l(t,e){return Object(n.a)({url:"/sysPermission/getPermByRouter",method:"post",params:{roleId:t,routerId:e}})}function u(t){return Object(n.a)({url:"/sysPermission/setPerm",method:"post",params:t})}function c(t){return Object(n.a)({url:"/sysPermission/getPermByRouterCode",method:"get",params:{routerCode:t}})}},"B/+Q":function(t,e,r){},"Hko+":function(t,e,r){"use strict";var n=r("B/+Q");r.n(n).a},JISu:function(t,e,r){"use strict";var n={props:{contents:{type:String,default:"这是一段内容"},title:{type:String,default:"标题名称"},confirmTitle:{type:String,default:"确认"}},methods:{open:function(){var t=this,e=this;this.$confirm(this.contents,this.title,{distinguishCancelAndClose:!0,confirmButtonText:this.confirmTitle,cancelButtonText:"取消",showClose:!0,type:"warning"}).then(function(){e.$emit("callConfirm")}).catch(function(){t.$message({type:"info",message:"已取消审核"})})}}},i=r("ZrdR"),s=Object(i.a)(n,function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){t.open()}}},[t._v("审核通过")])},[],!1,null,null,null);s.options.__file="messagebox.vue";e.a=s.exports},fAxT:function(t,e,r){"use strict";r.d(e,"g",function(){return i}),r.d(e,"b",function(){return s}),r.d(e,"c",function(){return o}),r.d(e,"d",function(){return a}),r.d(e,"e",function(){return l}),r.d(e,"f",function(){return u}),r.d(e,"a",function(){return c}),r.d(e,"h",function(){return m});var n=r("t3Un");function i(t){return Object(n.a)({url:"/enquiryOrder/getlist",method:"get",params:t})}function s(t){return Object(n.a)({url:"/enquiryOrder/doApproval",method:"post",params:t})}function o(t){return Object(n.a)({url:"/enquiryOrder/doInvalid",method:"post",params:t})}function a(t){return Object(n.a)({url:"/enquiryOrderDetail/getlist",method:"get",params:t})}function l(t){return Object(n.a)({url:"/enquiryOrderDetail/getlist_2",method:"get",params:t})}function u(t){return Object(n.a)({url:"/enquiryOrderDetail/getQuoteMateList",method:"get",params:t})}function c(t){return Object(n.a)({url:"/enquiryOrderDetail/doAccept",method:"post",params:t})}function m(t){return Object(n.a)({url:"/enquiryOrderDetail/sendSuppMsg",method:"post",params:t})}},hJnB:function(t,e,r){"use strict";r.r(e);var n=r("6ZY3"),i=r.n(n),s=r("fAxT"),o=r("Acpg"),a=r("JISu"),l=r("zEcj"),u={name:"enquiryOrderList",components:{messagebox:a.a,messageInvalidBox:l.a},data:function(){return{loading:!1,current:0,open:!0,items:[{sort:"全部"}],enquiryOrderList:[],currentRow:[],multipleSelection:[],queryParams:{page:1,rows:15,bsType:0,keyword:""},pageSizesList:[15,20,30,40,50,100],totalCount:0,statusFilter:function(t){return{1:"success",2:"warinng"}[t]},formatStatus:function(t){return{1:"BOM",2:"询价模板文件"}[t]},statusFilter_1:function(t){return{1:"primary",2:"success",3:"danger"}[t]},formatStatus_1:function(t){return{1:"进行中",2:"审核完成",3:"作废"}[t]},permit:{SEARCH:!1,EDIT:!1,PASS:!1,FORBID:!1}}},created:function(){this.getData(),this.getPermit()},methods:{addClass:function(t){this.current=t},changeStatus:function(t){this.queryParams.bsStatus=t,this.getData()},getPermit:function(){var t=this,e=this.$route.name;Object(o.e)(e).then(function(e){if(e.result)if("admin"==e.data)t.permit.SEARCH=!0,t.permit.EDIT=!0,t.permit.PASS=!0,t.permit.FORBID=!0;else for(var r=e.data,n=0;n<r.length;n++)"SEARCH"==r[n].permCode&&(t.permit.SEARCH=!0),"EDIT"==r[n].permCode&&(t.permit.EDIT=!0),"PASS"==r[n].permCode&&(t.permit.PASS=!0),"FORBID"==r[n].permCode&&(t.permit.FORBID=!0);else t.$message.error(res.msg)})},getData:function(){var t=this,e=i()({},this.queryParams);this.loading=!0,Object(s.g)(e).then(function(e){t.loading=!1,e.result?(t.enquiryOrderList=e.data.rows,t.totalCount=e.data.total):t.$message.error(e.msg)})},handleSelectionChange:function(t){this.multipleSelection=t,t.length>0?this.currentRow=t[t.length-1]:this.currentRow=[]},select:function(t,e){t.length>1&&(t.shift(),this.multipleSelection=t)},approval:function(){var t=this;if(1==this.multipleSelection.length){var e=i()({},{bsOrderId:this.currentRow.id});Object(s.b)(e).then(function(e){e.result?(t.$message.info(e.msg),t.getData()):t.$message.error(e.msg)})}else 0==this.multipleSelection.length?this.$message.error("请选择选择清单！"):this.$message.error("只能选择一个清单！")},invalid:function(){var t=this;if(1==this.multipleSelection.length){var e=i()({},{bsOrderId:this.currentRow.id});Object(s.c)(e).then(function(e){e.result?(t.$message.info(e.msg),t.getData()):t.$message.error(e.msg)})}else 0==this.multipleSelection.length?this.$message.error("请选择选择清单！"):this.$message.error("只能选择一个清单！")},cellClass:function(t){if(0===t.columnIndex)return"disabledSelection"},resetFrom:function(){this.queryParams.keyword=""},viewDetail:function(t){this.$router.push({path:"enquiryOrderDetail",query:{bsOrderId:t.id}})},changePage:function(t){this.queryParams.page=t,this.getData()},sizeChange:function(t){this.queryParams.rows=t,this.getData()}}},c=(r("Hko+"),r("ZrdR")),m=Object(c.a)(u,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"retrieval"},[r("div",{staticClass:"title"},[r("h3",[t._v("状态")]),t._v(" "),r("div",{staticClass:"filter"},[r("ul",t._l(t.items,function(e,n){return r("li",{key:n,class:{current:n==t.current},on:{click:function(e){t.addClass(n)}}},[r("a",{on:{click:function(e){t.changeStatus(n)}}},[r("span",[t._v(t._s(e.sort))])])])}))]),t._v(" "),r("span",{staticClass:"more",on:{click:function(e){t.open=!t.open}}})]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticClass:"searchDiv"},[r("el-form",{ref:"form",staticClass:"formStly",attrs:{model:t.queryParams,size:"small",inline:!0}},[r("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"关键字",prop:"keyword"}},[r("el-input",{model:{value:t.queryParams.keyword,callback:function(e){t.$set(t.queryParams,"keyword",e)},expression:"queryParams.keyword"}})],1),t._v(" "),r("el-form-item",[t.permit.SEARCH?r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.getData}},[t._v("查找")]):t._e(),t._v(" "),r("el-button",{attrs:{type:"info",size:"mini"},on:{click:t.resetFrom}},[t._v("重置")]),t._v(" "),t.permit.PASS?r("messagebox",{attrs:{title:"提示",contents:"此操作将审核通过此清单, 是否继续?",confirmTitle:"确认审核通过"},on:{callConfirm:t.approval}}):t._e(),t._v(" "),t.permit.FORBID?r("messageInvalidBox",{attrs:{title:"提示",contents:"此操作将作废此清单, 是否继续?",confirmTitle:"确认作废"},on:{callConfirm:t.invalid}}):t._e()],1)],1)],1)],1)],1)]),t._v(" "),[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:t.enquiryOrderList,"tooltip-effect":"dark","highlight-current-row":"","header-cell-class-name":t.cellClass},on:{select:t.select,"selection-change":t.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"45",disable:"true"}}),t._v(" "),r("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),t._v(" "),r("el-table-column",{attrs:{prop:"bsFileName",label:"文件名称","show-overflow-tooltip":"",width:"170"}}),t._v(" "),r("el-table-column",{attrs:{prop:"bsFileCode",label:"文件编号","show-overflow-tooltip":"",width:"170"}}),t._v(" "),r("el-table-column",{attrs:{prop:"bsType",label:"类型",align:"center",width:"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-tag",{attrs:{type:t.statusFilter(e.row.bsType)}},[t._v(t._s(t.formatStatus(e.row.bsType)))])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"bsStatus",label:"状态",align:"center",width:"100","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-tag",{attrs:{type:t.statusFilter_1(e.row.bsStatus)}},[t._v(t._s(t.formatStatus_1(e.row.bsStatus)))])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"bsCompleteNum",label:"完成数","show-overflow-tooltip":"",width:"60"}}),t._v(" "),r("el-table-column",{attrs:{prop:"bsNum",label:"总数","show-overflow-tooltip":"",width:"50"}}),t._v(" "),r("el-table-column",{attrs:{prop:"createdTime",label:"创建时间","show-overflow-tooltip":"",width:"150"}}),t._v(" "),r("el-table-column",{attrs:{prop:"bsModifiedName",label:"操作人","show-overflow-tooltip":"",width:"80"}}),t._v(" "),r("el-table-column",{attrs:{prop:"bsRemark",label:"备注","show-overflow-tooltip":"",width:"100"}}),t._v(" "),r("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.permit.EDIT?r("el-button",{attrs:{title:"编辑",type:"primary",icon:"el-icon-edit",size:"mini",circle:""},on:{click:function(r){t.viewDetail(e.row)}}}):t._e()]}}])})],1)],t._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{staticClass:"pull-right clearfix",attrs:{current:1,"current-page":t.queryParams.page,"page-sizes":t.pageSizesList,"page-size":t.queryParams.rows,layout:"total, sizes, prev, pager, next, jumper","page-size-opts":t.pageSizesList,total:t.totalCount},on:{"current-change":t.changePage,"size-change":t.sizeChange,"update:currentPage":function(e){t.$set(t.queryParams,"page",e)}}})],1)],2)},[],!1,null,null,null);m.options.__file="enquiryOrderList.vue";e.default=m.exports},zEcj:function(t,e,r){"use strict";var n={props:{contents:{type:String,default:"这是一段内容"},title:{type:String,default:"标题名称"},confirmTitle:{type:String,default:"确认"}},methods:{open:function(){var t=this,e=this;this.$confirm(this.contents,this.title,{distinguishCancelAndClose:!0,confirmButtonText:this.confirmTitle,cancelButtonText:"取消",showClose:!0,type:"warning"}).then(function(){e.$emit("callConfirm")}).catch(function(){t.$message({type:"info",message:"已取消作废"})})}}},i=r("ZrdR"),s=Object(i.a)(n,function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){t.open()}}},[t._v("作废")])},[],!1,null,null,null);s.options.__file="messageInvalidBox.vue";e.a=s.exports}}]);