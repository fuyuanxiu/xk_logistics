(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a57d"],{Acpg:function(t,e,r){"use strict";r.d(e,"a",function(){return o}),r.d(e,"c",function(){return s}),r.d(e,"b",function(){return n}),r.d(e,"f",function(){return i}),r.d(e,"d",function(){return l}),r.d(e,"g",function(){return u}),r.d(e,"e",function(){return c});var a=r("t3Un");function o(t){return Object(a.a)({url:"/sysPermission/add",method:"post",params:t})}function s(t){return Object(a.a)({url:"/sysPermission/edit",method:"post",params:t})}function n(t){return Object(a.a)({url:"/sysPermission/delete",method:"post",params:{id:t}})}function i(t,e,r){return Object(a.a)({url:"/sysPermission/getlist",method:"get",params:{keyword:t,page:r,rows:e}})}function l(t,e){return Object(a.a)({url:"/sysPermission/getPermByRouter",method:"post",params:{roleId:t,routerId:e}})}function u(t){return Object(a.a)({url:"/sysPermission/setPerm",method:"post",params:t})}function c(t){return Object(a.a)({url:"/sysPermission/getPermByRouterCode",method:"get",params:{routerCode:t}})}},"H8/Y":function(t,e,r){"use strict";r.d(e,"b",function(){return o}),r.d(e,"h",function(){return s}),r.d(e,"g",function(){return n}),r.d(e,"f",function(){return i}),r.d(e,"d",function(){return l}),r.d(e,"a",function(){return u}),r.d(e,"e",function(){return c}),r.d(e,"c",function(){return d});var a=r("t3Un");function o(t){return Object(a.a)({url:"/quote/doQuote",method:"post",data:t})}function s(t,e,r,o,s,n){return Object(a.a)({url:"/quote/getlist",method:"get",params:{qtStatus:t,keyword:e,startDate:r,endDate:o,page:n,rows:s}})}function n(t){return Object(a.a)({url:"/quote/getQuoteInfo",method:"get",params:{id:t}})}function i(t){return Object(a.a)({url:"/quote/getAllQuoteList",method:"get",params:t})}function l(t){return Object(a.a)({url:"/quote/doAccept",method:"post",params:t})}function u(t){return Object(a.a)({url:"/quoteMateriel/addByNum",method:"post",params:t})}function c(t){return Object(a.a)({url:"/quoteMateriel/edit",method:"post",params:t})}function d(t){return Object(a.a)({headers:{"Content-Type":"multipart/form-data"},url:"/quoteMateriel/addQuoteExcel",method:"post",data:t})}},Pzrv:function(t,e,r){},cl0s:function(t,e,r){"use strict";var a=r("Pzrv");r.n(a).a},yjsA:function(t,e,r){"use strict";r.r(e);var a=r("H8/Y"),o=r("Acpg"),s={name:"quoList",components:{},data:function(){return{loading:!0,current:0,open:!1,items:[{sort:"全部"},{sort:"未报价"},{sort:"已报价"}],quoteTable:[{}],queryParams:{page:1,rows:15,pkParent:-1,qtStatus:0,keyword:"",startDate:"",endDate:""},pageSizesList:[15,20,30,40,50,100],totalCount:0,statusFilter:function(t){return{1:"danger",2:"info",3:"success"}[t]},formatStata:function(t){return{1:"未报价",2:"已报价"}[t]},permit:{SEARCH:!1,EDIT:!1}}},created:function(){this.getData(),this.getPermit()},methods:{clickRow:function(t,e,r){"操作"!=r.label&&this.view(t)},addClass:function(t){this.current=t},getPermit:function(){var t=this,e=this.$route.name;Object(o.e)(e).then(function(e){if(e.result)if("admin"==e.data)t.permit.SEARCH=!0,t.permit.EDIT=!0;else for(var r=e.data,a=0;a<r.length;a++)"SEARCH"==r[a].permCode&&(t.permit.SEARCH=!0),"EDIT"==r[a].permCode&&(t.permit.EDIT=!0);else t.$message.error(res.msg)})},getData:function(){var t=this;this.loading=!0,Object(a.h)(this.queryParams.qtStatus,this.queryParams.keyword,this.queryParams.startDate,this.queryParams.endDate,this.queryParams.rows,this.queryParams.page).then(function(e){t.loading=!1,e.result?(t.quoteTable=e.data.rows,t.totalCount=e.data.total):t.$message.error(res.msg)})},changeStatus:function(t){this.queryParams.qtStatus=t,this.getData()},resetFrom:function(){this.queryParams.keyword="",this.queryParams.startDate="",this.queryParams.endDate=""},showEditDialog:function(t,e){this.$router.push({path:t,query:{id:e.id}})},doDelete:function(t){var e=this,r=t.id;delEnquiry(r).then(function(t){t.result?(e.$message({message:t.msg,type:"success"}),e.getData()):e.$message.error(res.msg)})},view:function(t){this.$router.push({path:"quoDetail",query:{id:t.id}})},formatCode:function(t,e){if(!t[e.property])return"";var r=t[e.property];return null!=r&&void 0!=r&&r.length>17?r.substr(0,17):""},changePage:function(t){this.queryParams.page=t,this.getData()},SizeChange:function(t){this.queryParams.rows=t,this.getData()}}},n=(r("cl0s"),r("ZrdR")),i=Object(n.a)(s,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"retrieval"},[r("div",{staticClass:"title"},[r("h3",[t._v("报价状态")]),t._v(" "),r("div",{staticClass:"filter"},[r("ul",t._l(t.items,function(e,a){return r("li",{key:a,class:{current:a==t.current},on:{click:function(e){t.addClass(a)}}},[r("a",{on:{click:function(e){t.changeStatus(a)}}},[r("span",[t._v(t._s(e.sort))])])])}))]),t._v(" "),r("span",{staticClass:"more",on:{click:function(e){t.open=!t.open}}})]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.open,expression:"open"}],staticClass:"searchDiv"},[r("el-form",{ref:"form",staticClass:"formStly",attrs:{model:t.queryParams,"label-width":"70px",size:"small",inline:!0}},[r("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"关键字",prop:"eqTitle"}},[r("el-input",{model:{value:t.queryParams.keyword,callback:function(e){t.$set(t.queryParams,"keyword",e)},expression:"queryParams.keyword"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"报价日期",prop:"qtStartDate"}},[r("el-date-picker",{staticStyle:{width:"183px"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.queryParams.startDate,callback:function(e){t.$set(t.queryParams,"startDate",e)},expression:"queryParams.startDate"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"到",prop:"qtDeadLine"}},[r("el-date-picker",{staticStyle:{width:"183px"},attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.queryParams.endDate,callback:function(e){t.$set(t.queryParams,"endDate",e)},expression:"queryParams.endDate"}})],1)],1),t._v(" "),r("el-col",{attrs:{span:4}},[t.permit.SEARCH?r("el-button",{attrs:{type:"primary"},on:{click:t.getData}},[t._v("查找")]):t._e(),t._v(" "),r("el-button",{attrs:{type:"info"},on:{click:t.resetFrom}},[t._v("重置")])],1)],1)],1)],1)]),t._v(" "),[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:t.quoteTable,"tooltip-effect":"dark","highlight-current-row":""},on:{"row-click":t.clickRow}},[r("el-table-column",{attrs:{label:"序号",type:"index",width:"50",fixed:""}}),t._v(" "),r("el-table-column",{attrs:{prop:"suppAliaName",label:"供应商简称","show-overflow-tooltip":"",width:"100"}}),t._v(" "),r("el-table-column",{attrs:{prop:"qtTitle",label:"报价单标题",width:"140","show-overflow-tooltip":""}}),t._v(" "),r("el-table-column",{attrs:{prop:"eqTitle",label:"询价单标题",width:"120","show-overflow-tooltip":""}}),t._v(" "),r("el-table-column",{attrs:{prop:"qtCode",label:"询价单编号","show-overflow-tooltip":"",width:"200",formatter:t.formatCode}}),t._v(" "),r("el-table-column",{attrs:{prop:"qtStartDate",label:"报价日期","show-overflow-tooltip":""}}),t._v(" "),r("el-table-column",{attrs:{prop:"qtDeadLine",label:"截止日期","show-overflow-tooltip":""}}),t._v(" "),r("el-table-column",{attrs:{prop:"eqStartDate",label:"询价日期","show-overflow-tooltip":""}}),t._v(" "),r("el-table-column",{attrs:{prop:"qtTotalPrice",label:"报价总额","show-overflow-tooltip":""}}),t._v(" "),r("el-table-column",{attrs:{prop:"suppContactName",label:"报价人","show-overflow-tooltip":""}}),t._v(" "),r("el-table-column",{attrs:{prop:"qtStatus",label:"报价状态","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-tag",{attrs:{type:t.statusFilter(e.row.qtStatus)}},[t._v(t._s(t.formatStata(e.row.qtStatus)))])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("a",{staticClass:"operatIcon colorblue",on:{click:function(r){t.view(e.row)}}},[r("i",{staticClass:"el-icon-search"})]),t._v(" "),t.permit.EDIT?r("a",{staticClass:"operatIcon colorgreen",on:{click:function(r){t.showEditDialog("quoAdd",e.row)}}},[r("i",{staticClass:"el-icon-edit"})]):t._e()]}}])})],1)],t._v(" "),r("div",{staticClass:"block"},[r("el-pagination",{staticClass:"pull-right clearfix",attrs:{current:1,"current-page":t.queryParams.page,"page-sizes":t.pageSizesList,"page-size":t.queryParams.rows,layout:"total, sizes, prev, pager, next, jumper","page-size-opts":t.pageSizesList,total:t.totalCount},on:{"current-change":t.changePage,"size-change":t.SizeChange,"update:currentPage":function(e){t.$set(t.queryParams,"page",e)}}})],1)],2)},[],!1,null,null,null);i.options.__file="quoList.vue";e.default=i.exports}}]);